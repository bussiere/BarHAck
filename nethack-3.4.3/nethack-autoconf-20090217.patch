== Overview ==

This patch is a backport of Slash'EMs Autoconf compilation for NetHack.

It has been tested on Linux (tty) and on Windows XP (tty, mswin).

Please direct bugs and questions to <bhaak@gmx.net> or post them to the
NetHack Newsgroup rec.games.roguelike.nethack[1].


== Detailed compilation instructions ==

Windows user need to install an development environment as detailed in 
the NetHack-Cygwin-MinGW HOWTO[2].

1. Download NetHacks source code from http://www.nethack.org/v343/download-src.html
2. Extract the tar file:
 tar xfz nethack-343-src.tgz
3. Apply this patch:
 patch -p0 <nethack-autoconf-20090217.patch
4. Enter the directory:
 cd nethack-3.4.3

5a. On Linux:
 ./configure && make && make install

5b. On Windows for a tty build:
 ./configure --with-owner=Username --with-group=Usergroup --build=mingw32 --prefix=/opt/nethack --without-compression --enable-tty-graphics && make && make install

5c. On Windows for a GUI build:
 ./configure --with-owner=Username --with-group=Usergroup --build=mingw32 --prefix=/opt/nethack --without-compression --disable-tty-graphics --enable-mswin-graphics && make && make install


[1] Google Groups URL: http://groups.google.com/group/rec.games.roguelike.nethack
[2] http://www.crawfords.de/nh-cygwin-mingw-howto/


diff -uwrN --exclude=.svn nethack-3.4.3/README.configure nethack-autoconf/README.configure
--- nethack-3.4.3/README.configure	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/README.configure	2009-02-17 19:38:04.000000000 +0100
@@ -0,0 +1,37 @@
+== Overview ==
+
+This patch is a backport of Slash'EMs Autoconf compilation for NetHack.
+
+It has been tested on Linux (tty) and on Windows XP (tty, mswin).
+
+Please direct bugs and questions to <bhaak@gmx.net> or post them to the
+NetHack Newsgroup rec.games.roguelike.nethack[1].
+
+
+== Detailed compilation instructions ==
+
+Windows user need to install an development environment as detailed in 
+the NetHack-Cygwin-MinGW HOWTO[2].
+
+1. Download NetHacks source code from http://www.nethack.org/v343/download-src.html
+2. Extract the tar file:
+ tar xfz nethack-343-src.tgz
+3. Apply this patch:
+ patch -p0 <nethack-autoconf-20090217.patch
+4. Enter the directory:
+ cd nethack-3.4.3
+
+5a. On Linux:
+ ./configure && make && make install
+
+5b. On Windows for a tty build:
+ ./configure --with-owner=Username --with-group=Usergroup --build=mingw32 --prefix=/opt/nethack --without-compression --enable-tty-graphics && make && make install
+
+5c. On Windows for a GUI build:
+ ./configure --with-owner=Username --with-group=Usergroup --build=mingw32 --prefix=/opt/nethack --without-compression --disable-tty-graphics --enable-mswin-graphics && make && make install
+
+
+[1] Google Groups URL: http://groups.google.com/group/rec.games.roguelike.nethack
+[2] http://www.crawfords.de/nh-cygwin-mingw-howto/
+
+
diff -uwrN --exclude=.svn nethack-3.4.3/configure nethack-autoconf/configure
--- nethack-3.4.3/configure	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/configure	2009-02-17 19:44:49.000000000 +0100
@@ -0,0 +1,8129 @@
+#! /bin/sh
+# Guess values for system-dependent variables and create Makefiles.
+# Generated by GNU Autoconf 2.61 for NETHACK 3.4.3.
+#
+# Report bugs to <bhaak@gmx.net>.
+#
+# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+# 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
+# This configure script is free software; the Free Software Foundation
+# gives unlimited permission to copy, distribute and modify it.
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be more Bourne compatible
+DUALCASE=1; export DUALCASE # for MKS sh
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+  setopt NO_GLOB_SUBST
+else
+  case `(set -o) 2>/dev/null` in
+  *posix*) set -o posix ;;
+esac
+
+fi
+
+
+
+
+# PATH needs CR
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conf$$.sh
+  echo  "exit 0"   >>conf$$.sh
+  chmod +x conf$$.sh
+  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conf$$.sh
+fi
+
+# Support unset when possible.
+if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.  Quoting is
+# there to prevent editors from complaining about space-tab.
+# (If _AS_PATH_WALK were called with IFS unset, it would disable word
+# splitting by setting IFS to empty value.)
+as_nl='
+'
+IFS=" ""	$as_nl"
+
+# Find who we are.  Look in the path if we contain no directory separator.
+case $0 in
+  *[\\/]* ) as_myself=$0 ;;
+  *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+IFS=$as_save_IFS
+
+     ;;
+esac
+# We did not find ourselves, most probably we were run as `sh COMMAND'
+# in which case we are not to be found in the path.
+if test "x$as_myself" = x; then
+  as_myself=$0
+fi
+if test ! -f "$as_myself"; then
+  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  { (exit 1); exit 1; }
+fi
+
+# Work around bugs in pre-3.0 UWIN ksh.
+for as_var in ENV MAIL MAILPATH
+do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+done
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# NLS nuisances.
+for as_var in \
+  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+  LC_TELEPHONE LC_TIME
+do
+  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+    eval $as_var=C; export $as_var
+  else
+    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+  fi
+done
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1 &&
+   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename -- "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+
+# CDPATH.
+$as_unset CDPATH
+
+
+if test "x$CONFIG_SHELL" = x; then
+  if (eval ":") 2>/dev/null; then
+  as_have_required=yes
+else
+  as_have_required=no
+fi
+
+  if test $as_have_required = yes && 	 (eval ":
+(as_func_return () {
+  (exit \$1)
+}
+as_func_success () {
+  as_func_return 0
+}
+as_func_failure () {
+  as_func_return 1
+}
+as_func_ret_success () {
+  return 0
+}
+as_func_ret_failure () {
+  return 1
+}
+
+exitcode=0
+if as_func_success; then
+  :
+else
+  exitcode=1
+  echo as_func_success failed.
+fi
+
+if as_func_failure; then
+  exitcode=1
+  echo as_func_failure succeeded.
+fi
+
+if as_func_ret_success; then
+  :
+else
+  exitcode=1
+  echo as_func_ret_success failed.
+fi
+
+if as_func_ret_failure; then
+  exitcode=1
+  echo as_func_ret_failure succeeded.
+fi
+
+if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+  :
+else
+  exitcode=1
+  echo positional parameters were not saved.
+fi
+
+test \$exitcode = 0) || { (exit 1); exit 1; }
+
+(
+  as_lineno_1=\$LINENO
+  as_lineno_2=\$LINENO
+  test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
+  test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
+") 2> /dev/null; then
+  :
+else
+  as_candidate_shells=
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  case $as_dir in
+	 /*)
+	   for as_base in sh bash ksh sh5; do
+	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
+	   done;;
+       esac
+done
+IFS=$as_save_IFS
+
+
+      for as_shell in $as_candidate_shells $SHELL; do
+	 # Try only shells that exist, to save several forks.
+	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
+		{ ("$as_shell") 2> /dev/null <<\_ASEOF
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+  setopt NO_GLOB_SUBST
+else
+  case `(set -o) 2>/dev/null` in
+  *posix*) set -o posix ;;
+esac
+
+fi
+
+
+:
+_ASEOF
+}; then
+  CONFIG_SHELL=$as_shell
+	       as_have_required=yes
+	       if { "$as_shell" 2> /dev/null <<\_ASEOF
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+  setopt NO_GLOB_SUBST
+else
+  case `(set -o) 2>/dev/null` in
+  *posix*) set -o posix ;;
+esac
+
+fi
+
+
+:
+(as_func_return () {
+  (exit $1)
+}
+as_func_success () {
+  as_func_return 0
+}
+as_func_failure () {
+  as_func_return 1
+}
+as_func_ret_success () {
+  return 0
+}
+as_func_ret_failure () {
+  return 1
+}
+
+exitcode=0
+if as_func_success; then
+  :
+else
+  exitcode=1
+  echo as_func_success failed.
+fi
+
+if as_func_failure; then
+  exitcode=1
+  echo as_func_failure succeeded.
+fi
+
+if as_func_ret_success; then
+  :
+else
+  exitcode=1
+  echo as_func_ret_success failed.
+fi
+
+if as_func_ret_failure; then
+  exitcode=1
+  echo as_func_ret_failure succeeded.
+fi
+
+if ( set x; as_func_ret_success y && test x = "$1" ); then
+  :
+else
+  exitcode=1
+  echo positional parameters were not saved.
+fi
+
+test $exitcode = 0) || { (exit 1); exit 1; }
+
+(
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
+
+_ASEOF
+}; then
+  break
+fi
+
+fi
+
+      done
+
+      if test "x$CONFIG_SHELL" != x; then
+  for as_var in BASH_ENV ENV
+        do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+        done
+        export CONFIG_SHELL
+        exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+fi
+
+
+    if test $as_have_required = no; then
+  echo This script requires a shell more modern than all the
+      echo shells that I found on your system.  Please install a
+      echo modern shell, or manually run the script under such a
+      echo shell if you do have one.
+      { (exit 1); exit 1; }
+fi
+
+
+fi
+
+fi
+
+
+
+(eval "as_func_return () {
+  (exit \$1)
+}
+as_func_success () {
+  as_func_return 0
+}
+as_func_failure () {
+  as_func_return 1
+}
+as_func_ret_success () {
+  return 0
+}
+as_func_ret_failure () {
+  return 1
+}
+
+exitcode=0
+if as_func_success; then
+  :
+else
+  exitcode=1
+  echo as_func_success failed.
+fi
+
+if as_func_failure; then
+  exitcode=1
+  echo as_func_failure succeeded.
+fi
+
+if as_func_ret_success; then
+  :
+else
+  exitcode=1
+  echo as_func_ret_success failed.
+fi
+
+if as_func_ret_failure; then
+  exitcode=1
+  echo as_func_ret_failure succeeded.
+fi
+
+if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+  :
+else
+  exitcode=1
+  echo positional parameters were not saved.
+fi
+
+test \$exitcode = 0") || {
+  echo No shell found that supports shell functions.
+  echo Please tell autoconf@gnu.org about your system,
+  echo including any error possibly output before this
+  echo message
+}
+
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line after each line using $LINENO; the second 'sed'
+  # does the real work.  The second script uses 'N' to pair each
+  # line-number line with the line containing $LINENO, and appends
+  # trailing '-' during substitution so that $LINENO is not a special
+  # case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+  # E. McMahon (1931-1989) for sed's syntax.  :-)
+  sed -n '
+    p
+    /[$]LINENO/=
+  ' <$as_myself |
+    sed '
+      s/[$]LINENO.*/&-/
+      t lineno
+      b
+      :lineno
+      N
+      :loop
+      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
+      t loop
+      s/-\n.*//
+    ' >$as_me.lineno &&
+  chmod +x "$as_me.lineno" ||
+    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensitive to this).
+  . "./$as_me.lineno"
+  # Exit status is that of the last command.
+  exit
+}
+
+
+if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+  as_dirname=dirname
+else
+  as_dirname=false
+fi
+
+ECHO_C= ECHO_N= ECHO_T=
+case `echo -n x` in
+-n*)
+  case `echo 'x\c'` in
+  *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+  *)   ECHO_C='\c';;
+  esac;;
+*)
+  ECHO_N='-n';;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1 &&
+   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+if test -d conf$$.dir; then
+  rm -f conf$$.dir/conf$$.file
+else
+  rm -f conf$$.dir
+  mkdir conf$$.dir
+fi
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s='ln -s'
+  # ... but there are two gotchas:
+  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+  # In both cases, we have to default to `cp -p'.
+  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+    as_ln_s='cp -p'
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+rmdir conf$$.dir 2>/dev/null
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  test -d ./-p && rmdir ./-p
+  as_mkdir_p=false
+fi
+
+if test -x / >/dev/null 2>&1; then
+  as_test_x='test -x'
+else
+  if ls -dL / >/dev/null 2>&1; then
+    as_ls_L_option=L
+  else
+    as_ls_L_option=
+  fi
+  as_test_x='
+    eval sh -c '\''
+      if test -d "$1"; then
+        test -d "$1/.";
+      else
+	case $1 in
+        -*)set "./$1";;
+	esac;
+	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
+	???[sx]*):;;*)false;;esac;fi
+    '\'' sh
+  '
+fi
+as_executable_p=$as_test_x
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+
+
+
+exec 7<&0 </dev/null 6>&1
+
+# Name of the host.
+# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# so uname gets run too.
+ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+
+#
+# Initializations.
+#
+ac_default_prefix=/usr/local
+ac_clean_files=
+ac_config_libobj_dir=.
+LIBOBJS=
+cross_compiling=no
+subdirs=
+MFLAGS=
+MAKEFLAGS=
+SHELL=${CONFIG_SHELL-/bin/sh}
+
+# Identity of this package.
+PACKAGE_NAME='NETHACK'
+PACKAGE_TARNAME='nethack'
+PACKAGE_VERSION='3.4.3'
+PACKAGE_STRING='NETHACK 3.4.3'
+PACKAGE_BUGREPORT='bhaak@gmx.net'
+
+ac_unique_file="Files"
+# Factoring default headers for most tests.
+ac_includes_default="\
+#include <stdio.h>
+#ifdef HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#ifdef HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
+#ifdef STDC_HEADERS
+# include <stdlib.h>
+# include <stddef.h>
+#else
+# ifdef HAVE_STDLIB_H
+#  include <stdlib.h>
+# endif
+#endif
+#ifdef HAVE_STRING_H
+# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
+#  include <memory.h>
+# endif
+# include <string.h>
+#endif
+#ifdef HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#ifdef HAVE_INTTYPES_H
+# include <inttypes.h>
+#endif
+#ifdef HAVE_STDINT_H
+# include <stdint.h>
+#endif
+#ifdef HAVE_UNISTD_H
+# include <unistd.h>
+#endif"
+
+ac_subst_vars='SHELL
+PATH_SEPARATOR
+PACKAGE_NAME
+PACKAGE_TARNAME
+PACKAGE_VERSION
+PACKAGE_STRING
+PACKAGE_BUGREPORT
+exec_prefix
+prefix
+program_transform_name
+bindir
+sbindir
+libexecdir
+datarootdir
+datadir
+sysconfdir
+sharedstatedir
+localstatedir
+includedir
+oldincludedir
+docdir
+infodir
+htmldir
+dvidir
+pdfdir
+psdir
+libdir
+localedir
+mandir
+DEFS
+ECHO_C
+ECHO_N
+ECHO_T
+LIBS
+build_alias
+host_alias
+target_alias
+SRCDIR
+CC
+CHGRP
+CHOWN
+CHMOD
+ZLIB_CFLAGS
+ZLIB_LIBS
+LN_S
+AWK
+CFLAGS
+LDFLAGS
+CPPFLAGS
+ac_ct_CC
+EXEEXT
+OBJEXT
+LFLAGS
+build
+build_cpu
+build_vendor
+build_os
+host
+host_cpu
+host_vendor
+host_os
+LIBXAW_CFLAGS
+LIBXAW_LIBS
+PKG_CONFIG
+HOST_MSWIN
+HOST_UNIX
+SYSTEM
+SYSSRC
+SYSOBJ
+NHKEYDLL_GCC
+LEX
+LEX_OUTPUT_ROOT
+LEXLIB
+YACC
+YFLAGS
+ac_ct_CHOWN
+ac_ct_CHGRP
+ac_ct_CHMOD
+WINDRES
+COMPRESS
+EXTRA_UNSHARE
+CPP
+GREP
+EGREP
+WINTTYLIB
+WINSRC
+WINOBJ
+WINLIB
+CNF_SHARE_DATND
+OPTIONS_FILE
+OPTIONS_FILES
+HAVE_NROFF
+HAVE_TBL
+GUIDEBOOK
+GUIDEBOOK_TXT
+OWNER
+GROUP
+LIBOBJS
+LTLIBOBJS'
+ac_subst_files=''
+      ac_precious_vars='build_alias
+host_alias
+target_alias
+CC
+CHGRP
+CHOWN
+CHMOD
+ZLIB_CFLAGS
+ZLIB_LIBS
+CFLAGS
+LDFLAGS
+LIBS
+CPPFLAGS
+LIBXAW_CFLAGS
+LIBXAW_LIBS
+PKG_CONFIG
+YACC
+YFLAGS
+CPP'
+
+
+# Initialize some variables set by options.
+ac_init_help=
+ac_init_version=false
+# The variables have the same names as the options, with
+# dashes changed to underlines.
+cache_file=/dev/null
+exec_prefix=NONE
+no_create=
+no_recursion=
+prefix=NONE
+program_prefix=NONE
+program_suffix=NONE
+program_transform_name=s,x,x,
+silent=
+site=
+srcdir=
+verbose=
+x_includes=NONE
+x_libraries=NONE
+
+# Installation directory options.
+# These are left unexpanded so users can "make install exec_prefix=/foo"
+# and all the variables that are supposed to be based on exec_prefix
+# by default will actually change.
+# Use braces instead of parens because sh, perl, etc. also accept them.
+# (The list follows the same order as the GNU Coding Standards.)
+bindir='${exec_prefix}/bin'
+sbindir='${exec_prefix}/sbin'
+libexecdir='${exec_prefix}/libexec'
+datarootdir='${prefix}/share'
+datadir='${datarootdir}'
+sysconfdir='${prefix}/etc'
+sharedstatedir='${prefix}/com'
+localstatedir='${prefix}/var'
+includedir='${prefix}/include'
+oldincludedir='/usr/include'
+docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
+infodir='${datarootdir}/info'
+htmldir='${docdir}'
+dvidir='${docdir}'
+pdfdir='${docdir}'
+psdir='${docdir}'
+libdir='${exec_prefix}/lib'
+localedir='${datarootdir}/locale'
+mandir='${datarootdir}/man'
+
+ac_prev=
+ac_dashdash=
+for ac_option
+do
+  # If the previous option needs an argument, assign it.
+  if test -n "$ac_prev"; then
+    eval $ac_prev=\$ac_option
+    ac_prev=
+    continue
+  fi
+
+  case $ac_option in
+  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *)	ac_optarg=yes ;;
+  esac
+
+  # Accept the important Cygnus configure options, so we can diagnose typos.
+
+  case $ac_dashdash$ac_option in
+  --)
+    ac_dashdash=yes ;;
+
+  -bindir | --bindir | --bindi | --bind | --bin | --bi)
+    ac_prev=bindir ;;
+  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
+    bindir=$ac_optarg ;;
+
+  -build | --build | --buil | --bui | --bu)
+    ac_prev=build_alias ;;
+  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
+    build_alias=$ac_optarg ;;
+
+  -cache-file | --cache-file | --cache-fil | --cache-fi \
+  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
+    ac_prev=cache_file ;;
+  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
+  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
+    cache_file=$ac_optarg ;;
+
+  --config-cache | -C)
+    cache_file=config.cache ;;
+
+  -datadir | --datadir | --datadi | --datad)
+    ac_prev=datadir ;;
+  -datadir=* | --datadir=* | --datadi=* | --datad=*)
+    datadir=$ac_optarg ;;
+
+  -datarootdir | --datarootdir | --datarootdi | --datarootd | --dataroot \
+  | --dataroo | --dataro | --datar)
+    ac_prev=datarootdir ;;
+  -datarootdir=* | --datarootdir=* | --datarootdi=* | --datarootd=* \
+  | --dataroot=* | --dataroo=* | --dataro=* | --datar=*)
+    datarootdir=$ac_optarg ;;
+
+  -disable-* | --disable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
+    eval enable_$ac_feature=no ;;
+
+  -docdir | --docdir | --docdi | --doc | --do)
+    ac_prev=docdir ;;
+  -docdir=* | --docdir=* | --docdi=* | --doc=* | --do=*)
+    docdir=$ac_optarg ;;
+
+  -dvidir | --dvidir | --dvidi | --dvid | --dvi | --dv)
+    ac_prev=dvidir ;;
+  -dvidir=* | --dvidir=* | --dvidi=* | --dvid=* | --dvi=* | --dv=*)
+    dvidir=$ac_optarg ;;
+
+  -enable-* | --enable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
+    eval enable_$ac_feature=\$ac_optarg ;;
+
+  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
+  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
+  | --exec | --exe | --ex)
+    ac_prev=exec_prefix ;;
+  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
+  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
+  | --exec=* | --exe=* | --ex=*)
+    exec_prefix=$ac_optarg ;;
+
+  -gas | --gas | --ga | --g)
+    # Obsolete; use --with-gas.
+    with_gas=yes ;;
+
+  -help | --help | --hel | --he | -h)
+    ac_init_help=long ;;
+  -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
+    ac_init_help=recursive ;;
+  -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
+    ac_init_help=short ;;
+
+  -host | --host | --hos | --ho)
+    ac_prev=host_alias ;;
+  -host=* | --host=* | --hos=* | --ho=*)
+    host_alias=$ac_optarg ;;
+
+  -htmldir | --htmldir | --htmldi | --htmld | --html | --htm | --ht)
+    ac_prev=htmldir ;;
+  -htmldir=* | --htmldir=* | --htmldi=* | --htmld=* | --html=* | --htm=* \
+  | --ht=*)
+    htmldir=$ac_optarg ;;
+
+  -includedir | --includedir | --includedi | --included | --include \
+  | --includ | --inclu | --incl | --inc)
+    ac_prev=includedir ;;
+  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
+  | --includ=* | --inclu=* | --incl=* | --inc=*)
+    includedir=$ac_optarg ;;
+
+  -infodir | --infodir | --infodi | --infod | --info | --inf)
+    ac_prev=infodir ;;
+  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
+    infodir=$ac_optarg ;;
+
+  -libdir | --libdir | --libdi | --libd)
+    ac_prev=libdir ;;
+  -libdir=* | --libdir=* | --libdi=* | --libd=*)
+    libdir=$ac_optarg ;;
+
+  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
+  | --libexe | --libex | --libe)
+    ac_prev=libexecdir ;;
+  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
+  | --libexe=* | --libex=* | --libe=*)
+    libexecdir=$ac_optarg ;;
+
+  -localedir | --localedir | --localedi | --localed | --locale)
+    ac_prev=localedir ;;
+  -localedir=* | --localedir=* | --localedi=* | --localed=* | --locale=*)
+    localedir=$ac_optarg ;;
+
+  -localstatedir | --localstatedir | --localstatedi | --localstated \
+  | --localstate | --localstat | --localsta | --localst | --locals)
+    ac_prev=localstatedir ;;
+  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
+  | --localstate=* | --localstat=* | --localsta=* | --localst=* | --locals=*)
+    localstatedir=$ac_optarg ;;
+
+  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
+    ac_prev=mandir ;;
+  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
+    mandir=$ac_optarg ;;
+
+  -nfp | --nfp | --nf)
+    # Obsolete; use --without-fp.
+    with_fp=no ;;
+
+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+  | --no-cr | --no-c | -n)
+    no_create=yes ;;
+
+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
+    no_recursion=yes ;;
+
+  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
+  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
+  | --oldin | --oldi | --old | --ol | --o)
+    ac_prev=oldincludedir ;;
+  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
+  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
+  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
+    oldincludedir=$ac_optarg ;;
+
+  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
+    ac_prev=prefix ;;
+  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
+    prefix=$ac_optarg ;;
+
+  -program-prefix | --program-prefix | --program-prefi | --program-pref \
+  | --program-pre | --program-pr | --program-p)
+    ac_prev=program_prefix ;;
+  -program-prefix=* | --program-prefix=* | --program-prefi=* \
+  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
+    program_prefix=$ac_optarg ;;
+
+  -program-suffix | --program-suffix | --program-suffi | --program-suff \
+  | --program-suf | --program-su | --program-s)
+    ac_prev=program_suffix ;;
+  -program-suffix=* | --program-suffix=* | --program-suffi=* \
+  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
+    program_suffix=$ac_optarg ;;
+
+  -program-transform-name | --program-transform-name \
+  | --program-transform-nam | --program-transform-na \
+  | --program-transform-n | --program-transform- \
+  | --program-transform | --program-transfor \
+  | --program-transfo | --program-transf \
+  | --program-trans | --program-tran \
+  | --progr-tra | --program-tr | --program-t)
+    ac_prev=program_transform_name ;;
+  -program-transform-name=* | --program-transform-name=* \
+  | --program-transform-nam=* | --program-transform-na=* \
+  | --program-transform-n=* | --program-transform-=* \
+  | --program-transform=* | --program-transfor=* \
+  | --program-transfo=* | --program-transf=* \
+  | --program-trans=* | --program-tran=* \
+  | --progr-tra=* | --program-tr=* | --program-t=*)
+    program_transform_name=$ac_optarg ;;
+
+  -pdfdir | --pdfdir | --pdfdi | --pdfd | --pdf | --pd)
+    ac_prev=pdfdir ;;
+  -pdfdir=* | --pdfdir=* | --pdfdi=* | --pdfd=* | --pdf=* | --pd=*)
+    pdfdir=$ac_optarg ;;
+
+  -psdir | --psdir | --psdi | --psd | --ps)
+    ac_prev=psdir ;;
+  -psdir=* | --psdir=* | --psdi=* | --psd=* | --ps=*)
+    psdir=$ac_optarg ;;
+
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil)
+    silent=yes ;;
+
+  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
+    ac_prev=sbindir ;;
+  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
+  | --sbi=* | --sb=*)
+    sbindir=$ac_optarg ;;
+
+  -sharedstatedir | --sharedstatedir | --sharedstatedi \
+  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
+  | --sharedst | --shareds | --shared | --share | --shar \
+  | --sha | --sh)
+    ac_prev=sharedstatedir ;;
+  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
+  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
+  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
+  | --sha=* | --sh=*)
+    sharedstatedir=$ac_optarg ;;
+
+  -site | --site | --sit)
+    ac_prev=site ;;
+  -site=* | --site=* | --sit=*)
+    site=$ac_optarg ;;
+
+  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
+    ac_prev=srcdir ;;
+  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
+    srcdir=$ac_optarg ;;
+
+  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
+  | --syscon | --sysco | --sysc | --sys | --sy)
+    ac_prev=sysconfdir ;;
+  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
+  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
+    sysconfdir=$ac_optarg ;;
+
+  -target | --target | --targe | --targ | --tar | --ta | --t)
+    ac_prev=target_alias ;;
+  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
+    target_alias=$ac_optarg ;;
+
+  -v | -verbose | --verbose | --verbos | --verbo | --verb)
+    verbose=yes ;;
+
+  -version | --version | --versio | --versi | --vers | -V)
+    ac_init_version=: ;;
+
+  -with-* | --with-*)
+    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
+    eval with_$ac_package=\$ac_optarg ;;
+
+  -without-* | --without-*)
+    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
+    eval with_$ac_package=no ;;
+
+  --x)
+    # Obsolete; use --with-x.
+    with_x=yes ;;
+
+  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
+  | --x-incl | --x-inc | --x-in | --x-i)
+    ac_prev=x_includes ;;
+  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
+  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
+    x_includes=$ac_optarg ;;
+
+  -x-libraries | --x-libraries | --x-librarie | --x-librari \
+  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
+    ac_prev=x_libraries ;;
+  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
+  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
+    x_libraries=$ac_optarg ;;
+
+  -*) { echo "$as_me: error: unrecognized option: $ac_option
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; }
+    ;;
+
+  *=*)
+    ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+   { (exit 1); exit 1; }; }
+    eval $ac_envvar=\$ac_optarg
+    export $ac_envvar ;;
+
+  *)
+    # FIXME: should be removed in autoconf 3.0.
+    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    ;;
+
+  esac
+done
+
+if test -n "$ac_prev"; then
+  ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+  { echo "$as_me: error: missing argument to $ac_option" >&2
+   { (exit 1); exit 1; }; }
+fi
+
+# Be sure to have absolute directory names.
+for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
+		datadir sysconfdir sharedstatedir localstatedir includedir \
+		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
+		libdir localedir mandir
+do
+  eval ac_val=\$$ac_var
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* )  continue;;
+    NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
+  esac
+  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; }
+done
+
+# There might be people who depend on the old broken behavior: `$host'
+# used to hold the argument of --host etc.
+# FIXME: To remove some day.
+build=$build_alias
+host=$host_alias
+target=$target_alias
+
+# FIXME: To remove some day.
+if test "x$host_alias" != x; then
+  if test "x$build_alias" = x; then
+    cross_compiling=maybe
+    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used." >&2
+  elif test "x$build_alias" != "x$host_alias"; then
+    cross_compiling=yes
+  fi
+fi
+
+ac_tool_prefix=
+test -n "$host_alias" && ac_tool_prefix=$host_alias-
+
+test "$silent" = yes && exec 6>/dev/null
+
+
+ac_pwd=`pwd` && test -n "$ac_pwd" &&
+ac_ls_di=`ls -di .` &&
+ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
+  { echo "$as_me: error: Working directory cannot be determined" >&2
+   { (exit 1); exit 1; }; }
+test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
+  { echo "$as_me: error: pwd does not report name of working directory" >&2
+   { (exit 1); exit 1; }; }
+
+
+# Find the source files, if location was not specified.
+if test -z "$srcdir"; then
+  ac_srcdir_defaulted=yes
+  # Try the directory containing this script, then the parent directory.
+  ac_confdir=`$as_dirname -- "$0" ||
+$as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$0" : 'X\(//\)[^/]' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+echo X"$0" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)[^/].*/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+  srcdir=$ac_confdir
+  if test ! -r "$srcdir/$ac_unique_file"; then
+    srcdir=..
+  fi
+else
+  ac_srcdir_defaulted=no
+fi
+if test ! -r "$srcdir/$ac_unique_file"; then
+  test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
+  { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
+   { (exit 1); exit 1; }; }
+fi
+ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
+ac_abs_confdir=`(
+	cd "$srcdir" && test -r "./$ac_unique_file" || { echo "$as_me: error: $ac_msg" >&2
+   { (exit 1); exit 1; }; }
+	pwd)`
+# When building in place, set srcdir=.
+if test "$ac_abs_confdir" = "$ac_pwd"; then
+  srcdir=.
+fi
+# Remove unnecessary trailing slashes from srcdir.
+# Double slashes in file names in object file debugging info
+# mess up M-x gdb in Emacs.
+case $srcdir in
+*/) srcdir=`expr "X$srcdir" : 'X\(.*[^/]\)' \| "X$srcdir" : 'X\(.*\)'`;;
+esac
+for ac_var in $ac_precious_vars; do
+  eval ac_env_${ac_var}_set=\${${ac_var}+set}
+  eval ac_env_${ac_var}_value=\$${ac_var}
+  eval ac_cv_env_${ac_var}_set=\${${ac_var}+set}
+  eval ac_cv_env_${ac_var}_value=\$${ac_var}
+done
+
+#
+# Report the --help message.
+#
+if test "$ac_init_help" = "long"; then
+  # Omit some internal or obsolete options to make the list less imposing.
+  # This message is too long to be a string in the A/UX 3.1 sh.
+  cat <<_ACEOF
+\`configure' configures NETHACK 3.4.3 to adapt to many kinds of systems.
+
+Usage: $0 [OPTION]... [VAR=VALUE]...
+
+To assign environment variables (e.g., CC, CFLAGS...), specify them as
+VAR=VALUE.  See below for descriptions of some of the useful variables.
+
+Defaults for the options are specified in brackets.
+
+Configuration:
+  -h, --help              display this help and exit
+      --help=short        display options specific to this package
+      --help=recursive    display the short help of all the included packages
+  -V, --version           display version information and exit
+  -q, --quiet, --silent   do not print \`checking...' messages
+      --cache-file=FILE   cache test results in FILE [disabled]
+  -C, --config-cache      alias for \`--cache-file=config.cache'
+  -n, --no-create         do not create output files
+      --srcdir=DIR        find the sources in DIR [configure dir or \`..']
+
+Installation directories:
+  --prefix=PREFIX         install architecture-independent files in PREFIX
+			  [$ac_default_prefix]
+  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+			  [PREFIX]
+
+By default, \`make install' will install all the files in
+\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+an installation prefix other than \`$ac_default_prefix' using \`--prefix',
+for instance \`--prefix=\$HOME'.
+
+For better control, use the options below.
+
+Fine tuning of the installation directories:
+  --bindir=DIR           user executables [EPREFIX/bin]
+  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+  --libexecdir=DIR       program executables [EPREFIX/libexec]
+  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
+  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
+  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+  --libdir=DIR           object code libraries [EPREFIX/lib]
+  --includedir=DIR       C header files [PREFIX/include]
+  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
+  --datarootdir=DIR      read-only arch.-independent data root [PREFIX/share]
+  --datadir=DIR          read-only architecture-independent data [DATAROOTDIR]
+  --infodir=DIR          info documentation [DATAROOTDIR/info]
+  --localedir=DIR        locale-dependent data [DATAROOTDIR/locale]
+  --mandir=DIR           man documentation [DATAROOTDIR/man]
+  --docdir=DIR           documentation root [DATAROOTDIR/doc/nethack]
+  --htmldir=DIR          html documentation [DOCDIR]
+  --dvidir=DIR           dvi documentation [DOCDIR]
+  --pdfdir=DIR           pdf documentation [DOCDIR]
+  --psdir=DIR            ps documentation [DOCDIR]
+_ACEOF
+
+  cat <<\_ACEOF
+
+System types:
+  --build=BUILD     configure for building on BUILD [guessed]
+  --host=HOST       cross-compile to build programs to run on HOST [BUILD]
+_ACEOF
+fi
+
+if test -n "$ac_init_help"; then
+  case $ac_init_help in
+     short | recursive ) echo "Configuration of NETHACK 3.4.3:";;
+   esac
+  cat <<\_ACEOF
+
+Optional Features:
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+  --enable-tty-graphics   use tty-graphics (default=auto)
+  --enable-x11-graphics   use x11-graphics (default=no)
+  --enable-mswin-graphics use Microsoft Window's native graphics (default=no)
+  --enable-data-librarian Data librarian (default=auto)
+  --enable-sinks          Kitchen sinks (default=yes)
+  --enable-wallified-maze Fancy mazes (default=yes)
+  --enable-reincarnation  Special Rogue-like levels (default=yes)
+  --enable-kops           Keystone Kops (default=yes)
+  --enable-seduce         Succubi/incubi seduction (default=yes)
+  --enable-steed          Ability to ride monsters (default=yes)
+  --enable-tourist        Tourist class (default=yes)
+  --enable-redo           Redo last command (default=yes)
+  --enable-clipping       Allow smaller screens (default=yes)
+  --enable-elbereth       Engraving the E-word repels monsters (default=yes)
+  --enable-user-sounds    Allow user-defined mapping from messages to sounds)
+                          (default=no)
+  --enable-exp-on-botl    Show experience on bottom line (default=yes)
+  --enable-score-on-botl  Show score on bottom line (default=no)
+  --enable-goldobj        Gold is kept on object chains (experimental)
+                          (default=no)
+  --enable-autopickup-exceptions
+                          Exceptions to autopickup (experimental) (default=no)
+  --enable-wizmode=USER   enable wizard mode for the specified user
+                          (default=wizard)
+
+Optional Packages:
+  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
+  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
+  --with-compression=PROGRAM
+                          Set the program to compress data files
+                          (default=auto)
+  --with-owner=USER       Set the owner of installed files (default=games)
+  --with-group=GROUP      Set the group of installed files (default=bin)
+
+Some influential environment variables:
+  CC          C compiler
+  CHGRP       sets GAMEUID (set this to true as a no op)
+  CHOWN       sets GAMEGRP (set this to true as a no op)
+  CHMOD       sets file modes (set this to true as a no op)
+  ZLIB_CFLAGS Compiler flags to find zlib header files
+  ZLIB_LIBS   Linker flags to find zlib library files
+  CFLAGS      C compiler flags
+  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+              nonstandard directory <lib dir>
+  LIBS        libraries to pass to the linker, e.g. -l<library>
+  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
+              you have headers in a nonstandard directory <include dir>
+  LIBXAW_CFLAGS
+              Compiler flags for libXaw, overriding pkg-config
+  LIBXAW_LIBS Linker flags for libXaw, overriding pkg-config
+  PKG_CONFIG  path to pkg-config utility
+  YACC        The `Yet Another C Compiler' implementation to use. Defaults to
+              the first program found out of: `bison -y', `byacc', `yacc'.
+  YFLAGS      The list of arguments that will be passed by default to $YACC.
+              This script will default YFLAGS to the empty string to avoid a
+              default value of `-d' given by some make applications.
+  CPP         C preprocessor
+
+Use these variables to override the choices made by `configure' or to help
+it to find libraries and programs with nonstandard names/locations.
+
+Report bugs to <bhaak@gmx.net>.
+_ACEOF
+ac_status=$?
+fi
+
+if test "$ac_init_help" = "recursive"; then
+  # If there are subdirs, report their specific --help.
+  for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
+    test -d "$ac_dir" || continue
+    ac_builddir=.
+
+case "$ac_dir" in
+.) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
+*)
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A ".." for each directory in $ac_dir_suffix.
+  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
+  case $ac_top_builddir_sub in
+  "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
+  *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
+  esac ;;
+esac
+ac_abs_top_builddir=$ac_pwd
+ac_abs_builddir=$ac_pwd$ac_dir_suffix
+# for backward compatibility:
+ac_top_builddir=$ac_top_build_prefix
+
+case $srcdir in
+  .)  # We are building in place.
+    ac_srcdir=.
+    ac_top_srcdir=$ac_top_builddir_sub
+    ac_abs_top_srcdir=$ac_pwd ;;
+  [\\/]* | ?:[\\/]* )  # Absolute name.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir
+    ac_abs_top_srcdir=$srcdir ;;
+  *) # Relative name.
+    ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_build_prefix$srcdir
+    ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
+esac
+ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
+
+    cd "$ac_dir" || { ac_status=$?; continue; }
+    # Check for guested configure.
+    if test -f "$ac_srcdir/configure.gnu"; then
+      echo &&
+      $SHELL "$ac_srcdir/configure.gnu" --help=recursive
+    elif test -f "$ac_srcdir/configure"; then
+      echo &&
+      $SHELL "$ac_srcdir/configure" --help=recursive
+    else
+      echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+    fi || ac_status=$?
+    cd "$ac_pwd" || { ac_status=$?; break; }
+  done
+fi
+
+test -n "$ac_init_help" && exit $ac_status
+if $ac_init_version; then
+  cat <<\_ACEOF
+NETHACK configure 3.4.3
+generated by GNU Autoconf 2.61
+
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
+This configure script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it.
+_ACEOF
+  exit
+fi
+cat >config.log <<_ACEOF
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by NETHACK $as_me 3.4.3, which was
+generated by GNU Autoconf 2.61.  Invocation command line was
+
+  $ $0 $@
+
+_ACEOF
+exec 5>>config.log
+{
+cat <<_ASUNAME
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
+uname -m = `(uname -m) 2>/dev/null || echo unknown`
+uname -r = `(uname -r) 2>/dev/null || echo unknown`
+uname -s = `(uname -s) 2>/dev/null || echo unknown`
+uname -v = `(uname -v) 2>/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
+/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
+
+/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
+/usr/bin/hostinfo      = `(/usr/bin/hostinfo) 2>/dev/null      || echo unknown`
+/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
+/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+
+_ASUNAME
+
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  echo "PATH: $as_dir"
+done
+IFS=$as_save_IFS
+
+} >&5
+
+cat >&5 <<_ACEOF
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+_ACEOF
+
+
+# Keep a trace of the command line.
+# Strip out --no-create and --no-recursion so they do not pile up.
+# Strip out --silent because we don't want to record it for future runs.
+# Also quote any args containing shell meta-characters.
+# Make two passes to allow for proper duplicate-argument suppression.
+ac_configure_args=
+ac_configure_args0=
+ac_configure_args1=
+ac_must_keep_next=false
+for ac_pass in 1 2
+do
+  for ac_arg
+  do
+    case $ac_arg in
+    -no-create | --no-c* | -n | -no-recursion | --no-r*) continue ;;
+    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+    | -silent | --silent | --silen | --sile | --sil)
+      continue ;;
+    *\'*)
+      ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    esac
+    case $ac_pass in
+    1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
+    2)
+      ac_configure_args1="$ac_configure_args1 '$ac_arg'"
+      if test $ac_must_keep_next = true; then
+	ac_must_keep_next=false # Got value, back to normal.
+      else
+	case $ac_arg in
+	  *=* | --config-cache | -C | -disable-* | --disable-* \
+	  | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \
+	  | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \
+	  | -with-* | --with-* | -without-* | --without-* | --x)
+	    case "$ac_configure_args0 " in
+	      "$ac_configure_args1"*" '$ac_arg' "* ) continue ;;
+	    esac
+	    ;;
+	  -* ) ac_must_keep_next=true ;;
+	esac
+      fi
+      ac_configure_args="$ac_configure_args '$ac_arg'"
+      ;;
+    esac
+  done
+done
+$as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
+$as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
+
+# When interrupted or exit'd, cleanup temporary files, and complete
+# config.log.  We remove comments because anyway the quotes in there
+# would cause problems or look ugly.
+# WARNING: Use '\'' to represent an apostrophe within the trap.
+# WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
+trap 'exit_status=$?
+  # Save into config.log some information that might help in debugging.
+  {
+    echo
+
+    cat <<\_ASBOX
+## ---------------- ##
+## Cache variables. ##
+## ---------------- ##
+_ASBOX
+    echo
+    # The following way of writing the cache mishandles newlines in values,
+(
+  for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
+    eval ac_val=\$$ac_var
+    case $ac_val in #(
+    *${as_nl}*)
+      case $ac_var in #(
+      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
+echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+      esac
+      case $ac_var in #(
+      _ | IFS | as_nl) ;; #(
+      *) $as_unset $ac_var ;;
+      esac ;;
+    esac
+  done
+  (set) 2>&1 |
+    case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
+    *${as_nl}ac_space=\ *)
+      sed -n \
+	"s/'\''/'\''\\\\'\'''\''/g;
+	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
+      ;; #(
+    *)
+      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
+      ;;
+    esac |
+    sort
+)
+    echo
+
+    cat <<\_ASBOX
+## ----------------- ##
+## Output variables. ##
+## ----------------- ##
+_ASBOX
+    echo
+    for ac_var in $ac_subst_vars
+    do
+      eval ac_val=\$$ac_var
+      case $ac_val in
+      *\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+      esac
+      echo "$ac_var='\''$ac_val'\''"
+    done | sort
+    echo
+
+    if test -n "$ac_subst_files"; then
+      cat <<\_ASBOX
+## ------------------- ##
+## File substitutions. ##
+## ------------------- ##
+_ASBOX
+      echo
+      for ac_var in $ac_subst_files
+      do
+	eval ac_val=\$$ac_var
+	case $ac_val in
+	*\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+	esac
+	echo "$ac_var='\''$ac_val'\''"
+      done | sort
+      echo
+    fi
+
+    if test -s confdefs.h; then
+      cat <<\_ASBOX
+## ----------- ##
+## confdefs.h. ##
+## ----------- ##
+_ASBOX
+      echo
+      cat confdefs.h
+      echo
+    fi
+    test "$ac_signal" != 0 &&
+      echo "$as_me: caught signal $ac_signal"
+    echo "$as_me: exit $exit_status"
+  } >&5
+  rm -f core *.core core.conftest.* &&
+    rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
+    exit $exit_status
+' 0
+for ac_signal in 1 2 13 15; do
+  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+done
+ac_signal=0
+
+# confdefs.h avoids OS command line length limits that DEFS can exceed.
+rm -f -r conftest* confdefs.h
+
+# Predefined preprocessor variables.
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_NAME "$PACKAGE_NAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_VERSION "$PACKAGE_VERSION"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_STRING "$PACKAGE_STRING"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+_ACEOF
+
+
+# Let the site file select an alternate cache file if it wants to.
+# Prefer explicitly selected file to automatically selected ones.
+if test -n "$CONFIG_SITE"; then
+  set x "$CONFIG_SITE"
+elif test "x$prefix" != xNONE; then
+  set x "$prefix/share/config.site" "$prefix/etc/config.site"
+else
+  set x "$ac_default_prefix/share/config.site" \
+	"$ac_default_prefix/etc/config.site"
+fi
+shift
+for ac_site_file
+do
+  if test -r "$ac_site_file"; then
+    { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
+echo "$as_me: loading site script $ac_site_file" >&6;}
+    sed 's/^/| /' "$ac_site_file" >&5
+    . "$ac_site_file"
+  fi
+done
+
+if test -r "$cache_file"; then
+  # Some versions of bash will fail to source /dev/null (special
+  # files actually), so we avoid doing that.
+  if test -f "$cache_file"; then
+    { echo "$as_me:$LINENO: loading cache $cache_file" >&5
+echo "$as_me: loading cache $cache_file" >&6;}
+    case $cache_file in
+      [\\/]* | ?:[\\/]* ) . "$cache_file";;
+      *)                      . "./$cache_file";;
+    esac
+  fi
+else
+  { echo "$as_me:$LINENO: creating cache $cache_file" >&5
+echo "$as_me: creating cache $cache_file" >&6;}
+  >$cache_file
+fi
+
+# Check that the precious variables saved in the cache have kept the same
+# value.
+ac_cache_corrupted=false
+for ac_var in $ac_precious_vars; do
+  eval ac_old_set=\$ac_cv_env_${ac_var}_set
+  eval ac_new_set=\$ac_env_${ac_var}_set
+  eval ac_old_val=\$ac_cv_env_${ac_var}_value
+  eval ac_new_val=\$ac_env_${ac_var}_value
+  case $ac_old_set,$ac_new_set in
+    set,)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,set)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,);;
+    *)
+      if test "x$ac_old_val" != "x$ac_new_val"; then
+	{ echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
+echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+	{ echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
+echo "$as_me:   former value:  $ac_old_val" >&2;}
+	{ echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
+echo "$as_me:   current value: $ac_new_val" >&2;}
+	ac_cache_corrupted=:
+      fi;;
+  esac
+  # Pass precious variables to config.status.
+  if test "$ac_new_set" = set; then
+    case $ac_new_val in
+    *\'*) ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *) ac_arg=$ac_var=$ac_new_val ;;
+    esac
+    case " $ac_configure_args " in
+      *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
+    esac
+  fi
+done
+if $ac_cache_corrupted; then
+  { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
+echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+  { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+# $Revision: 1.10 $
+
+SRCDIR=../$srcdir/src
+
+ac_aux_dir=
+for ac_dir in sys/autoconf "$srcdir"/sys/autoconf; do
+  if test -f "$ac_dir/install-sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f "$ac_dir/install.sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f "$ac_dir/shtool"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
+done
+if test -z "$ac_aux_dir"; then
+  { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in sys/autoconf \"$srcdir\"/sys/autoconf" >&5
+echo "$as_me: error: cannot find install-sh or install.sh in sys/autoconf \"$srcdir\"/sys/autoconf" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+# These three variables are undocumented and unsupported,
+# and are intended to be withdrawn in a future Autoconf release.
+# They can cause serious problems if a builder's source tree is in a directory
+# whose full name contains unusual characters.
+ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
+ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
+ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
+
+
+
+
+
+
+
+
+
+
+{ echo "$as_me:$LINENO: checking whether ln -s works" >&5
+echo $ECHO_N "checking whether ln -s works... $ECHO_C" >&6; }
+LN_S=$as_ln_s
+if test "$LN_S" = "ln -s"; then
+  { echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no, using $LN_S" >&5
+echo "${ECHO_T}no, using $LN_S" >&6; }
+fi
+
+for ac_prog in gawk mawk nawk awk
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_AWK+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$AWK"; then
+  ac_cv_prog_AWK="$AWK" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_AWK="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+AWK=$ac_cv_prog_AWK
+if test -n "$AWK"; then
+  { echo "$as_me:$LINENO: result: $AWK" >&5
+echo "${ECHO_T}$AWK" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$AWK" && break
+done
+
+
+
+# NETHACK_WIN_ENABLE(proxy, auto)
+nethack_default_win=""
+# Note: Order is important: The last listed enabled port will be the default.
+# Check whether --enable-tty-graphics was given.
+if test "${enable_tty_graphics+set}" = set; then
+  enableval=$enable_tty_graphics; enable_tty_graphics="$enableval"
+else
+  enable_tty_graphics="auto"
+fi
+
+  if test "$enable_tty_graphics" != "no"; then
+    nethack_wins="tty $nethack_wins"
+  fi
+# Check whether --enable-x11-graphics was given.
+if test "${enable_x11_graphics+set}" = set; then
+  enableval=$enable_x11_graphics; enable_x11_graphics="$enableval"
+else
+  enable_x11_graphics="no"
+fi
+
+  if test "$enable_x11_graphics" != "no"; then
+    nethack_wins="x11 $nethack_wins"
+  fi
+# Check whether --enable-mswin-graphics was given.
+if test "${enable_mswin_graphics+set}" = set; then
+  enableval=$enable_mswin_graphics; enable_mswin_graphics="$enableval"
+else
+  enable_mswin_graphics="no"
+fi
+
+  if test "$enable_mswin_graphics" != "no"; then
+    nethack_wins="mswin $nethack_wins"
+  fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
+set dummy gcc; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_CC="gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+          if test -n "$ac_tool_prefix"; then
+    # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  fi
+fi
+if test -z "$CC"; then
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_prog_rejected=no
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+       ac_prog_rejected=yes
+       continue
+     fi
+    ac_cv_prog_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+if test $ac_prog_rejected = yes; then
+  # We found a bogon in the path, so make sure we never use it.
+  set dummy $ac_cv_prog_CC
+  shift
+  if test $# != 0; then
+    # We chose a different compiler from the bogus one.
+    # However, it has the same basename, so the bogon will be chosen
+    # first if we set CC to just the basename; use the full file name.
+    shift
+    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+  fi
+fi
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl.exe
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl.exe
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_CC="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$ac_ct_CC" && break
+done
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+fi
+
+fi
+
+
+test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&5
+echo "$as_me: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+# Provide some information about the compiler.
+echo "$as_me:$LINENO: checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (ac_try="$ac_compiler --version >&5"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compiler --version >&5") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (ac_try="$ac_compiler -v >&5"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compiler -v >&5") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (ac_try="$ac_compiler -V >&5"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compiler -V >&5") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files a.out a.exe b.out"
+# Try to create an executable without -o first, disregard a.out.
+# It will help us diagnose broken compilers, and finding out an intuition
+# of exeext.
+{ echo "$as_me:$LINENO: checking for C compiler default output file name" >&5
+echo $ECHO_N "checking for C compiler default output file name... $ECHO_C" >&6; }
+ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+#
+# List of possible output files, starting from the most likely.
+# The algorithm is not robust to junk in `.', hence go to wildcards (a.*)
+# only as a last resort.  b.out is created by i960 compilers.
+ac_files='a_out.exe a.exe conftest.exe a.out conftest a.* conftest.* b.out'
+#
+# The IRIX 6 linker writes into existing files which may not be
+# executable, retaining their permissions.  Remove them first so a
+# subsequent execution test works.
+ac_rmfiles=
+for ac_file in $ac_files
+do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
+    * ) ac_rmfiles="$ac_rmfiles $ac_file";;
+  esac
+done
+rm -f $ac_rmfiles
+
+if { (ac_try="$ac_link_default"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link_default") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
+# So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
+# in a Makefile.  We should not override ac_cv_exeext if it was cached,
+# so that the user can short-circuit this test for compilers unknown to
+# Autoconf.
+for ac_file in $ac_files ''
+do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj )
+	;;
+    [ab].out )
+	# We found the default executable, but exeext='' is most
+	# certainly right.
+	break;;
+    *.* )
+        if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+	then :; else
+	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	fi
+	# We set ac_cv_exeext here because the later test for it is not
+	# safe: cross compilers may not add the suffix if given an `-o'
+	# argument, so we may need to know it at that point already.
+	# Even if this section looks crufty: it has the advantage of
+	# actually working.
+	break;;
+    * )
+	break;;
+  esac
+done
+test "$ac_cv_exeext" = no && ac_cv_exeext=
+
+else
+  ac_file=''
+fi
+
+{ echo "$as_me:$LINENO: result: $ac_file" >&5
+echo "${ECHO_T}$ac_file" >&6; }
+if test -z "$ac_file"; then
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { echo "$as_me:$LINENO: error: C compiler cannot create executables
+See \`config.log' for more details." >&5
+echo "$as_me: error: C compiler cannot create executables
+See \`config.log' for more details." >&2;}
+   { (exit 77); exit 77; }; }
+fi
+
+ac_exeext=$ac_cv_exeext
+
+# Check that the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+{ echo "$as_me:$LINENO: checking whether the C compiler works" >&5
+echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6; }
+# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+# If not cross compiling, check that we can run a simple program.
+if test "$cross_compiling" != yes; then
+  if { ac_try='./$ac_file'
+  { (case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { echo "$as_me:$LINENO: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+  fi
+fi
+{ echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }
+
+rm -f a.out a.exe conftest$ac_cv_exeext b.out
+ac_clean_files=$ac_clean_files_save
+# Check that the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+{ echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
+echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: result: $cross_compiling" >&5
+echo "${ECHO_T}$cross_compiling" >&6; }
+
+{ echo "$as_me:$LINENO: checking for suffix of executables" >&5
+echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6; }
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # If both `conftest.exe' and `conftest' are `present' (well, observable)
+# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+# work properly (i.e., refer to `conftest.exe'), while it won't with
+# `rm'.
+for ac_file in conftest.exe conftest conftest.*; do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	  break;;
+    * ) break;;
+  esac
+done
+else
+  { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest$ac_cv_exeext
+{ echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
+echo "${ECHO_T}$ac_cv_exeext" >&6; }
+
+rm -f conftest.$ac_ext
+EXEEXT=$ac_cv_exeext
+ac_exeext=$EXEEXT
+{ echo "$as_me:$LINENO: checking for suffix of object files" >&5
+echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6; }
+if test "${ac_cv_objext+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.o conftest.obj
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  for ac_file in conftest.o conftest.obj conftest.*; do
+  test -f "$ac_file" || continue;
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf ) ;;
+    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+       break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot compute suffix of object files: cannot compile
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest.$ac_cv_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
+echo "${ECHO_T}$ac_cv_objext" >&6; }
+OBJEXT=$ac_cv_objext
+ac_objext=$OBJEXT
+{ echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6; }
+if test "${ac_cv_c_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_compiler_gnu=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6; }
+GCC=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+{ echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
+echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6; }
+if test "${ac_cv_prog_cc_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_save_c_werror_flag=$ac_c_werror_flag
+   ac_c_werror_flag=yes
+   ac_cv_prog_cc_g=no
+   CFLAGS="-g"
+   cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	CFLAGS=""
+      cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_c_werror_flag=$ac_save_c_werror_flag
+	 CFLAGS="-g"
+	 cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+   ac_c_werror_flag=$ac_save_c_werror_flag
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_g" >&6; }
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+{ echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
+echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
+if test "${ac_cv_prog_cc_c89+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_prog_cc_c89=no
+ac_save_CC=$CC
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdarg.h>
+#include <stdio.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+struct buf { int x; };
+FILE * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not '\xHH' hex character constants.
+   These don't provoke an error unfortunately, instead are silently treated
+   as 'x'.  The following induces an error, until -std is added to get
+   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
+   array size at least.  It's necessary to write '\x00'==0 to get something
+   that's true only with -std.  */
+int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+
+/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+   inside strings and character constants.  */
+#define FOO(x) 'x'
+int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+int argc;
+char **argv;
+int
+main ()
+{
+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+  ;
+  return 0;
+}
+_ACEOF
+for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
+	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+do
+  CC="$ac_save_CC $ac_arg"
+  rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_prog_cc_c89=$ac_arg
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext
+  test "x$ac_cv_prog_cc_c89" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+
+fi
+# AC_CACHE_VAL
+case "x$ac_cv_prog_cc_c89" in
+  x)
+    { echo "$as_me:$LINENO: result: none needed" >&5
+echo "${ECHO_T}none needed" >&6; } ;;
+  xno)
+    { echo "$as_me:$LINENO: result: unsupported" >&5
+echo "${ECHO_T}unsupported" >&6; } ;;
+  *)
+    CC="$CC $ac_cv_prog_cc_c89"
+    { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
+esac
+
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+
+# Make sure we can run config.sub.
+$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
+  { { echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
+echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
+   { (exit 1); exit 1; }; }
+
+{ echo "$as_me:$LINENO: checking build system type" >&5
+echo $ECHO_N "checking build system type... $ECHO_C" >&6; }
+if test "${ac_cv_build+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_build_alias=$build_alias
+test "x$ac_build_alias" = x &&
+  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
+test "x$ac_build_alias" = x &&
+  { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
+echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
+   { (exit 1); exit 1; }; }
+ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
+  { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
+echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_build" >&5
+echo "${ECHO_T}$ac_cv_build" >&6; }
+case $ac_cv_build in
+*-*-*) ;;
+*) { { echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
+echo "$as_me: error: invalid value of canonical build" >&2;}
+   { (exit 1); exit 1; }; };;
+esac
+build=$ac_cv_build
+ac_save_IFS=$IFS; IFS='-'
+set x $ac_cv_build
+shift
+build_cpu=$1
+build_vendor=$2
+shift; shift
+# Remember, the first character of IFS is used to create $*,
+# except with old shells:
+build_os=$*
+IFS=$ac_save_IFS
+case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
+
+
+{ echo "$as_me:$LINENO: checking host system type" >&5
+echo $ECHO_N "checking host system type... $ECHO_C" >&6; }
+if test "${ac_cv_host+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test "x$host_alias" = x; then
+  ac_cv_host=$ac_cv_build
+else
+  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
+    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
+echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_host" >&5
+echo "${ECHO_T}$ac_cv_host" >&6; }
+case $ac_cv_host in
+*-*-*) ;;
+*) { { echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
+echo "$as_me: error: invalid value of canonical host" >&2;}
+   { (exit 1); exit 1; }; };;
+esac
+host=$ac_cv_host
+ac_save_IFS=$IFS; IFS='-'
+set x $ac_cv_host
+shift
+host_cpu=$1
+host_vendor=$2
+shift; shift
+# Remember, the first character of IFS is used to create $*,
+# except with old shells:
+host_os=$*
+IFS=$ac_save_IFS
+case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
+
+
+
+
+if test "$enable_x11_graphics" != "no"; then
+    # We have to check for libXaw before we define SYSV,
+    # since the X11 include files change their behaviour
+    # depending on whether the compiler defines it or not.
+
+
+
+if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
+	if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
+set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_path_PKG_CONFIG+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  case $PKG_CONFIG in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+PKG_CONFIG=$ac_cv_path_PKG_CONFIG
+if test -n "$PKG_CONFIG"; then
+  { echo "$as_me:$LINENO: result: $PKG_CONFIG" >&5
+echo "${ECHO_T}$PKG_CONFIG" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_path_PKG_CONFIG"; then
+  ac_pt_PKG_CONFIG=$PKG_CONFIG
+  # Extract the first word of "pkg-config", so it can be a program name with args.
+set dummy pkg-config; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_path_ac_pt_PKG_CONFIG+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  case $ac_pt_PKG_CONFIG in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_ac_pt_PKG_CONFIG="$ac_pt_PKG_CONFIG" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_path_ac_pt_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+ac_pt_PKG_CONFIG=$ac_cv_path_ac_pt_PKG_CONFIG
+if test -n "$ac_pt_PKG_CONFIG"; then
+  { echo "$as_me:$LINENO: result: $ac_pt_PKG_CONFIG" >&5
+echo "${ECHO_T}$ac_pt_PKG_CONFIG" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+  if test "x$ac_pt_PKG_CONFIG" = x; then
+    PKG_CONFIG=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    PKG_CONFIG=$ac_pt_PKG_CONFIG
+  fi
+else
+  PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
+fi
+
+fi
+if test -n "$PKG_CONFIG"; then
+	_pkg_min_version=0.9.0
+	{ echo "$as_me:$LINENO: checking pkg-config is at least version $_pkg_min_version" >&5
+echo $ECHO_N "checking pkg-config is at least version $_pkg_min_version... $ECHO_C" >&6; }
+	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
+		{ echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }
+	else
+		{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+		PKG_CONFIG=""
+	fi
+
+fi
+
+
+
+    # If the user has supplied flags, then believe them.
+    if test -n "$LIBXAW_CFLAGS" -o -n "$LIBXAW_LIBS"; then
+
+    nethack__cflags="$NETHACK__LIBXAW_CFLAGS"
+    for nethack__flag in $LIBXAW_CFLAGS; do
+
+    case "$nethack__flag" in
+	-I*|-L*|-l*)
+	    for nethack__eflag in ${nethack__cflags}; do
+		if test "$nethack__eflag" = "$nethack__flag"; then
+		    break
+		fi
+	    done
+	    if test "$nethack__eflag" = "$nethack__flag"; then
+		nethack__cflags="${nethack__cflags}"
+	    else
+		case "$nethack__flag" in
+		    -L*)nethack__cflags="$nethack__flag ${nethack__cflags}";;
+		    *)  nethack__cflags="${nethack__cflags} $nethack__flag";;
+		esac
+	    fi
+	    ;;
+	*)  nethack__cflags="${nethack__cflags} $nethack__flag";;
+    esac
+
+    done
+
+
+    nethack__libs="$NETHACK__LIBXAW_LIBS"
+    for nethack__flag in $LIBXAW_LIBS; do
+
+    case "$nethack__flag" in
+	-I*|-L*|-l*)
+	    for nethack__eflag in ${nethack__libs}; do
+		if test "$nethack__eflag" = "$nethack__flag"; then
+		    break
+		fi
+	    done
+	    if test "$nethack__eflag" = "$nethack__flag"; then
+		nethack__libs="${nethack__libs}"
+	    else
+		case "$nethack__flag" in
+		    -L*)nethack__libs="$nethack__flag ${nethack__libs}";;
+		    *)  nethack__libs="${nethack__libs} $nethack__flag";;
+		esac
+	    fi
+	    ;;
+	*)  nethack__libs="${nethack__libs} $nethack__flag";;
+    esac
+
+    done
+
+
+    nethack__save_cflags=$CFLAGS
+    nethack__save_libs=$LIBS
+    CFLAGS="$CFLAGS $nethack__cflags"
+    LIBS="$LIBS $nethack__libs"
+    { echo "$as_me:$LINENO: checking if libXaw is useable with $CFLAGS and $LIBS" >&5
+echo $ECHO_N "checking if libXaw is useable with $CFLAGS and $LIBS... $ECHO_C" >&6; }
+    cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <X11/Xaw/List.h>
+int
+main ()
+{
+XawListUnhighlight((Widget)0);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  LIBXAW_CFLAGS="$nethack__cflags"; LIBXAW_LIBS="$nethack__libs"; { echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }; nethack__succeeded=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }; nethack__succeeded=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+    CFLAGS=$nethack__save_cflags
+    LIBS=$nethack__save_libs
+    else
+	nethack__succeeded=maybe
+    fi
+    if test $nethack__succeeded = maybe; then
+	if test -n "$PKG_CONFIG" && \
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"xaw8\"") >&5
+  ($PKG_CONFIG --exists --print-errors "xaw8") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  nethack__succeeded=yes
+fi
+    fi
+    if test $nethack__succeeded = maybe; then
+	if test -n "$PKG_CONFIG" && \
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"xaw7\"") >&5
+  ($PKG_CONFIG --exists --print-errors "xaw7") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  nethack__succeeded=yes
+fi
+    fi
+    if test $nethack__succeeded = maybe; then
+	if test -n "$PKG_CONFIG" && \
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"xaw6\"") >&5
+  ($PKG_CONFIG --exists --print-errors "xaw6") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  nethack__succeeded=yes
+fi
+    fi
+    if test $nethack__succeeded = yes; then
+
+    nethack__cflags="$NETHACK__LIBXAW_CFLAGS"
+    for nethack__flag in -I/usr/X11R6/include; do
+
+    case "$nethack__flag" in
+	-I*|-L*|-l*)
+	    for nethack__eflag in ${nethack__cflags}; do
+		if test "$nethack__eflag" = "$nethack__flag"; then
+		    break
+		fi
+	    done
+	    if test "$nethack__eflag" = "$nethack__flag"; then
+		nethack__cflags="${nethack__cflags}"
+	    else
+		case "$nethack__flag" in
+		    -L*)nethack__cflags="$nethack__flag ${nethack__cflags}";;
+		    *)  nethack__cflags="${nethack__cflags} $nethack__flag";;
+		esac
+	    fi
+	    ;;
+	*)  nethack__cflags="${nethack__cflags} $nethack__flag";;
+    esac
+
+    done
+
+
+    nethack__libs="$NETHACK__LIBXAW_LIBS"
+    for nethack__flag in -L/usr/X11R6/lib -lXaw -lXmu -lXext -lXt -lX11; do
+
+    case "$nethack__flag" in
+	-I*|-L*|-l*)
+	    for nethack__eflag in ${nethack__libs}; do
+		if test "$nethack__eflag" = "$nethack__flag"; then
+		    break
+		fi
+	    done
+	    if test "$nethack__eflag" = "$nethack__flag"; then
+		nethack__libs="${nethack__libs}"
+	    else
+		case "$nethack__flag" in
+		    -L*)nethack__libs="$nethack__flag ${nethack__libs}";;
+		    *)  nethack__libs="${nethack__libs} $nethack__flag";;
+		esac
+	    fi
+	    ;;
+	*)  nethack__libs="${nethack__libs} $nethack__flag";;
+    esac
+
+    done
+
+
+    nethack__save_cflags=$CFLAGS
+    nethack__save_libs=$LIBS
+    CFLAGS="$CFLAGS $nethack__cflags"
+    LIBS="$LIBS $nethack__libs"
+    { echo "$as_me:$LINENO: checking if libXaw is useable with $CFLAGS and $LIBS" >&5
+echo $ECHO_N "checking if libXaw is useable with $CFLAGS and $LIBS... $ECHO_C" >&6; }
+    cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <X11/Xaw/List.h>
+int
+main ()
+{
+XawListUnhighlight((Widget)0);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  LIBXAW_CFLAGS="$nethack__cflags"; LIBXAW_LIBS="$nethack__libs"; { echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }; nethack__succeeded=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }; nethack__succeeded=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+    CFLAGS=$nethack__save_cflags
+    LIBS=$nethack__save_libs
+    fi
+    if test $nethack__succeeded = yes; then
+	{ echo "$as_me:$LINENO: checking LIBXAW_CFLAGS" >&5
+echo $ECHO_N "checking LIBXAW_CFLAGS... $ECHO_C" >&6; }
+	{ echo "$as_me:$LINENO: result: ${LIBXAW_CFLAGS}" >&5
+echo "${ECHO_T}${LIBXAW_CFLAGS}" >&6; }
+
+	{ echo "$as_me:$LINENO: checking LIBXAW_LIBS" >&5
+echo $ECHO_N "checking LIBXAW_LIBS... $ECHO_C" >&6; }
+	{ echo "$as_me:$LINENO: result: ${LIBXAW_LIBS}" >&5
+echo "${ECHO_T}${LIBXAW_LIBS}" >&6; }
+
+	have_libXaw=yes
+    else have_libXaw=no
+    fi
+
+fi
+
+case $host_os in
+     mingw32 )
+cat >>confdefs.h <<\_ACEOF
+#define WIN32
+_ACEOF
+
+
+			HOST_UNIX=#
+
+			SYSTEM="Syswinnt"
+			SYSSRC="\${SYSMSWINSRC}"
+			SYSOBJ="\${SYSMSWINOBJ}"
+			;;
+     *bsd* )
+cat >>confdefs.h <<\_ACEOF
+#define BSD
+_ACEOF
+
+			HOST_MSWIN=#
+
+
+			SYSTEM="Sysunix"
+			SYSSRC="\${SYSUNIXSRC}"
+			SYSOBJ="\${SYSUNIXOBJ}"
+			;;
+     * )
+cat >>confdefs.h <<\_ACEOF
+#define SYSV
+_ACEOF
+
+			HOST_MSWIN=#
+
+
+			SYSTEM="Sysunix"
+			SYSSRC="\${SYSUNIXSRC}"
+			SYSOBJ="\${SYSUNIXOBJ}"
+			;;
+esac
+
+
+
+
+if test $host_os = mingw32; then
+    CFLAGS="$CFLAGS -mno-cygwin -isystem /usr/include/mingw"
+    LFLAGS="$LDFLAGS -mno-cygwin -L/usr/lib/mingw"
+
+    { echo "$as_me:$LINENO: checking for how to build NetHack key dynamic libraries" >&5
+echo $ECHO_N "checking for how to build NetHack key dynamic libraries... $ECHO_C" >&6; }
+    if test "$GCC" = yes; then
+	{ echo "$as_me:$LINENO: result: gcc" >&5
+echo "${ECHO_T}gcc" >&6; }
+
+    else
+	{ echo "$as_me:$LINENO: result: unknown" >&5
+echo "${ECHO_T}unknown" >&6; }
+	if test "$enable_tty_graphics" = yes; then
+	    { { echo "$as_me:$LINENO: error: Don't know how to build NetHack key DLLs with $CC" >&5
+echo "$as_me: error: Don't know how to build NetHack key DLLs with $CC" >&2;}
+   { (exit 1); exit 1; }; }
+	else
+	    { echo "$as_me:$LINENO: WARNING: Can't enable tty graphics (key dynamic libraries)" >&5
+echo "$as_me: WARNING: Can't enable tty graphics (key dynamic libraries)" >&2;}
+	    enable_tty_graphics="no"
+    nethack_wins=`echo $nethack_wins | sed 's/tty //'`
+
+	fi
+    fi
+fi
+
+case $host_os in
+     *cygwin* )
+cat >>confdefs.h <<\_ACEOF
+#define CYGWIN32
+_ACEOF
+;;
+     *linux* )
+cat >>confdefs.h <<\_ACEOF
+#define LINUX
+_ACEOF
+;;
+esac
+
+
+for ac_prog in flex lex
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_LEX+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$LEX"; then
+  ac_cv_prog_LEX="$LEX" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_LEX="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+LEX=$ac_cv_prog_LEX
+if test -n "$LEX"; then
+  { echo "$as_me:$LINENO: result: $LEX" >&5
+echo "${ECHO_T}$LEX" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$LEX" && break
+done
+test -n "$LEX" || LEX=":"
+
+if test "x$LEX" != "x:"; then
+  cat >conftest.l <<_ACEOF
+%%
+a { ECHO; }
+b { REJECT; }
+c { yymore (); }
+d { yyless (1); }
+e { yyless (input () != 0); }
+f { unput (yytext[0]); }
+. { BEGIN INITIAL; }
+%%
+#ifdef YYTEXT_POINTER
+extern char *yytext;
+#endif
+int
+main (void)
+{
+  return ! yylex () + ! yywrap ();
+}
+_ACEOF
+{ (ac_try="$LEX conftest.l"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$LEX conftest.l") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ echo "$as_me:$LINENO: checking lex output file root" >&5
+echo $ECHO_N "checking lex output file root... $ECHO_C" >&6; }
+if test "${ac_cv_prog_lex_root+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+if test -f lex.yy.c; then
+  ac_cv_prog_lex_root=lex.yy
+elif test -f lexyy.c; then
+  ac_cv_prog_lex_root=lexyy
+else
+  { { echo "$as_me:$LINENO: error: cannot find output from $LEX; giving up" >&5
+echo "$as_me: error: cannot find output from $LEX; giving up" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_prog_lex_root" >&5
+echo "${ECHO_T}$ac_cv_prog_lex_root" >&6; }
+LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root
+
+if test -z "${LEXLIB+set}"; then
+  { echo "$as_me:$LINENO: checking lex library" >&5
+echo $ECHO_N "checking lex library... $ECHO_C" >&6; }
+if test "${ac_cv_lib_lex+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+    ac_save_LIBS=$LIBS
+    ac_cv_lib_lex='none needed'
+    for ac_lib in '' -lfl -ll; do
+      LIBS="$ac_lib $ac_save_LIBS"
+      cat >conftest.$ac_ext <<_ACEOF
+`cat $LEX_OUTPUT_ROOT.c`
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_lex=$ac_lib
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+      test "$ac_cv_lib_lex" != 'none needed' && break
+    done
+    LIBS=$ac_save_LIBS
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_lex" >&5
+echo "${ECHO_T}$ac_cv_lib_lex" >&6; }
+  test "$ac_cv_lib_lex" != 'none needed' && LEXLIB=$ac_cv_lib_lex
+fi
+
+
+{ echo "$as_me:$LINENO: checking whether yytext is a pointer" >&5
+echo $ECHO_N "checking whether yytext is a pointer... $ECHO_C" >&6; }
+if test "${ac_cv_prog_lex_yytext_pointer+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  # POSIX says lex can declare yytext either as a pointer or an array; the
+# default is implementation-dependent.  Figure out which it is, since
+# not all implementations provide the %pointer and %array declarations.
+ac_cv_prog_lex_yytext_pointer=no
+ac_save_LIBS=$LIBS
+LIBS="$LEXLIB $ac_save_LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#define YYTEXT_POINTER 1
+`cat $LEX_OUTPUT_ROOT.c`
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_prog_lex_yytext_pointer=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_save_LIBS
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_prog_lex_yytext_pointer" >&5
+echo "${ECHO_T}$ac_cv_prog_lex_yytext_pointer" >&6; }
+if test $ac_cv_prog_lex_yytext_pointer = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define YYTEXT_POINTER 1
+_ACEOF
+
+fi
+rm -f conftest.l $LEX_OUTPUT_ROOT.c
+
+fi
+for ac_prog in 'bison -y' byacc
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_YACC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$YACC"; then
+  ac_cv_prog_YACC="$YACC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_YACC="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+YACC=$ac_cv_prog_YACC
+if test -n "$YACC"; then
+  { echo "$as_me:$LINENO: result: $YACC" >&5
+echo "${ECHO_T}$YACC" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$YACC" && break
+done
+test -n "$YACC" || YACC="yacc"
+
+if test -n "$ac_tool_prefix"; then
+  for ac_prog in chown true
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CHOWN+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CHOWN"; then
+  ac_cv_prog_CHOWN="$CHOWN" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CHOWN="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CHOWN=$ac_cv_prog_CHOWN
+if test -n "$CHOWN"; then
+  { echo "$as_me:$LINENO: result: $CHOWN" >&5
+echo "${ECHO_T}$CHOWN" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+    test -n "$CHOWN" && break
+  done
+fi
+if test -z "$CHOWN"; then
+  ac_ct_CHOWN=$CHOWN
+  for ac_prog in chown true
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_CHOWN+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CHOWN"; then
+  ac_cv_prog_ac_ct_CHOWN="$ac_ct_CHOWN" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_CHOWN="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CHOWN=$ac_cv_prog_ac_ct_CHOWN
+if test -n "$ac_ct_CHOWN"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_CHOWN" >&5
+echo "${ECHO_T}$ac_ct_CHOWN" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$ac_ct_CHOWN" && break
+done
+
+  if test "x$ac_ct_CHOWN" = x; then
+    CHOWN=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    CHOWN=$ac_ct_CHOWN
+  fi
+fi
+
+if test -n "$ac_tool_prefix"; then
+  for ac_prog in chgrp true
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CHGRP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CHGRP"; then
+  ac_cv_prog_CHGRP="$CHGRP" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CHGRP="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CHGRP=$ac_cv_prog_CHGRP
+if test -n "$CHGRP"; then
+  { echo "$as_me:$LINENO: result: $CHGRP" >&5
+echo "${ECHO_T}$CHGRP" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+    test -n "$CHGRP" && break
+  done
+fi
+if test -z "$CHGRP"; then
+  ac_ct_CHGRP=$CHGRP
+  for ac_prog in chgrp true
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_CHGRP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CHGRP"; then
+  ac_cv_prog_ac_ct_CHGRP="$ac_ct_CHGRP" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_CHGRP="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CHGRP=$ac_cv_prog_ac_ct_CHGRP
+if test -n "$ac_ct_CHGRP"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_CHGRP" >&5
+echo "${ECHO_T}$ac_ct_CHGRP" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$ac_ct_CHGRP" && break
+done
+
+  if test "x$ac_ct_CHGRP" = x; then
+    CHGRP=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    CHGRP=$ac_ct_CHGRP
+  fi
+fi
+
+if test -n "$ac_tool_prefix"; then
+  for ac_prog in chmod true
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_CHMOD+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CHMOD"; then
+  ac_cv_prog_CHMOD="$CHMOD" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_CHMOD="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+CHMOD=$ac_cv_prog_CHMOD
+if test -n "$CHMOD"; then
+  { echo "$as_me:$LINENO: result: $CHMOD" >&5
+echo "${ECHO_T}$CHMOD" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+    test -n "$CHMOD" && break
+  done
+fi
+if test -z "$CHMOD"; then
+  ac_ct_CHMOD=$CHMOD
+  for ac_prog in chmod true
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_CHMOD+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CHMOD"; then
+  ac_cv_prog_ac_ct_CHMOD="$ac_ct_CHMOD" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_CHMOD="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CHMOD=$ac_cv_prog_ac_ct_CHMOD
+if test -n "$ac_ct_CHMOD"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_CHMOD" >&5
+echo "${ECHO_T}$ac_ct_CHMOD" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$ac_ct_CHMOD" && break
+done
+
+  if test "x$ac_ct_CHMOD" = x; then
+    CHMOD=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    CHMOD=$ac_ct_CHMOD
+  fi
+fi
+
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}windres", so it can be a program name with args.
+set dummy ${ac_tool_prefix}windres; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_WINDRES+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$WINDRES"; then
+  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_WINDRES="${ac_tool_prefix}windres"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+WINDRES=$ac_cv_prog_WINDRES
+if test -n "$WINDRES"; then
+  { echo "$as_me:$LINENO: result: $WINDRES" >&5
+echo "${ECHO_T}$WINDRES" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_WINDRES"; then
+  ac_ct_WINDRES=$WINDRES
+  # Extract the first word of "windres", so it can be a program name with args.
+set dummy windres; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_ac_ct_WINDRES+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_WINDRES"; then
+  ac_cv_prog_ac_ct_WINDRES="$ac_ct_WINDRES" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_ac_ct_WINDRES="windres"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_WINDRES=$ac_cv_prog_ac_ct_WINDRES
+if test -n "$ac_ct_WINDRES"; then
+  { echo "$as_me:$LINENO: result: $ac_ct_WINDRES" >&5
+echo "${ECHO_T}$ac_ct_WINDRES" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+  if test "x$ac_ct_WINDRES" = x; then
+    WINDRES="no"
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&5
+echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
+whose name does not start with the host triplet.  If you think this
+configuration is useful to you, please write to autoconf@gnu.org." >&2;}
+ac_tool_warned=yes ;;
+esac
+    WINDRES=$ac_ct_WINDRES
+  fi
+else
+  WINDRES="$ac_cv_prog_WINDRES"
+fi
+
+
+
+# Check whether --with-compression was given.
+if test "${with_compression+set}" = set; then
+  withval=$with_compression;
+else
+  with_compression=auto
+fi
+
+    case $with_compression in
+	auto)
+	    for ac_prog in bzip2 gzip compress
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_path_COMPRESS+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  case $COMPRESS in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_COMPRESS="$COMPRESS" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_path_COMPRESS="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+COMPRESS=$ac_cv_path_COMPRESS
+if test -n "$COMPRESS"; then
+  { echo "$as_me:$LINENO: result: $COMPRESS" >&5
+echo "${ECHO_T}$COMPRESS" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+  test -n "$COMPRESS" && break
+done
+test -n "$COMPRESS" || COMPRESS=":"
+
+	    ;;
+	no)
+	    COMPRESS=":"
+	    ;;
+	*)
+	    set dummy $with_compression
+	    # Extract the first word of "$[2]", so it can be a program name with args.
+set dummy $2; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_path_COMPRESS+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  case $COMPRESS in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_COMPRESS="$COMPRESS" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_path_COMPRESS="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  test -z "$ac_cv_path_COMPRESS" && ac_cv_path_COMPRESS=":"
+  ;;
+esac
+fi
+COMPRESS=$ac_cv_path_COMPRESS
+if test -n "$COMPRESS"; then
+  { echo "$as_me:$LINENO: result: $COMPRESS" >&5
+echo "${ECHO_T}$COMPRESS" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+	    ;;
+    esac
+    { echo "$as_me:$LINENO: checking for compression support" >&5
+echo $ECHO_N "checking for compression support... $ECHO_C" >&6; }
+    if test "$with_compression" = "auto" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define COMPRESS "$COMPRESS"
+_ACEOF
+
+	COMPRESS_OPTIONS=""
+	if test "$COMPRESS" = ":"; then
+
+cat >>confdefs.h <<\_ACEOF
+#define INTERNAL_COMP 1
+_ACEOF
+
+	fi
+    elif test "$with_compression" = "no" ; then
+	COMPRESS=":"
+
+cat >>confdefs.h <<\_ACEOF
+#define INTERNAL_COMP 1
+_ACEOF
+
+    else
+
+cat >>confdefs.h <<_ACEOF
+#define COMPRESS "$COMPRESS"
+_ACEOF
+
+	set dummy $with_compression
+	shift
+	shift
+	if test -n "$1"; then
+
+cat >>confdefs.h <<_ACEOF
+#define COMPRESS_OPTIONS "$@"
+_ACEOF
+
+	fi
+	COMPRESS_OPTIONS="$@"
+    fi
+    if test "$COMPRESS" = ":"; then
+	{ echo "$as_me:$LINENO: result: internal" >&5
+echo "${ECHO_T}internal" >&6; }
+    else
+	{ echo "$as_me:$LINENO: result: $COMPRESS $COMPRESS_OPTIONS" >&5
+echo "${ECHO_T}$COMPRESS $COMPRESS_OPTIONS" >&6; }
+
+    { echo "$as_me:$LINENO: checking for suffix of compressed files" >&5
+echo $ECHO_N "checking for suffix of compressed files... $ECHO_C" >&6; }
+    rm -f conftest conftest.*
+    echo "Test" > conftest
+    nethack__extension=""
+
+    if { ac_try='$COMPRESS $COMPRESS_OPTIONS conftest'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+	for nethack__file in \
+	  `(ls conftest.bz2 conftest.gz conftest.Z conftest.*) 2>/dev/null`; do
+	    case $nethack__file in
+		*)  nethack__extension=`expr "$nethack__file" : '.*\(\..*\)'`
+		    break
+		    ;;
+	    esac
+	done
+	if test -z "$nethack__extension"; then
+	    { { echo "$as_me:$LINENO: error: test failed: cannot find compressed output
+See \`config.log' for more details." >&5
+echo "$as_me: error: test failed: cannot find compressed output
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+	fi
+	rm -f conftest conftest.*
+
+cat >>confdefs.h <<_ACEOF
+#define COMPRESS_EXTENSION "$nethack__extension"
+_ACEOF
+
+	{ echo "$as_me:$LINENO: result: $nethack__extension" >&5
+echo "${ECHO_T}$nethack__extension" >&6; }
+
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+    ( exit $ac_status )
+	    { { echo "$as_me:$LINENO: error: test failed: cannot compress
+See \`config.log' for more details." >&5
+echo "$as_me: error: test failed: cannot compress
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+
+    fi
+
+
+
+
+WINSRC=
+WINOBJ=
+WINLIB=
+CNF_SHARE_DATND=
+
+OPTIONS_FILE=
+OPTIONS_FILES=
+
+WINTTYLIB=
+if test "$enable_tty_graphics" != "no"; then
+    if test $host_os = mingw32; then
+	EXTRA_UNSHARE="nhdefkey.dll nh340key.dll nhraykey.dll"
+
+	CFLAGS="$CFLAGS -DWIN32CON"
+	WINTTYLIB=""
+	WINSRC="${WINSRC} \$(WINTTYSRC)"
+	WINOBJ="${WINOBJ} \$(WINTTYOBJ)"
+	WINLIB="${WINLIB} \$(WINTTYLIB)"
+
+cat >>confdefs.h <<\_ACEOF
+#define TTY_GRAPHICS
+_ACEOF
+
+    else
+	# For TTY, determine the termlib
+	# Check for termlib before termcap because Solaris termcap needs libucb.
+	TERMLIB_VARIANTS="ncurses curses termlib termcap terminfo"
+	for termlib in ${TERMLIB_VARIANTS}; do
+	    as_ac_Lib=`echo "ac_cv_lib_${termlib}''_tgetent" | $as_tr_sh`
+{ echo "$as_me:$LINENO: checking for tgetent in -l${termlib}" >&5
+echo $ECHO_N "checking for tgetent in -l${termlib}... $ECHO_C" >&6; }
+if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-l${termlib}  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char tgetent ();
+int
+main ()
+{
+return tgetent ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  eval "$as_ac_Lib=yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	eval "$as_ac_Lib=no"
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+ac_res=`eval echo '${'$as_ac_Lib'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+if test `eval echo '${'$as_ac_Lib'}'` = yes; then
+  WINTTYLIB="-l${termlib}"
+	      WINSRC="${WINSRC} \$(WINTTYSRC)"
+	      WINOBJ="${WINOBJ} \$(WINTTYOBJ)"
+	      WINLIB="${WINLIB} \$(WINTTYLIB)"
+
+cat >>confdefs.h <<\_ACEOF
+#define TTY_GRAPHICS
+_ACEOF
+
+	      break
+fi
+
+	done
+	if test -z "$termlib"; then
+	    if test "$enable_tty_graphics" = yes; then
+		{ { echo "$as_me:$LINENO: error: Can't find tgetent (needed for tty graphics)" >&5
+echo "$as_me: error: Can't find tgetent (needed for tty graphics)" >&2;}
+   { (exit 1); exit 1; }; }
+	    else
+		{ echo "$as_me:$LINENO: WARNING: Can't enable tty graphics (no tgetent)" >&5
+echo "$as_me: WARNING: Can't enable tty graphics (no tgetent)" >&2;}
+		enable_tty_graphics="no"
+    nethack_wins=`echo $nethack_wins | sed 's/tty //'`
+
+	    fi
+	fi
+		ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+{ echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
+echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6; }
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+  if test "${ac_cv_prog_CPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+      # Double quotes because CPP needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+  # <limits.h> exists even on freestanding compilers.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+		     Syntax error
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Broken: fails on valid input.
+continue
+fi
+
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
+else
+  ac_cv_prog_CPP=$CPP
+fi
+{ echo "$as_me:$LINENO: result: $CPP" >&5
+echo "${ECHO_T}$CPP" >&6; }
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+  # <limits.h> exists even on freestanding compilers.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+		     Syntax error
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Broken: fails on valid input.
+continue
+fi
+
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
+else
+  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." >&5
+echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+{ echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
+echo $ECHO_N "checking for grep that handles long lines and -e... $ECHO_C" >&6; }
+if test "${ac_cv_path_GREP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  # Extract the first word of "grep ggrep" to use in msg output
+if test -z "$GREP"; then
+set dummy grep ggrep; ac_prog_name=$2
+if test "${ac_cv_path_GREP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_path_GREP_found=false
+# Loop through the user's path and test for each of PROGNAME-LIST
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_prog in grep ggrep; do
+  for ac_exec_ext in '' $ac_executable_extensions; do
+    ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
+    { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
+    # Check for GNU ac_path_GREP and select it if it is found.
+  # Check for GNU $ac_path_GREP
+case `"$ac_path_GREP" --version 2>&1` in
+*GNU*)
+  ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
+*)
+  ac_count=0
+  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
+  while :
+  do
+    cat "conftest.in" "conftest.in" >"conftest.tmp"
+    mv "conftest.tmp" "conftest.in"
+    cp "conftest.in" "conftest.nl"
+    echo 'GREP' >> "conftest.nl"
+    "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+    diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+    ac_count=`expr $ac_count + 1`
+    if test $ac_count -gt ${ac_path_GREP_max-0}; then
+      # Best one so far, save it but keep looking for a better one
+      ac_cv_path_GREP="$ac_path_GREP"
+      ac_path_GREP_max=$ac_count
+    fi
+    # 10*(2^10) chars as input seems more than enough
+    test $ac_count -gt 10 && break
+  done
+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
+esac
+
+
+    $ac_path_GREP_found && break 3
+  done
+done
+
+done
+IFS=$as_save_IFS
+
+
+fi
+
+GREP="$ac_cv_path_GREP"
+if test -z "$GREP"; then
+  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+else
+  ac_cv_path_GREP=$GREP
+fi
+
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
+echo "${ECHO_T}$ac_cv_path_GREP" >&6; }
+ GREP="$ac_cv_path_GREP"
+
+
+{ echo "$as_me:$LINENO: checking for egrep" >&5
+echo $ECHO_N "checking for egrep... $ECHO_C" >&6; }
+if test "${ac_cv_path_EGREP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
+   then ac_cv_path_EGREP="$GREP -E"
+   else
+     # Extract the first word of "egrep" to use in msg output
+if test -z "$EGREP"; then
+set dummy egrep; ac_prog_name=$2
+if test "${ac_cv_path_EGREP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_path_EGREP_found=false
+# Loop through the user's path and test for each of PROGNAME-LIST
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_prog in egrep; do
+  for ac_exec_ext in '' $ac_executable_extensions; do
+    ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
+    { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
+    # Check for GNU ac_path_EGREP and select it if it is found.
+  # Check for GNU $ac_path_EGREP
+case `"$ac_path_EGREP" --version 2>&1` in
+*GNU*)
+  ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
+*)
+  ac_count=0
+  echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
+  while :
+  do
+    cat "conftest.in" "conftest.in" >"conftest.tmp"
+    mv "conftest.tmp" "conftest.in"
+    cp "conftest.in" "conftest.nl"
+    echo 'EGREP' >> "conftest.nl"
+    "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+    diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+    ac_count=`expr $ac_count + 1`
+    if test $ac_count -gt ${ac_path_EGREP_max-0}; then
+      # Best one so far, save it but keep looking for a better one
+      ac_cv_path_EGREP="$ac_path_EGREP"
+      ac_path_EGREP_max=$ac_count
+    fi
+    # 10*(2^10) chars as input seems more than enough
+    test $ac_count -gt 10 && break
+  done
+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
+esac
+
+
+    $ac_path_EGREP_found && break 3
+  done
+done
+
+done
+IFS=$as_save_IFS
+
+
+fi
+
+EGREP="$ac_cv_path_EGREP"
+if test -z "$EGREP"; then
+  { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+else
+  ac_cv_path_EGREP=$EGREP
+fi
+
+
+   fi
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
+echo "${ECHO_T}$ac_cv_path_EGREP" >&6; }
+ EGREP="$ac_cv_path_EGREP"
+
+
+{ echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_header_stdc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_header_stdc=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "memchr" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "free" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+  if test "$cross_compiling" = yes; then
+  :
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ctype.h>
+#include <stdlib.h>
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) \
+		   (('a' <= (c) && (c) <= 'i') \
+		     || ('j' <= (c) && (c) <= 'r') \
+		     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
+
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+	|| toupper (i) != TOUPPER (i))
+      return 2;
+  return 0;
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+( exit $ac_status )
+ac_cv_header_stdc=no
+fi
+rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+
+
+fi
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
+if test $ac_cv_header_stdc = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define STDC_HEADERS 1
+_ACEOF
+
+fi
+
+# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+
+
+
+
+
+
+
+
+
+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+		  inttypes.h stdint.h unistd.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  eval "$as_ac_Header=yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	eval "$as_ac_Header=no"
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+
+for ac_header in curses.h termcap.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    ( cat <<\_ASBOX
+## ---------------------------- ##
+## Report this to bhaak@gmx.net ##
+## ---------------------------- ##
+_ASBOX
+     ) | sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+	{ echo "$as_me:$LINENO: checking for tparm in -lcurses" >&5
+echo $ECHO_N "checking for tparm in -lcurses... $ECHO_C" >&6; }
+if test "${ac_cv_lib_curses_tparm+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lcurses  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char tparm ();
+int
+main ()
+{
+return tparm ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_curses_tparm=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_lib_curses_tparm=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_curses_tparm" >&5
+echo "${ECHO_T}$ac_cv_lib_curses_tparm" >&6; }
+if test $ac_cv_lib_curses_tparm = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_TPARM 1
+_ACEOF
+
+fi
+
+
+    fi
+
+    OPTIONS_FILE="options"
+    OPTIONS_FILES="options"
+fi
+if test "$enable_tty_graphics" = "no" -a $host_os = mingw32; then
+    LFLAGS="$LFLAGS -mwindows"
+fi
+
+
+
+if test "$enable_x11_graphics" != "no"; then
+    if test $have_libXaw != yes; then
+      { { echo "$as_me:$LINENO: error: Need X Athena Widgets Library for X11 graphics" >&5
+echo "$as_me: error: Need X Athena Widgets Library for X11 graphics" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+    CFLAGS="${CFLAGS} ${LIBXAW_CFLAGS}"
+    WINSRC="${WINSRC} \$(WINX11SRC)"
+    WINOBJ="${WINOBJ} \$(WINX11OBJ)"
+    WINLIB="${WINLIB} ${LIBXAW_LIBS}"
+    CNF_SHARE_DATND="${CNF_SHARE_DATND} \$(CNF_SHARE_X11ND)"
+
+cat >>confdefs.h <<\_ACEOF
+#define X11_GRAPHICS
+_ACEOF
+
+
+    OPTIONS_FILE="options"
+    OPTIONS_FILES="options"
+fi
+
+if test "$enable_mswin_graphics" != "no"; then
+    { echo "$as_me:$LINENO: checking host system type" >&5
+echo $ECHO_N "checking host system type... $ECHO_C" >&6; }
+if test "${ac_cv_host+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test "x$host_alias" = x; then
+  ac_cv_host=$ac_cv_build
+else
+  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
+    { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
+echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_host" >&5
+echo "${ECHO_T}$ac_cv_host" >&6; }
+case $ac_cv_host in
+*-*-*) ;;
+*) { { echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
+echo "$as_me: error: invalid value of canonical host" >&2;}
+   { (exit 1); exit 1; }; };;
+esac
+host=$ac_cv_host
+ac_save_IFS=$IFS; IFS='-'
+set x $ac_cv_host
+shift
+host_cpu=$1
+host_vendor=$2
+shift; shift
+# Remember, the first character of IFS is used to create $*,
+# except with old shells:
+host_os=$*
+IFS=$ac_save_IFS
+case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
+
+
+case $host_os in
+  *mingw32* ) MINGW32=yes;;
+	  * ) MINGW32=no;;
+esac
+
+
+    if test "$WINDRES" = "no"; then
+	{ { echo "$as_me:$LINENO: error: Need windres for Microsoft Window's native graphics" >&5
+echo "$as_me: error: Need windres for Microsoft Window's native graphics" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+    WINSRC="${WINSRC} \$(WINMSSRC)"
+    WINOBJ="${WINOBJ} \$(WINMSOBJ)"
+    WINLIB="${WINLIB} \$(WINMSLIB)"
+    CNF_SHARE_DATND="${CNF_SHARE_DATND} \$(CNF_SHARE_MSND)"
+
+cat >>confdefs.h <<\_ACEOF
+#define MSWIN_GRAPHICS
+_ACEOF
+
+
+    OPTIONS_FILE="guioptions"
+    OPTIONS_FILES="$OPTIONS_FILES guioptions"
+fi
+
+
+
+
+
+
+
+
+{ echo "$as_me:$LINENO: checking for valid window system configuration" >&5
+echo $ECHO_N "checking for valid window system configuration... $ECHO_C" >&6; }
+if test -n "$nethack_wins"; then
+    { echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }
+    for win in $nethack_wins; do
+
+cat >>confdefs.h <<_ACEOF
+#define DEFAULT_WINDOW_SYS "$win"
+_ACEOF
+
+	break
+    done
+else
+    { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+    { { echo "$as_me:$LINENO: error: need to enable at least one window system" >&5
+echo "$as_me: error: need to enable at least one window system" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+
+{ echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_header_stdc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_header_stdc=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "memchr" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "free" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+  if test "$cross_compiling" = yes; then
+  :
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ctype.h>
+#include <stdlib.h>
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) \
+		   (('a' <= (c) && (c) <= 'i') \
+		     || ('j' <= (c) && (c) <= 'r') \
+		     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
+
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+	|| toupper (i) != TOUPPER (i))
+      return 2;
+  return 0;
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+( exit $ac_status )
+ac_cv_header_stdc=no
+fi
+rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+
+
+fi
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
+if test $ac_cv_header_stdc = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define STDC_HEADERS 1
+_ACEOF
+
+fi
+
+# Due to what may be a bug in autoconf, we have to call AC_CHECK_HEADERS()
+# to get the various HAVE_xxx_H preprocessor variables detected by
+# AC_HEADER_STDC active. These are needed for AC_CHECK_DECLS(), below.
+
+for ac_header in string.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    ( cat <<\_ASBOX
+## ---------------------------- ##
+## Report this to bhaak@gmx.net ##
+## ---------------------------- ##
+_ASBOX
+     ) | sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+{ echo "$as_me:$LINENO: checking for regex.h" >&5
+echo $ECHO_N "checking for regex.h... $ECHO_C" >&6; }
+if test "${ac_cv_header_regex_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* TEST_REGEX */
+
+#include <regex.h>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_header_regex_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_header_regex_h=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_header_regex_h" >&5
+echo "${ECHO_T}$ac_cv_header_regex_h" >&6; }
+if test $ac_cv_header_regex_h = yes; then
+  have_regex_h=yes
+else
+  have_regex_h=no
+fi
+
+
+
+if test "$have_regex_h" = "yes"; then
+  { echo "$as_me:$LINENO: checking for struct re_pattern_buffer" >&5
+echo $ECHO_N "checking for struct re_pattern_buffer... $ECHO_C" >&6; }
+if test "${ac_cv_type_struct_re_pattern_buffer+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+	#include <regex.h>
+
+
+typedef struct re_pattern_buffer ac__type_new_;
+int
+main ()
+{
+if ((ac__type_new_ *) 0)
+  return 0;
+if (sizeof (ac__type_new_))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_type_struct_re_pattern_buffer=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_type_struct_re_pattern_buffer=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_type_struct_re_pattern_buffer" >&5
+echo "${ECHO_T}$ac_cv_type_struct_re_pattern_buffer" >&6; }
+if test $ac_cv_type_struct_re_pattern_buffer = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define MENU_COLOR_REGEX
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define MENU_COLOR_REGEX_GNU
+_ACEOF
+
+
+else
+  { echo "$as_me:$LINENO: checking for regex_t" >&5
+echo $ECHO_N "checking for regex_t... $ECHO_C" >&6; }
+if test "${ac_cv_type_regex_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+	#include <regex.h>
+
+
+typedef regex_t ac__type_new_;
+int
+main ()
+{
+if ((ac__type_new_ *) 0)
+  return 0;
+if (sizeof (ac__type_new_))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_type_regex_t=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_type_regex_t=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_type_regex_t" >&5
+echo "${ECHO_T}$ac_cv_type_regex_t" >&6; }
+if test $ac_cv_type_regex_t = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define MENU_COLOR_REGEX
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define MENU_COLOR_REGEX_POSIX
+_ACEOF
+
+
+fi
+
+
+fi
+
+fi
+{ echo "$as_me:$LINENO: checking for void" >&5
+echo $ECHO_N "checking for void... $ECHO_C" >&6; }
+if test "${ac_cv_type_void+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+typedef void ac__type_new_;
+int
+main ()
+{
+if ((ac__type_new_ *) 0)
+  return 0;
+if (sizeof (ac__type_new_))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_type_void=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_type_void=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_type_void" >&5
+echo "${ECHO_T}$ac_cv_type_void" >&6; }
+if test $ac_cv_type_void = yes; then
+  :
+else
+
+cat >>confdefs.h <<\_ACEOF
+#define NOVOID
+_ACEOF
+
+fi
+
+
+
+{ echo "$as_me:$LINENO: checking whether strncmpi is declared" >&5
+echo $ECHO_N "checking whether strncmpi is declared... $ECHO_C" >&6; }
+if test "${ac_cv_have_decl_strncmpi+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+int
+main ()
+{
+#ifndef strncmpi
+  (void) strncmpi;
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_have_decl_strncmpi=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_have_decl_strncmpi=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_have_decl_strncmpi" >&5
+echo "${ECHO_T}$ac_cv_have_decl_strncmpi" >&6; }
+if test $ac_cv_have_decl_strncmpi = yes; then
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL_STRNCMPI 1
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define STRNCMPI
+_ACEOF
+
+else
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL_STRNCMPI 0
+_ACEOF
+
+
+fi
+{ echo "$as_me:$LINENO: checking whether strnicmp is declared" >&5
+echo $ECHO_N "checking whether strnicmp is declared... $ECHO_C" >&6; }
+if test "${ac_cv_have_decl_strnicmp+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+int
+main ()
+{
+#ifndef strnicmp
+  (void) strnicmp;
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_have_decl_strnicmp=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_have_decl_strnicmp=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_have_decl_strnicmp" >&5
+echo "${ECHO_T}$ac_cv_have_decl_strnicmp" >&6; }
+if test $ac_cv_have_decl_strnicmp = yes; then
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL_STRNICMP 1
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define STRNCMPI
+_ACEOF
+
+else
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_DECL_STRNICMP 0
+_ACEOF
+
+
+fi
+
+
+
+{ echo "$as_me:$LINENO: checking for msleep" >&5
+echo $ECHO_N "checking for msleep... $ECHO_C" >&6; }
+if test "${ac_cv_func_msleep+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* Define msleep to an innocuous variant, in case <limits.h> declares msleep.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define msleep innocuous_msleep
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char msleep (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef msleep
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char msleep ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined __stub_msleep || defined __stub___msleep
+choke me
+#endif
+
+int
+main ()
+{
+return msleep ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_func_msleep=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_func_msleep=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_func_msleep" >&5
+echo "${ECHO_T}$ac_cv_func_msleep" >&6; }
+if test $ac_cv_func_msleep = yes; then
+  cf_result=yes
+else
+  cf_result=no
+fi
+
+if test "$cf_result" = no; then
+	{ echo "$as_me:$LINENO: checking for usleep" >&5
+echo $ECHO_N "checking for usleep... $ECHO_C" >&6; }
+if test "${ac_cv_func_usleep+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* Define usleep to an innocuous variant, in case <limits.h> declares usleep.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define usleep innocuous_usleep
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char usleep (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef usleep
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char usleep ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined __stub_usleep || defined __stub___usleep
+choke me
+#endif
+
+int
+main ()
+{
+return usleep ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_func_usleep=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_func_usleep=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_func_usleep" >&5
+echo "${ECHO_T}$ac_cv_func_usleep" >&6; }
+if test $ac_cv_func_usleep = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define TIMED_DELAY
+_ACEOF
+
+fi
+
+else
+
+cat >>confdefs.h <<\_ACEOF
+#define TIMED_DELAY
+_ACEOF
+
+fi
+
+# Extract the first word of "nroff", so it can be a program name with args.
+set dummy nroff; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_HAVE_NROFF+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$HAVE_NROFF"; then
+  ac_cv_prog_HAVE_NROFF="$HAVE_NROFF" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_HAVE_NROFF=""yes""
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  test -z "$ac_cv_prog_HAVE_NROFF" && ac_cv_prog_HAVE_NROFF=""no""
+fi
+fi
+HAVE_NROFF=$ac_cv_prog_HAVE_NROFF
+if test -n "$HAVE_NROFF"; then
+  { echo "$as_me:$LINENO: result: $HAVE_NROFF" >&5
+echo "${ECHO_T}$HAVE_NROFF" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+# Extract the first word of "tbl", so it can be a program name with args.
+set dummy tbl; ac_word=$2
+{ echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
+if test "${ac_cv_prog_HAVE_TBL+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$HAVE_TBL"; then
+  ac_cv_prog_HAVE_TBL="$HAVE_TBL" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_prog_HAVE_TBL=""yes""
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  test -z "$ac_cv_prog_HAVE_TBL" && ac_cv_prog_HAVE_TBL=""no""
+fi
+fi
+HAVE_TBL=$ac_cv_prog_HAVE_TBL
+if test -n "$HAVE_TBL"; then
+  { echo "$as_me:$LINENO: result: $HAVE_TBL" >&5
+echo "${ECHO_T}$HAVE_TBL" >&6; }
+else
+  { echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+
+if test "$HAVE_NROFF" != "no" ; then
+if test "$HAVE_TBL" != "no" ; then
+	GUIDEBOOK=Guidebook
+
+	GUIDEBOOK_TXT=Guidebook.txt
+
+fi
+fi
+
+
+# We use auto for data librarian to avoid breaking the rule that autoconf
+# should use the same defaults as the manual configuration, but all platforms
+# that support autoconf also support DLB, so the automatic choice is always yes.
+{ echo "$as_me:$LINENO: checking whether to enable data-librarian" >&5
+echo $ECHO_N "checking whether to enable data-librarian... $ECHO_C" >&6; }
+   # Check whether --enable-data-librarian was given.
+if test "${enable_data_librarian+set}" = set; then
+  enableval=$enable_data_librarian;
+else
+  enable_data_librarian=yes
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_data_librarian" >&5
+echo "${ECHO_T}$enable_data_librarian" >&6; }
+   if test "$enable_data_librarian" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define DLB
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable sinks" >&5
+echo $ECHO_N "checking whether to enable sinks... $ECHO_C" >&6; }
+   # Check whether --enable-sinks was given.
+if test "${enable_sinks+set}" = set; then
+  enableval=$enable_sinks;
+else
+  enable_sinks="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_sinks" >&5
+echo "${ECHO_T}$enable_sinks" >&6; }
+   if test "$enable_sinks" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define SINKS
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(light-src-spell,[Spells are light sources],LIGHT_SRC_SPELL,yes)
+{ echo "$as_me:$LINENO: checking whether to enable wallified-maze" >&5
+echo $ECHO_N "checking whether to enable wallified-maze... $ECHO_C" >&6; }
+   # Check whether --enable-wallified-maze was given.
+if test "${enable_wallified_maze+set}" = set; then
+  enableval=$enable_wallified_maze;
+else
+  enable_wallified_maze="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_wallified_maze" >&5
+echo "${ECHO_T}$enable_wallified_maze" >&6; }
+   if test "$enable_wallified_maze" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define WALLIFIED_MAZE
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable reincarnation" >&5
+echo $ECHO_N "checking whether to enable reincarnation... $ECHO_C" >&6; }
+   # Check whether --enable-reincarnation was given.
+if test "${enable_reincarnation+set}" = set; then
+  enableval=$enable_reincarnation;
+else
+  enable_reincarnation="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_reincarnation" >&5
+echo "${ECHO_T}$enable_reincarnation" >&6; }
+   if test "$enable_reincarnation" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define REINCARNATION
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(blackmarket,[Blackmarket],BLACKMARKET,yes)
+{ echo "$as_me:$LINENO: checking whether to enable kops" >&5
+echo $ECHO_N "checking whether to enable kops... $ECHO_C" >&6; }
+   # Check whether --enable-kops was given.
+if test "${enable_kops+set}" = set; then
+  enableval=$enable_kops;
+else
+  enable_kops="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_kops" >&5
+echo "${ECHO_T}$enable_kops" >&6; }
+   if test "$enable_kops" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define KOPS
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable seduce" >&5
+echo $ECHO_N "checking whether to enable seduce... $ECHO_C" >&6; }
+   # Check whether --enable-seduce was given.
+if test "${enable_seduce+set}" = set; then
+  enableval=$enable_seduce;
+else
+  enable_seduce="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_seduce" >&5
+echo "${ECHO_T}$enable_seduce" >&6; }
+   if test "$enable_seduce" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define SEDUCE
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(invisible-objects,[Invisible objects],INVISIBLE_OBJECTS,yes)
+# NETHACK_ARG(unpolypile,[Object unpolymorphing],UNPOLYPILE,yes)
+# NETHACK_ARG(wallet-o-p,[Perseus' Wallet],WALLET_O_P,yes)
+# NETHACK_ARG(lightsabers,[Lightsabers],LIGHTSABERS,yes)
+# NETHACK_ARG(d-saber,[Dimsabers],LIGHTSABERS,yes)
+# NETHACK_ARG(p-spoon,[Spoon],P_SPOON,yes)
+# NETHACK_ARG(firearms,[Guns and Bullets],FIREARMS,yes)
+# NETHACK_ARG(eaten-memory,[Remember which monsters have been eaten],
+#  EATEN_MEMORY,yes)
+{ echo "$as_me:$LINENO: checking whether to enable steed" >&5
+echo $ECHO_N "checking whether to enable steed... $ECHO_C" >&6; }
+   # Check whether --enable-steed was given.
+if test "${enable_steed+set}" = set; then
+  enableval=$enable_steed;
+else
+  enable_steed="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_steed" >&5
+echo "${ECHO_T}$enable_steed" >&6; }
+   if test "$enable_steed" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define STEED
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(dwarf,[Dwarf race],DWARF,yes)
+{ echo "$as_me:$LINENO: checking whether to enable tourist" >&5
+echo $ECHO_N "checking whether to enable tourist... $ECHO_C" >&6; }
+   # Check whether --enable-tourist was given.
+if test "${enable_tourist+set}" = set; then
+  enableval=$enable_tourist;
+else
+  enable_tourist="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_tourist" >&5
+echo "${ECHO_T}$enable_tourist" >&6; }
+   if test "$enable_tourist" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define TOURIST
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(yeoman,[Yeoman class],YEOMAN,yes)
+# NETHACK_ARG(zouthern,[Zoutherner class],ZOUTHERN,no)
+{ echo "$as_me:$LINENO: checking whether to enable redo" >&5
+echo $ECHO_N "checking whether to enable redo... $ECHO_C" >&6; }
+   # Check whether --enable-redo was given.
+if test "${enable_redo+set}" = set; then
+  enableval=$enable_redo;
+else
+  enable_redo="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_redo" >&5
+echo "${ECHO_T}$enable_redo" >&6; }
+   if test "$enable_redo" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define REDO
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable clipping" >&5
+echo $ECHO_N "checking whether to enable clipping... $ECHO_C" >&6; }
+   # Check whether --enable-clipping was given.
+if test "${enable_clipping+set}" = set; then
+  enableval=$enable_clipping;
+else
+  enable_clipping="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_clipping" >&5
+echo "${ECHO_T}$enable_clipping" >&6; }
+   if test "$enable_clipping" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define CLIPPING
+_ACEOF
+
+   fi
+
+#NETHACK_ARG(menu-color,[TTY graphics menu color],MENU_COLOR,yes)
+#NETHACK_ARG(status-color,[TTY graphics status color],STATUS_COLORS,yes)
+#NETHACK_ARG(auto-open,[Open doors by walking into them],AUTO_OPEN,yes)
+{ echo "$as_me:$LINENO: checking whether to enable elbereth" >&5
+echo $ECHO_N "checking whether to enable elbereth... $ECHO_C" >&6; }
+   # Check whether --enable-elbereth was given.
+if test "${enable_elbereth+set}" = set; then
+  enableval=$enable_elbereth;
+else
+  enable_elbereth="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_elbereth" >&5
+echo "${ECHO_T}$enable_elbereth" >&6; }
+   if test "$enable_elbereth" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define ELBERETH
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(noartifactwish,[Prevent wishing for special artifacts],
+#  NOARTIFACTWISH,no)
+# NETHACK_ARG(no-bones,[Disable loading and saving bones levels],NO_BONES,no)
+{ echo "$as_me:$LINENO: checking whether to enable user-sounds" >&5
+echo $ECHO_N "checking whether to enable user-sounds... $ECHO_C" >&6; }
+   # Check whether --enable-user-sounds was given.
+if test "${enable_user_sounds+set}" = set; then
+  enableval=$enable_user_sounds;
+else
+  enable_user_sounds="no"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_user_sounds" >&5
+echo "${ECHO_T}$enable_user_sounds" >&6; }
+   if test "$enable_user_sounds" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define USER_SOUNDS
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable exp-on-botl" >&5
+echo $ECHO_N "checking whether to enable exp-on-botl... $ECHO_C" >&6; }
+   # Check whether --enable-exp-on-botl was given.
+if test "${enable_exp_on_botl+set}" = set; then
+  enableval=$enable_exp_on_botl;
+else
+  enable_exp_on_botl="yes"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_exp_on_botl" >&5
+echo "${ECHO_T}$enable_exp_on_botl" >&6; }
+   if test "$enable_exp_on_botl" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define EXP_ON_BOTL
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable score-on-botl" >&5
+echo $ECHO_N "checking whether to enable score-on-botl... $ECHO_C" >&6; }
+   # Check whether --enable-score-on-botl was given.
+if test "${enable_score_on_botl+set}" = set; then
+  enableval=$enable_score_on_botl;
+else
+  enable_score_on_botl="no"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_score_on_botl" >&5
+echo "${ECHO_T}$enable_score_on_botl" >&6; }
+   if test "$enable_score_on_botl" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define SCORE_ON_BOTL
+_ACEOF
+
+   fi
+
+# NETHACK_ARG(realtime-on-botl,[Show elapsed time on bottom line],REALTIME_ON_BOTL,no)
+#NETHACK_ARG(borg,[Borg player (only under DOS)],BORG,no)
+# NETHACK_ARG(keep-save,[Keep save files after restore],KEEP_SAVE,no)
+# NETHACK_ARG(charon,[Charon's boat, enables Cerebus (not implemented)],CHARON,no)
+# NETHACK_ARG(show-dmg,[Display damage reports],SHOW_DMG,yes)
+# NETHACK_ARG(show-weight,[Display object weight],SHOW_WEIGHT,yes)
+# NETHACK_ARG(other-services,[Shopkeeper services],OTHER_SERVICES,yes)
+# NETHACK_ARG(show-born,[Display number of created monsters at the end of game],SHOW_BORN,yes)
+# NETHACK_ARG(show-extinct,[Display extinct monsters at the end of game],SHOW_EXTINCT,yes)
+# NETHACK_ARG(dungeon-growth,[Dungeon growth],DUNGEON_GROWTH,yes)
+#NETHACK_ARG(shout,[Shouting and pet commands (not implemented)],SHOUT,no)
+# NETHACK_ARG(display-layers,[Support transparent tilesets],DISPLAY_LAYERS,yes)
+{ echo "$as_me:$LINENO: checking whether to enable goldobj" >&5
+echo $ECHO_N "checking whether to enable goldobj... $ECHO_C" >&6; }
+   # Check whether --enable-goldobj was given.
+if test "${enable_goldobj+set}" = set; then
+  enableval=$enable_goldobj;
+else
+  enable_goldobj="no"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_goldobj" >&5
+echo "${ECHO_T}$enable_goldobj" >&6; }
+   if test "$enable_goldobj" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define GOLDOBJ
+_ACEOF
+
+   fi
+
+{ echo "$as_me:$LINENO: checking whether to enable autopickup-exceptions" >&5
+echo $ECHO_N "checking whether to enable autopickup-exceptions... $ECHO_C" >&6; }
+   # Check whether --enable-autopickup-exceptions was given.
+if test "${enable_autopickup_exceptions+set}" = set; then
+  enableval=$enable_autopickup_exceptions;
+else
+  enable_autopickup_exceptions="no"
+fi
+
+   { echo "$as_me:$LINENO: result: $enable_autopickup_exceptions" >&5
+echo "${ECHO_T}$enable_autopickup_exceptions" >&6; }
+   if test "$enable_autopickup_exceptions" != "no" ; then
+
+cat >>confdefs.h <<_ACEOF
+#define AUTOPICKUP_EXCEPTIONS
+_ACEOF
+
+   fi
+
+#NETHACK_ARG(qwertz,[QWERTZ keyboard layout support],QWERTZ,yes)
+#NETHACK_ARG(simple-mail,[simple mail dgamelaunch support],SIMPLE_MAIL,no)
+
+#NETHACK_ARG(xlogfile,[More verbose logfile],XLOGFILE,yes)
+#AC_MSG_CHECKING([whether to enable xlogfile])
+#AC_ARG_ENABLE([xlogfile], AC_HELP_STRING([--enable-xlogfile=FILE],
+#	[More verbose logfile (default=yes, default filename=xlogfile)]),
+#	if test "$enableval" != no; then enable_xlogfile=yes;
+#	 if test "$enableval" != yes; then xlogfile=$enableval;
+#	 else xlogfile="xlogfile"; fi;
+#	else enable_xlogfile=no; fi,
+#	enable_xlogfile=yes; xlogfile="xlogfile")
+#if test "$enable_xlogfile" != "no" ; then
+#	AC_MSG_RESULT([yes (file $xlogfile)])
+#	AC_DEFINE_UNQUOTED([XLOGFILE], ["$xlogfile"], [The name of the xlogfile])
+#	AC_SUBST(XLOGFILE,["$xlogfile"])
+#else
+#	AC_MSG_RESULT([no])
+#fi
+
+# NETHACK_ARG(livelog,[Live game progress logfile],LIVELOGFILE,no)
+#AC_MSG_CHECKING([whether to enable live logfile])
+#AC_ARG_ENABLE([livelog], AC_HELP_STRING([--enable-livelog=FILE],
+#	[Live game progress logfile (default=no, default filename=livelog)]),
+#	if test "$enableval" != no; then enable_livelog=yes;
+#	 if test "$enableval" != yes; then livelog=$enableval;
+#	 else livelog="livelog"; fi;
+#	else enable_livelog=no; fi,
+#	enable_livelog=no)
+#if test "$enable_livelog" != "no" ; then
+#	AC_MSG_RESULT([yes (file $livelog)])
+#	AC_DEFINE_UNQUOTED([LIVELOGFILE], ["$livelog"], [The name of the live logfile])
+#
+#	NETHACK_ARG(livelog-shout,[Shoutting into the live game logfile],LIVELOG_SHOUT,no)
+#else
+#	AC_MSG_RESULT([no])
+#fi
+
+{ echo "$as_me:$LINENO: checking whether to enable wizmode" >&5
+echo $ECHO_N "checking whether to enable wizmode... $ECHO_C" >&6; }
+# Check whether --enable-wizmode was given.
+if test "${enable_wizmode+set}" = set; then
+  enableval=$enable_wizmode; if test "$enableval" != no; then enable_wizmode=yes;
+	 if test "$enableval" != yes; then wizard=$enableval;
+	 else wizard="wizard"; fi;
+	else enable_wizmode=no; fi
+else
+  enable_wizmode=yes;wizard="wizard"
+fi
+
+if test "$enable_wizmode" != "no" ; then
+	{ echo "$as_me:$LINENO: result: yes (user $wizard)" >&5
+echo "${ECHO_T}yes (user $wizard)" >&6; }
+
+cat >>confdefs.h <<_ACEOF
+#define WIZARD "$wizard"
+_ACEOF
+
+else
+	{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+if test "$CHOWN" != "true"; then
+    { echo "$as_me:$LINENO: checking for owner of installed files" >&5
+echo $ECHO_N "checking for owner of installed files... $ECHO_C" >&6; }
+
+# Check whether --with-owner was given.
+if test "${with_owner+set}" = set; then
+  withval=$with_owner;
+else
+  with_owner=games
+fi
+
+    if test "$with_owner" != "no" ; then
+
+    if { ac_try='find . -user "$with_owner" -prune -print > /dev/null'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  { echo "$as_me:$LINENO: result: $with_owner" >&5
+echo "${ECHO_T}$with_owner" >&6; }
+		 OWNER=$with_owner
+
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+    ( exit $ac_status )
+	    { { echo "$as_me:$LINENO: error: test for user $with_owner failed
+See \`config.log' for more details." >&5
+echo "$as_me: error: test for user $with_owner failed
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+
+    else
+	CHOWN=true
+	{ echo "$as_me:$LINENO: result: not set" >&5
+echo "${ECHO_T}not set" >&6; }
+    fi
+fi
+
+if test "$CHGRP" != "true"; then
+    { echo "$as_me:$LINENO: checking for group of installed files" >&5
+echo $ECHO_N "checking for group of installed files... $ECHO_C" >&6; }
+
+# Check whether --with-group was given.
+if test "${with_group+set}" = set; then
+  withval=$with_group;
+else
+  with_group=bin
+fi
+
+    if test "$with_group" != "no" ; then
+
+    if { ac_try='find . -group "$with_group" -prune -print > /dev/null'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  { echo "$as_me:$LINENO: result: $with_group" >&5
+echo "${ECHO_T}$with_group" >&6; }
+		 GROUP=$with_group
+
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+    ( exit $ac_status )
+	    { { echo "$as_me:$LINENO: error: test for group $with_group failed
+See \`config.log' for more details." >&5
+echo "$as_me: error: test for group $with_group failed
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+
+    else
+	CHGRP=true
+	{ echo "$as_me:$LINENO: result: not set" >&5
+echo "${ECHO_T}not set" >&6; }
+    fi
+fi
+
+NETHACK_LINKS=
+if test ! -f dat/data.base -o ${srcdir}/dat/data.base -nt dat/data.base ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/data.base:dat/data.base"
+	fi
+if test ! -f dat/rumors.tru -o ${srcdir}/dat/rumors.tru -nt dat/rumors.tru ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/rumors.tru:dat/rumors.tru"
+	fi
+if test ! -f dat/rumors.fal -o ${srcdir}/dat/rumors.fal -nt dat/rumors.fal ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/rumors.fal:dat/rumors.fal"
+	fi
+if test ! -f dat/quest.txt -o ${srcdir}/dat/quest.txt -nt dat/quest.txt ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/quest.txt:dat/quest.txt"
+	fi
+if test ! -f dat/oracles.txt -o ${srcdir}/dat/oracles.txt -nt dat/oracles.txt ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/oracles.txt:dat/oracles.txt"
+	fi
+if test ! -f dat/dungeon.def -o ${srcdir}/dat/dungeon.def -nt dat/dungeon.def ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/dungeon.def:dat/dungeon.def"
+	fi
+if test ! -f dat/help -o ${srcdir}/dat/help -nt dat/help ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/help:dat/help"
+	fi
+if test ! -f dat/hh -o ${srcdir}/dat/hh -nt dat/hh ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/hh:dat/hh"
+	fi
+if test ! -f dat/cmdhelp -o ${srcdir}/dat/cmdhelp -nt dat/cmdhelp ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/cmdhelp:dat/cmdhelp"
+	fi
+if test ! -f dat/history -o ${srcdir}/dat/history -nt dat/history ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/history:dat/history"
+	fi
+if test ! -f dat/opthelp -o ${srcdir}/dat/opthelp -nt dat/opthelp ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/opthelp:dat/opthelp"
+	fi
+if test ! -f dat/wizhelp -o ${srcdir}/dat/wizhelp -nt dat/wizhelp ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} dat/wizhelp:dat/wizhelp"
+	fi
+if test ! -f include/win32api.h -o ${srcdir}/sys/winnt/win32api.h -nt include/win32api.h ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} include/win32api.h:sys/winnt/win32api.h"
+	fi
+
+ac_config_links="$ac_config_links ${NETHACK_LINKS}"
+
+
+ac_config_files="$ac_config_files Makefile:sys/autoconf/Makefile.top src/Makefile:sys/autoconf/Makefile.src doc/Makefile:sys/autoconf/Makefile.doc dat/Makefile:sys/autoconf/Makefile.dat util/Makefile:sys/autoconf/Makefile.utl sys/autoconf/depend.awk:sys/autoconf/depend.in"
+
+
+
+
+
+
+
+ac_config_headers="$ac_config_headers include/autoconf.h:sys/autoconf/autoconf.hin"
+
+
+cat >confcache <<\_ACEOF
+# This file is a shell script that caches the results of configure
+# tests run on this system so they can be shared between configure
+# scripts and configure runs, see configure's option --config-cache.
+# It is not useful on other systems.  If it contains results you don't
+# want to keep, you may remove or edit it.
+#
+# config.status only pays attention to the cache file if you give it
+# the --recheck option to rerun configure.
+#
+# `ac_cv_env_foo' variables (set or unset) will be overridden when
+# loading this file, other *unset* `ac_cv_foo' will be assigned the
+# following values.
+
+_ACEOF
+
+# The following way of writing the cache mishandles newlines in values,
+# but we know of no workaround that is simple, portable, and efficient.
+# So, we kill variables containing newlines.
+# Ultrix sh set writes to stderr and can't be redirected directly,
+# and sets the high bit in the cache file unless we assign to the vars.
+(
+  for ac_var in `(set) 2>&1 | sed -n 's/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'`; do
+    eval ac_val=\$$ac_var
+    case $ac_val in #(
+    *${as_nl}*)
+      case $ac_var in #(
+      *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
+echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
+      esac
+      case $ac_var in #(
+      _ | IFS | as_nl) ;; #(
+      *) $as_unset $ac_var ;;
+      esac ;;
+    esac
+  done
+
+  (set) 2>&1 |
+    case $as_nl`(ac_space=' '; set) 2>&1` in #(
+    *${as_nl}ac_space=\ *)
+      # `set' does not quote correctly, so add quotes (double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      sed -n \
+	"s/'/'\\\\''/g;
+	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+      ;; #(
+    *)
+      # `set' quotes correctly as required by POSIX, so do not add quotes.
+      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
+      ;;
+    esac |
+    sort
+) |
+  sed '
+     /^ac_cv_env_/b end
+     t clear
+     :clear
+     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     t end
+     s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+     :end' >>confcache
+if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
+  if test -w "$cache_file"; then
+    test "x$cache_file" != "x/dev/null" &&
+      { echo "$as_me:$LINENO: updating cache $cache_file" >&5
+echo "$as_me: updating cache $cache_file" >&6;}
+    cat confcache >$cache_file
+  else
+    { echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
+echo "$as_me: not updating unwritable cache $cache_file" >&6;}
+  fi
+fi
+rm -f confcache
+
+test "x$prefix" = xNONE && prefix=$ac_default_prefix
+# Let make expand exec_prefix.
+test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
+
+DEFS=-DHAVE_CONFIG_H
+
+ac_libobjs=
+ac_ltlibobjs=
+for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
+  # 1. Remove the extension, and $U if already installed.
+  ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
+  ac_i=`echo "$ac_i" | sed "$ac_script"`
+  # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
+  #    will be set to the directory where LIBOBJS objects are built.
+  ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
+  ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
+done
+LIBOBJS=$ac_libobjs
+
+LTLIBOBJS=$ac_ltlibobjs
+
+
+
+: ${CONFIG_STATUS=./config.status}
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+{ echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
+echo "$as_me: creating $CONFIG_STATUS" >&6;}
+cat >$CONFIG_STATUS <<_ACEOF
+#! $SHELL
+# Generated by $as_me.
+# Run this file to recreate the current configuration.
+# Compiler output produced by configure, useful for debugging
+# configure, is in config.log if it exists.
+
+debug=false
+ac_cs_recheck=false
+ac_cs_silent=false
+SHELL=\${CONFIG_SHELL-$SHELL}
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be more Bourne compatible
+DUALCASE=1; export DUALCASE # for MKS sh
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+  setopt NO_GLOB_SUBST
+else
+  case `(set -o) 2>/dev/null` in
+  *posix*) set -o posix ;;
+esac
+
+fi
+
+
+
+
+# PATH needs CR
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conf$$.sh
+  echo  "exit 0"   >>conf$$.sh
+  chmod +x conf$$.sh
+  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conf$$.sh
+fi
+
+# Support unset when possible.
+if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.  Quoting is
+# there to prevent editors from complaining about space-tab.
+# (If _AS_PATH_WALK were called with IFS unset, it would disable word
+# splitting by setting IFS to empty value.)
+as_nl='
+'
+IFS=" ""	$as_nl"
+
+# Find who we are.  Look in the path if we contain no directory separator.
+case $0 in
+  *[\\/]* ) as_myself=$0 ;;
+  *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+IFS=$as_save_IFS
+
+     ;;
+esac
+# We did not find ourselves, most probably we were run as `sh COMMAND'
+# in which case we are not to be found in the path.
+if test "x$as_myself" = x; then
+  as_myself=$0
+fi
+if test ! -f "$as_myself"; then
+  echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  { (exit 1); exit 1; }
+fi
+
+# Work around bugs in pre-3.0 UWIN ksh.
+for as_var in ENV MAIL MAILPATH
+do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+done
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# NLS nuisances.
+for as_var in \
+  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+  LC_TELEPHONE LC_TIME
+do
+  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+    eval $as_var=C; export $as_var
+  else
+    ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+  fi
+done
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1 &&
+   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename -- "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\/\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+
+# CDPATH.
+$as_unset CDPATH
+
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line after each line using $LINENO; the second 'sed'
+  # does the real work.  The second script uses 'N' to pair each
+  # line-number line with the line containing $LINENO, and appends
+  # trailing '-' during substitution so that $LINENO is not a special
+  # case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+  # E. McMahon (1931-1989) for sed's syntax.  :-)
+  sed -n '
+    p
+    /[$]LINENO/=
+  ' <$as_myself |
+    sed '
+      s/[$]LINENO.*/&-/
+      t lineno
+      b
+      :lineno
+      N
+      :loop
+      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
+      t loop
+      s/-\n.*//
+    ' >$as_me.lineno &&
+  chmod +x "$as_me.lineno" ||
+    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensitive to this).
+  . "./$as_me.lineno"
+  # Exit status is that of the last command.
+  exit
+}
+
+
+if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+  as_dirname=dirname
+else
+  as_dirname=false
+fi
+
+ECHO_C= ECHO_N= ECHO_T=
+case `echo -n x` in
+-n*)
+  case `echo 'x\c'` in
+  *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+  *)   ECHO_C='\c';;
+  esac;;
+*)
+  ECHO_N='-n';;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1 &&
+   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+if test -d conf$$.dir; then
+  rm -f conf$$.dir/conf$$.file
+else
+  rm -f conf$$.dir
+  mkdir conf$$.dir
+fi
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s='ln -s'
+  # ... but there are two gotchas:
+  # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
+  # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
+  # In both cases, we have to default to `cp -p'.
+  ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
+    as_ln_s='cp -p'
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+rmdir conf$$.dir 2>/dev/null
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  test -d ./-p && rmdir ./-p
+  as_mkdir_p=false
+fi
+
+if test -x / >/dev/null 2>&1; then
+  as_test_x='test -x'
+else
+  if ls -dL / >/dev/null 2>&1; then
+    as_ls_L_option=L
+  else
+    as_ls_L_option=
+  fi
+  as_test_x='
+    eval sh -c '\''
+      if test -d "$1"; then
+        test -d "$1/.";
+      else
+	case $1 in
+        -*)set "./$1";;
+	esac;
+	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
+	???[sx]*):;;*)false;;esac;fi
+    '\'' sh
+  '
+fi
+as_executable_p=$as_test_x
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+
+
+exec 6>&1
+
+# Save the log message, to keep $[0] and so on meaningful, and to
+# report actual input values of CONFIG_FILES etc. instead of their
+# values after options handling.
+ac_log="
+This file was extended by NETHACK $as_me 3.4.3, which was
+generated by GNU Autoconf 2.61.  Invocation command line was
+
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
+  $ $0 $@
+
+on `(hostname || uname -n) 2>/dev/null | sed 1q`
+"
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<_ACEOF
+# Files that config.status was made for.
+config_files="$ac_config_files"
+config_headers="$ac_config_headers"
+config_links="$ac_config_links"
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+ac_cs_usage="\
+\`$as_me' instantiates files from templates according to the
+current configuration.
+
+Usage: $0 [OPTIONS] [FILE]...
+
+  -h, --help       print this help, then exit
+  -V, --version    print version number and configuration settings, then exit
+  -q, --quiet      do not print progress messages
+  -d, --debug      don't remove temporary files
+      --recheck    update $as_me by reconfiguring in the same conditions
+  --file=FILE[:TEMPLATE]
+		   instantiate the configuration file FILE
+  --header=FILE[:TEMPLATE]
+		   instantiate the configuration header FILE
+
+Configuration files:
+$config_files
+
+Configuration headers:
+$config_headers
+
+Configuration links:
+$config_links
+
+Report bugs to <bug-autoconf@gnu.org>."
+
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+ac_cs_version="\\
+NETHACK config.status 3.4.3
+configured by $0, generated by GNU Autoconf 2.61,
+  with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
+
+Copyright (C) 2006 Free Software Foundation, Inc.
+This config.status script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it."
+
+ac_pwd='$ac_pwd'
+srcdir='$srcdir'
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+# If no file are specified by the user, then we need to provide default
+# value.  By we need to know if files were specified by the user.
+ac_need_defaults=:
+while test $# != 0
+do
+  case $1 in
+  --*=*)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
+    ac_shift=:
+    ;;
+  *)
+    ac_option=$1
+    ac_optarg=$2
+    ac_shift=shift
+    ;;
+  esac
+
+  case $ac_option in
+  # Handling of the options.
+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+    ac_cs_recheck=: ;;
+  --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
+    echo "$ac_cs_version"; exit ;;
+  --debug | --debu | --deb | --de | --d | -d )
+    debug=: ;;
+  --file | --fil | --fi | --f )
+    $ac_shift
+    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
+    ac_need_defaults=false;;
+  --header | --heade | --head | --hea )
+    $ac_shift
+    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
+    ac_need_defaults=false;;
+  --he | --h)
+    # Conflict between --help and --header
+    { echo "$as_me: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; };;
+  --help | --hel | -h )
+    echo "$ac_cs_usage"; exit ;;
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil | --si | --s)
+    ac_cs_silent=: ;;
+
+  # This is an error.
+  -*) { echo "$as_me: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; } ;;
+
+  *) ac_config_targets="$ac_config_targets $1"
+     ac_need_defaults=false ;;
+
+  esac
+  shift
+done
+
+ac_configure_extra_args=
+
+if $ac_cs_silent; then
+  exec 6>/dev/null
+  ac_configure_extra_args="$ac_configure_extra_args --silent"
+fi
+
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+if \$ac_cs_recheck; then
+  echo "running CONFIG_SHELL=$SHELL $SHELL $0 "$ac_configure_args \$ac_configure_extra_args " --no-create --no-recursion" >&6
+  CONFIG_SHELL=$SHELL
+  export CONFIG_SHELL
+  exec $SHELL "$0"$ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
+fi
+
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+exec 5>>config.log
+{
+  echo
+  sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
+## Running $as_me. ##
+_ASBOX
+  echo "$ac_log"
+} >&5
+
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+# Handling of arguments.
+for ac_config_target in $ac_config_targets
+do
+  case $ac_config_target in
+    "${NETHACK_LINKS}") CONFIG_LINKS="$CONFIG_LINKS ${NETHACK_LINKS}" ;;
+    "Makefile") CONFIG_FILES="$CONFIG_FILES Makefile:sys/autoconf/Makefile.top" ;;
+    "src/Makefile") CONFIG_FILES="$CONFIG_FILES src/Makefile:sys/autoconf/Makefile.src" ;;
+    "doc/Makefile") CONFIG_FILES="$CONFIG_FILES doc/Makefile:sys/autoconf/Makefile.doc" ;;
+    "dat/Makefile") CONFIG_FILES="$CONFIG_FILES dat/Makefile:sys/autoconf/Makefile.dat" ;;
+    "util/Makefile") CONFIG_FILES="$CONFIG_FILES util/Makefile:sys/autoconf/Makefile.utl" ;;
+    "sys/autoconf/depend.awk") CONFIG_FILES="$CONFIG_FILES sys/autoconf/depend.awk:sys/autoconf/depend.in" ;;
+    "include/autoconf.h") CONFIG_HEADERS="$CONFIG_HEADERS include/autoconf.h:sys/autoconf/autoconf.hin" ;;
+
+  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+
+# If the user did not use the arguments to specify the items to instantiate,
+# then the envvar interface is used.  Set only those that are not.
+# We use the long form for the default assignment because of an extremely
+# bizarre bug on SunOS 4.1.3.
+if $ac_need_defaults; then
+  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+  test "${CONFIG_LINKS+set}" = set || CONFIG_LINKS=$config_links
+fi
+
+# Have a temporary directory for convenience.  Make it in the build tree
+# simply because there is no reason against having it here, and in addition,
+# creating and moving files from /tmp can sometimes cause problems.
+# Hook for its removal unless debugging.
+# Note that there is a small window in which the directory will not be cleaned:
+# after its creation but before its name has been assigned to `$tmp'.
+$debug ||
+{
+  tmp=
+  trap 'exit_status=$?
+  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+' 0
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
+}
+# Create a (secure) tmp directory for tmp files.
+
+{
+  tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
+  test -n "$tmp" && test -d "$tmp"
+}  ||
+{
+  tmp=./conf$$-$RANDOM
+  (umask 077 && mkdir "$tmp")
+} ||
+{
+   echo "$me: cannot create a temporary directory in ." >&2
+   { (exit 1); exit 1; }
+}
+
+#
+# Set up the sed scripts for CONFIG_FILES section.
+#
+
+# No need to generate the scripts if there are no CONFIG_FILES.
+# This happens for instance when ./config.status config.h
+if test -n "$CONFIG_FILES"; then
+
+_ACEOF
+
+
+
+ac_delim='%!_!# '
+for ac_last_try in false false false false false :; do
+  cat >conf$$subs.sed <<_ACEOF
+SHELL!$SHELL$ac_delim
+PATH_SEPARATOR!$PATH_SEPARATOR$ac_delim
+PACKAGE_NAME!$PACKAGE_NAME$ac_delim
+PACKAGE_TARNAME!$PACKAGE_TARNAME$ac_delim
+PACKAGE_VERSION!$PACKAGE_VERSION$ac_delim
+PACKAGE_STRING!$PACKAGE_STRING$ac_delim
+PACKAGE_BUGREPORT!$PACKAGE_BUGREPORT$ac_delim
+exec_prefix!$exec_prefix$ac_delim
+prefix!$prefix$ac_delim
+program_transform_name!$program_transform_name$ac_delim
+bindir!$bindir$ac_delim
+sbindir!$sbindir$ac_delim
+libexecdir!$libexecdir$ac_delim
+datarootdir!$datarootdir$ac_delim
+datadir!$datadir$ac_delim
+sysconfdir!$sysconfdir$ac_delim
+sharedstatedir!$sharedstatedir$ac_delim
+localstatedir!$localstatedir$ac_delim
+includedir!$includedir$ac_delim
+oldincludedir!$oldincludedir$ac_delim
+docdir!$docdir$ac_delim
+infodir!$infodir$ac_delim
+htmldir!$htmldir$ac_delim
+dvidir!$dvidir$ac_delim
+pdfdir!$pdfdir$ac_delim
+psdir!$psdir$ac_delim
+libdir!$libdir$ac_delim
+localedir!$localedir$ac_delim
+mandir!$mandir$ac_delim
+DEFS!$DEFS$ac_delim
+ECHO_C!$ECHO_C$ac_delim
+ECHO_N!$ECHO_N$ac_delim
+ECHO_T!$ECHO_T$ac_delim
+LIBS!$LIBS$ac_delim
+build_alias!$build_alias$ac_delim
+host_alias!$host_alias$ac_delim
+target_alias!$target_alias$ac_delim
+SRCDIR!$SRCDIR$ac_delim
+CC!$CC$ac_delim
+CHGRP!$CHGRP$ac_delim
+CHOWN!$CHOWN$ac_delim
+CHMOD!$CHMOD$ac_delim
+ZLIB_CFLAGS!$ZLIB_CFLAGS$ac_delim
+ZLIB_LIBS!$ZLIB_LIBS$ac_delim
+LN_S!$LN_S$ac_delim
+AWK!$AWK$ac_delim
+CFLAGS!$CFLAGS$ac_delim
+LDFLAGS!$LDFLAGS$ac_delim
+CPPFLAGS!$CPPFLAGS$ac_delim
+ac_ct_CC!$ac_ct_CC$ac_delim
+EXEEXT!$EXEEXT$ac_delim
+OBJEXT!$OBJEXT$ac_delim
+LFLAGS!$LFLAGS$ac_delim
+build!$build$ac_delim
+build_cpu!$build_cpu$ac_delim
+build_vendor!$build_vendor$ac_delim
+build_os!$build_os$ac_delim
+host!$host$ac_delim
+host_cpu!$host_cpu$ac_delim
+host_vendor!$host_vendor$ac_delim
+host_os!$host_os$ac_delim
+LIBXAW_CFLAGS!$LIBXAW_CFLAGS$ac_delim
+LIBXAW_LIBS!$LIBXAW_LIBS$ac_delim
+PKG_CONFIG!$PKG_CONFIG$ac_delim
+HOST_MSWIN!$HOST_MSWIN$ac_delim
+HOST_UNIX!$HOST_UNIX$ac_delim
+SYSTEM!$SYSTEM$ac_delim
+SYSSRC!$SYSSRC$ac_delim
+SYSOBJ!$SYSOBJ$ac_delim
+NHKEYDLL_GCC!$NHKEYDLL_GCC$ac_delim
+LEX!$LEX$ac_delim
+LEX_OUTPUT_ROOT!$LEX_OUTPUT_ROOT$ac_delim
+LEXLIB!$LEXLIB$ac_delim
+YACC!$YACC$ac_delim
+YFLAGS!$YFLAGS$ac_delim
+ac_ct_CHOWN!$ac_ct_CHOWN$ac_delim
+ac_ct_CHGRP!$ac_ct_CHGRP$ac_delim
+ac_ct_CHMOD!$ac_ct_CHMOD$ac_delim
+WINDRES!$WINDRES$ac_delim
+COMPRESS!$COMPRESS$ac_delim
+EXTRA_UNSHARE!$EXTRA_UNSHARE$ac_delim
+CPP!$CPP$ac_delim
+GREP!$GREP$ac_delim
+EGREP!$EGREP$ac_delim
+WINTTYLIB!$WINTTYLIB$ac_delim
+WINSRC!$WINSRC$ac_delim
+WINOBJ!$WINOBJ$ac_delim
+WINLIB!$WINLIB$ac_delim
+CNF_SHARE_DATND!$CNF_SHARE_DATND$ac_delim
+OPTIONS_FILE!$OPTIONS_FILE$ac_delim
+OPTIONS_FILES!$OPTIONS_FILES$ac_delim
+HAVE_NROFF!$HAVE_NROFF$ac_delim
+HAVE_TBL!$HAVE_TBL$ac_delim
+GUIDEBOOK!$GUIDEBOOK$ac_delim
+GUIDEBOOK_TXT!$GUIDEBOOK_TXT$ac_delim
+OWNER!$OWNER$ac_delim
+GROUP!$GROUP$ac_delim
+_ACEOF
+
+  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
+    break
+  elif $ac_last_try; then
+    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+   { (exit 1); exit 1; }; }
+  else
+    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+  fi
+done
+
+ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
+if test -n "$ac_eof"; then
+  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
+  ac_eof=`expr $ac_eof + 1`
+fi
+
+cat >>$CONFIG_STATUS <<_ACEOF
+cat >"\$tmp/subs-1.sed" <<\CEOF$ac_eof
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+_ACEOF
+sed '
+s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
+s/^/s,@/; s/!/@,|#_!!_#|/
+:n
+t n
+s/'"$ac_delim"'$/,g/; t
+s/$/\\/; p
+N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
+' >>$CONFIG_STATUS <conf$$subs.sed
+rm -f conf$$subs.sed
+cat >>$CONFIG_STATUS <<_ACEOF
+CEOF$ac_eof
+_ACEOF
+
+
+ac_delim='%!_!# '
+for ac_last_try in false false false false false :; do
+  cat >conf$$subs.sed <<_ACEOF
+LIBOBJS!$LIBOBJS$ac_delim
+LTLIBOBJS!$LTLIBOBJS$ac_delim
+_ACEOF
+
+  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 2; then
+    break
+  elif $ac_last_try; then
+    { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+   { (exit 1); exit 1; }; }
+  else
+    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+  fi
+done
+
+ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
+if test -n "$ac_eof"; then
+  ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
+  ac_eof=`expr $ac_eof + 1`
+fi
+
+cat >>$CONFIG_STATUS <<_ACEOF
+cat >"\$tmp/subs-2.sed" <<\CEOF$ac_eof
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b end
+_ACEOF
+sed '
+s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
+s/^/s,@/; s/!/@,|#_!!_#|/
+:n
+t n
+s/'"$ac_delim"'$/,g/; t
+s/$/\\/; p
+N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
+' >>$CONFIG_STATUS <conf$$subs.sed
+rm -f conf$$subs.sed
+cat >>$CONFIG_STATUS <<_ACEOF
+:end
+s/|#_!!_#|//g
+CEOF$ac_eof
+_ACEOF
+
+
+# VPATH may cause trouble with some makes, so we remove $(srcdir),
+# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# trailing colons and then remove the whole line if VPATH becomes empty
+# (actually we leave an empty line to preserve line numbers).
+if test "x$srcdir" = x.; then
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
+s/:*\$(srcdir):*/:/
+s/:*\${srcdir}:*/:/
+s/:*@srcdir@:*/:/
+s/^\([^=]*=[	 ]*\):*/\1/
+s/:*$//
+s/^[^=]*=[	 ]*$//
+}'
+fi
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+fi # test -n "$CONFIG_FILES"
+
+
+for ac_tag in  :F $CONFIG_FILES  :H $CONFIG_HEADERS  :L $CONFIG_LINKS
+do
+  case $ac_tag in
+  :[FHLC]) ac_mode=$ac_tag; continue;;
+  esac
+  case $ac_mode$ac_tag in
+  :[FHL]*:*);;
+  :L* | :C*:*) { { echo "$as_me:$LINENO: error: Invalid tag $ac_tag." >&5
+echo "$as_me: error: Invalid tag $ac_tag." >&2;}
+   { (exit 1); exit 1; }; };;
+  :[FH]-) ac_tag=-:-;;
+  :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
+  esac
+  ac_save_IFS=$IFS
+  IFS=:
+  set x $ac_tag
+  IFS=$ac_save_IFS
+  shift
+  ac_file=$1
+  shift
+
+  case $ac_mode in
+  :L) ac_source=$1;;
+  :[FH])
+    ac_file_inputs=
+    for ac_f
+    do
+      case $ac_f in
+      -) ac_f="$tmp/stdin";;
+      *) # Look for the file first in the build tree, then in the source tree
+	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
+	 # because $ac_f cannot contain `:'.
+	 test -f "$ac_f" ||
+	   case $ac_f in
+	   [\\/$]*) false;;
+	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
+	   esac ||
+	   { { echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
+echo "$as_me: error: cannot find input file: $ac_f" >&2;}
+   { (exit 1); exit 1; }; };;
+      esac
+      ac_file_inputs="$ac_file_inputs $ac_f"
+    done
+
+    # Let's still pretend it is `configure' which instantiates (i.e., don't
+    # use $as_me), people would be surprised to read:
+    #    /* config.h.  Generated by config.status.  */
+    configure_input="Generated from "`IFS=:
+	  echo $* | sed 's|^[^:]*/||;s|:[^:]*/|, |g'`" by configure."
+    if test x"$ac_file" != x-; then
+      configure_input="$ac_file.  $configure_input"
+      { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    fi
+
+    case $ac_tag in
+    *:-:* | *:-) cat >"$tmp/stdin";;
+    esac
+    ;;
+  esac
+
+  ac_dir=`$as_dirname -- "$ac_file" ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$ac_file" : 'X\(//\)[^/]' \| \
+	 X"$ac_file" : 'X\(//\)$' \| \
+	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)[^/].*/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+  { as_dir="$ac_dir"
+  case $as_dir in #(
+  -*) as_dir=./$as_dir;;
+  esac
+  test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
+    as_dirs=
+    while :; do
+      case $as_dir in #(
+      *\'*) as_qdir=`echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #(
+      *) as_qdir=$as_dir;;
+      esac
+      as_dirs="'$as_qdir' $as_dirs"
+      as_dir=`$as_dirname -- "$as_dir" ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)[^/].*/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\/\)$/{
+	    s//\1/
+	    q
+	  }
+	  /^X\(\/\).*/{
+	    s//\1/
+	    q
+	  }
+	  s/.*/./; q'`
+      test -d "$as_dir" && break
+    done
+    test -z "$as_dirs" || eval "mkdir $as_dirs"
+  } || test -d "$as_dir" || { { echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
+echo "$as_me: error: cannot create directory $as_dir" >&2;}
+   { (exit 1); exit 1; }; }; }
+  ac_builddir=.
+
+case "$ac_dir" in
+.) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
+*)
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A ".." for each directory in $ac_dir_suffix.
+  ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
+  case $ac_top_builddir_sub in
+  "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
+  *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
+  esac ;;
+esac
+ac_abs_top_builddir=$ac_pwd
+ac_abs_builddir=$ac_pwd$ac_dir_suffix
+# for backward compatibility:
+ac_top_builddir=$ac_top_build_prefix
+
+case $srcdir in
+  .)  # We are building in place.
+    ac_srcdir=.
+    ac_top_srcdir=$ac_top_builddir_sub
+    ac_abs_top_srcdir=$ac_pwd ;;
+  [\\/]* | ?:[\\/]* )  # Absolute name.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir
+    ac_abs_top_srcdir=$srcdir ;;
+  *) # Relative name.
+    ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_build_prefix$srcdir
+    ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
+esac
+ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
+
+
+  case $ac_mode in
+  :F)
+  #
+  # CONFIG_FILE
+  #
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+# If the template does not know about datarootdir, expand it.
+# FIXME: This hack should be removed a few years after 2.60.
+ac_datarootdir_hack=; ac_datarootdir_seen=
+
+case `sed -n '/datarootdir/ {
+  p
+  q
+}
+/@datadir@/p
+/@docdir@/p
+/@infodir@/p
+/@localedir@/p
+/@mandir@/p
+' $ac_file_inputs` in
+*datarootdir*) ac_datarootdir_seen=yes;;
+*@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
+  { echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+  ac_datarootdir_hack='
+  s&@datadir@&$datadir&g
+  s&@docdir@&$docdir&g
+  s&@infodir@&$infodir&g
+  s&@localedir@&$localedir&g
+  s&@mandir@&$mandir&g
+    s&\\\${datarootdir}&$datarootdir&g' ;;
+esac
+_ACEOF
+
+# Neutralize VPATH when `$srcdir' = `.'.
+# Shell code in configure.ac might set extrasub.
+# FIXME: do we really want to maintain this feature?
+cat >>$CONFIG_STATUS <<_ACEOF
+  sed "$ac_vpsub
+$extrasub
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+:t
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+s&@configure_input@&$configure_input&;t t
+s&@top_builddir@&$ac_top_builddir_sub&;t t
+s&@srcdir@&$ac_srcdir&;t t
+s&@abs_srcdir@&$ac_abs_srcdir&;t t
+s&@top_srcdir@&$ac_top_srcdir&;t t
+s&@abs_top_srcdir@&$ac_abs_top_srcdir&;t t
+s&@builddir@&$ac_builddir&;t t
+s&@abs_builddir@&$ac_abs_builddir&;t t
+s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
+$ac_datarootdir_hack
+" $ac_file_inputs | sed -f "$tmp/subs-1.sed" | sed -f "$tmp/subs-2.sed" >$tmp/out
+
+test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
+  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
+  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+  { echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+which seems to be undefined.  Please make sure it is defined." >&5
+echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+which seems to be undefined.  Please make sure it is defined." >&2;}
+
+  rm -f "$tmp/stdin"
+  case $ac_file in
+  -) cat "$tmp/out"; rm -f "$tmp/out";;
+  *) rm -f "$ac_file"; mv "$tmp/out" $ac_file;;
+  esac
+ ;;
+  :H)
+  #
+  # CONFIG_HEADER
+  #
+_ACEOF
+
+# Transform confdefs.h into a sed script `conftest.defines', that
+# substitutes the proper values into config.h.in to produce config.h.
+rm -f conftest.defines conftest.tail
+# First, append a space to every undef/define line, to ease matching.
+echo 's/$/ /' >conftest.defines
+# Then, protect against being on the right side of a sed subst, or in
+# an unquoted here document, in config.status.  If some macros were
+# called several times there might be several #defines for the same
+# symbol, which is useless.  But do not sort them, since the last
+# AC_DEFINE must be honored.
+ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
+# These sed commands are passed to sed as "A NAME B PARAMS C VALUE D", where
+# NAME is the cpp macro being defined, VALUE is the value it is being given.
+# PARAMS is the parameter list in the macro definition--in most cases, it's
+# just an empty string.
+ac_dA='s,^\\([	 #]*\\)[^	 ]*\\([	 ]*'
+ac_dB='\\)[	 (].*,\\1define\\2'
+ac_dC=' '
+ac_dD=' ,'
+
+uniq confdefs.h |
+  sed -n '
+	t rset
+	:rset
+	s/^[	 ]*#[	 ]*define[	 ][	 ]*//
+	t ok
+	d
+	:ok
+	s/[\\&,]/\\&/g
+	s/^\('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/ '"$ac_dA"'\1'"$ac_dB"'\2'"${ac_dC}"'\3'"$ac_dD"'/p
+	s/^\('"$ac_word_re"'\)[	 ]*\(.*\)/'"$ac_dA"'\1'"$ac_dB$ac_dC"'\2'"$ac_dD"'/p
+  ' >>conftest.defines
+
+# Remove the space that was appended to ease matching.
+# Then replace #undef with comments.  This is necessary, for
+# example, in the case of _POSIX_SOURCE, which is predefined and required
+# on some systems where configure will not decide to define it.
+# (The regexp can be short, since the line contains either #define or #undef.)
+echo 's/ $//
+s,^[	 #]*u.*,/* & */,' >>conftest.defines
+
+# Break up conftest.defines:
+ac_max_sed_lines=50
+
+# First sed command is:	 sed -f defines.sed $ac_file_inputs >"$tmp/out1"
+# Second one is:	 sed -f defines.sed "$tmp/out1" >"$tmp/out2"
+# Third one will be:	 sed -f defines.sed "$tmp/out2" >"$tmp/out1"
+# et cetera.
+ac_in='$ac_file_inputs'
+ac_out='"$tmp/out1"'
+ac_nxt='"$tmp/out2"'
+
+while :
+do
+  # Write a here document:
+    cat >>$CONFIG_STATUS <<_ACEOF
+    # First, check the format of the line:
+    cat >"\$tmp/defines.sed" <<\\CEOF
+/^[	 ]*#[	 ]*undef[	 ][	 ]*$ac_word_re[	 ]*\$/b def
+/^[	 ]*#[	 ]*define[	 ][	 ]*$ac_word_re[(	 ]/b def
+b
+:def
+_ACEOF
+  sed ${ac_max_sed_lines}q conftest.defines >>$CONFIG_STATUS
+  echo 'CEOF
+    sed -f "$tmp/defines.sed"' "$ac_in >$ac_out" >>$CONFIG_STATUS
+  ac_in=$ac_out; ac_out=$ac_nxt; ac_nxt=$ac_in
+  sed 1,${ac_max_sed_lines}d conftest.defines >conftest.tail
+  grep . conftest.tail >/dev/null || break
+  rm -f conftest.defines
+  mv conftest.tail conftest.defines
+done
+rm -f conftest.defines conftest.tail
+
+echo "ac_result=$ac_in" >>$CONFIG_STATUS
+cat >>$CONFIG_STATUS <<\_ACEOF
+  if test x"$ac_file" != x-; then
+    echo "/* $configure_input  */" >"$tmp/config.h"
+    cat "$ac_result" >>"$tmp/config.h"
+    if diff $ac_file "$tmp/config.h" >/dev/null 2>&1; then
+      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+echo "$as_me: $ac_file is unchanged" >&6;}
+    else
+      rm -f $ac_file
+      mv "$tmp/config.h" $ac_file
+    fi
+  else
+    echo "/* $configure_input  */"
+    cat "$ac_result"
+  fi
+  rm -f "$tmp/out12"
+ ;;
+  :L)
+  #
+  # CONFIG_LINK
+  #
+
+  { echo "$as_me:$LINENO: linking $srcdir/$ac_source to $ac_file" >&5
+echo "$as_me: linking $srcdir/$ac_source to $ac_file" >&6;}
+
+  if test ! -r "$srcdir/$ac_source"; then
+    { { echo "$as_me:$LINENO: error: $srcdir/$ac_source: file not found" >&5
+echo "$as_me: error: $srcdir/$ac_source: file not found" >&2;}
+   { (exit 1); exit 1; }; }
+  fi
+  rm -f "$ac_file"
+
+  # Try a relative symlink, then a hard link, then a copy.
+  case $srcdir in
+  [\\/$]* | ?:[\\/]* ) ac_rel_source=$srcdir/$ac_source ;;
+      *) ac_rel_source=$ac_top_build_prefix$srcdir/$ac_source ;;
+  esac
+  ln -s "$ac_rel_source" "$ac_file" 2>/dev/null ||
+    ln "$srcdir/$ac_source" "$ac_file" 2>/dev/null ||
+    cp -p "$srcdir/$ac_source" "$ac_file" ||
+    { { echo "$as_me:$LINENO: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&5
+echo "$as_me: error: cannot link or copy $srcdir/$ac_source to $ac_file" >&2;}
+   { (exit 1); exit 1; }; }
+ ;;
+
+  esac
+
+
+  case $ac_file$ac_mode in
+    "include/autoconf.h":H) sed -e 's,^/\* \(#undef .*\) \*/,\1,' \
+        -e '/#define [^ ]*/ { h; s,#define \([^ ]*\).*,#undef \1,p; g; }' \
+        < include/autoconf.h > include/autoconf.new
+      mv include/autoconf.new \
+        include/autoconf.h ;;
+
+  esac
+done # for ac_tag
+
+
+{ (exit 0); exit 0; }
+_ACEOF
+chmod +x $CONFIG_STATUS
+ac_clean_files=$ac_clean_files_save
+
+
+# configure is writing to config.log, and then calls config.status.
+# config.status does its own redirection, appending to config.log.
+# Unfortunately, on DOS this fails, as config.log is still kept open
+# by configure, so config.status won't be able to write to it; its
+# output is simply discarded.  So we exec the FD to /dev/null,
+# effectively closing config.log, so it can be properly (re)opened and
+# appended to by config.status.  When coming back to configure, we
+# need to make the FD available again.
+if test "$no_create" != yes; then
+  ac_cs_success=:
+  ac_config_status_args=
+  test "$silent" = yes &&
+    ac_config_status_args="$ac_config_status_args --quiet"
+  exec 5>/dev/null
+  $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
+  exec 5>>config.log
+  # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+  # would make configure fail if this is the last instruction.
+  $ac_cs_success || { (exit 1); exit 1; }
+fi
+
diff -uwrN --exclude=.svn nethack-3.4.3/include/config.h nethack-autoconf/include/config.h
--- nethack-3.4.3/include/config.h	2003-12-08 00:39:13.000000000 +0100
+++ nethack-autoconf/include/config.h	2008-11-20 14:27:58.000000000 +0100
@@ -37,12 +37,16 @@
 
 #include "config1.h"	/* should auto-detect MSDOS, MAC, AMIGA, and WIN32 */
 
+#ifdef AUTOCONF
+# include "autoconf.h"
+#endif
+
 
 /* Windowing systems...
  * Define all of those you want supported in your binary.
  * Some combinations make no sense.  See the installation document.
  */
-#define TTY_GRAPHICS	/* good old tty based graphics */
+/* #define TTY_GRAPHICS */	/* good old tty based graphics */
 /* #define X11_GRAPHICS */	/* X11 interface */
 /* #define QT_GRAPHICS */	/* Qt interface */
 /* #define GNOME_GRAPHICS */	/* Gnome interface */
@@ -167,6 +171,7 @@
  *	compression.
  */
 
+#ifndef AUTOCONF
 #ifdef UNIX
 /* path and file name extension for compression program */
 #define COMPRESS "/usr/bin/compress"	/* Lempel-Ziv compression */
@@ -179,6 +184,7 @@
 #ifndef COMPRESS
 # define INTERNAL_COMP	/* control use of NetHack's compression routines */
 #endif
+#endif
 
 /*
  *	Data librarian.  Defining DLB places most of the support files into
@@ -315,6 +321,7 @@
  * complexity of the game but also to the size of the load module.
  */
 
+#ifndef AUTOCONF
 /* dungeon features */
 #define SINKS		/* Kitchen sinks - Janet Walz */
 /* dungeon levels */
@@ -333,13 +340,14 @@
 # define CLIPPING	/* allow smaller screens -- ERS */
 #endif
 
+#define EXP_ON_BOTL	/* Show experience on bottom line */
+/* #define SCORE_ON_BOTL */	/* added by Gary Erickson (erickson@ucivax) */
+#endif
+
 #ifdef REDO
 # define DOAGAIN '\001' /* ^A, the "redo" key used in cmd.c and getline.c */
 #endif
 
-#define EXP_ON_BOTL	/* Show experience on bottom line */
-/* #define SCORE_ON_BOTL */	/* added by Gary Erickson (erickson@ucivax) */
-
 /*
  * Section 5:  EXPERIMENTAL STUFF
  *
diff -uwrN --exclude=.svn nethack-3.4.3/include/ntconf.h nethack-autoconf/include/ntconf.h
--- nethack-3.4.3/include/ntconf.h	2003-12-08 00:39:13.000000000 +0100
+++ nethack-autoconf/include/ntconf.h	2008-09-25 20:15:24.000000000 +0200
@@ -5,7 +5,7 @@
 #ifndef NTCONF_H
 #define NTCONF_H
 
-/* #define SHELL	/* nt use of pcsys routines caused a hang */
+/* #define SHELL */	/* nt use of pcsys routines caused a hang */
 
 #define RANDOM		/* have Berkeley random(3) */
 #define TEXTCOLOR	/* Color text */
@@ -23,13 +23,13 @@
 
 #define SELF_RECOVER		/* Allow the game itself to recover from an aborted game */
 
-#define USER_SOUNDS
+//#define USER_SOUNDS
 /*
  * -----------------------------------------------------------------
  *  The remaining code shouldn't need modification.
  * -----------------------------------------------------------------
  */
-/* #define SHORT_FILENAMES	/* All NT filesystems support long names now */
+/* #define SHORT_FILENAMES */	/* All NT filesystems support long names now */
 
 #ifdef MICRO
 #undef MICRO			/* never define this! */
@@ -49,7 +49,7 @@
 #ifdef MSWIN_GRAPHICS
 #define OPTIONS_USED	"guioptions"
 #else
-#define OPTIONS_USED	"ttyoptions"
+#define OPTIONS_USED	"options"
 #endif
 #define OPTIONS_FILE OPTIONS_USED
 
diff -uwrN --exclude=.svn nethack-3.4.3/include/pcconf.h nethack-autoconf/include/pcconf.h
--- nethack-3.4.3/include/pcconf.h	2003-12-08 00:39:13.000000000 +0100
+++ nethack-autoconf/include/pcconf.h	2008-09-23 22:44:01.000000000 +0200
@@ -133,7 +133,9 @@
  * simply a flag to turn on or off napping for visual effects at run-time.
  */
 
+#ifndef AUTOCONF
 #define TIMED_DELAY	/* enable the `timed_delay' run-time option */
+#endif
 
 # ifdef PCMUSIC
 #define TIMED_DELAY	/* need it anyway */
diff -uwrN --exclude=.svn nethack-3.4.3/include/system.h nethack-autoconf/include/system.h
--- nethack-3.4.3/include/system.h	2003-12-08 00:39:13.000000000 +0100
+++ nethack-autoconf/include/system.h	2008-09-21 15:54:26.000000000 +0200
@@ -9,6 +9,21 @@
 
 #define E extern
 
+#ifdef AUTOCONF
+/*
+ * When using GNU autoconf to configure, the switches are output to
+ * autoconf.h which should override the defaults set earlier in
+ * config.h and *conf.h
+ */
+#include "autoconf.h"
+#if HAVE_STRING_H
+#include <string.h>
+#endif
+#if HAVE_DECL_STRNICMP && !HAVE_DECL_STRNCMPI
+#define strncmpi(a,b,c) strnicmp(a,b,c)
+#endif
+#endif
+
 /* some old <sys/types.h> may not define off_t and size_t; if your system is
  * one of these, define them by hand below
  */
diff -uwrN --exclude=.svn nethack-3.4.3/include/unixconf.h nethack-autoconf/include/unixconf.h
--- nethack-3.4.3/include/unixconf.h	2003-12-08 00:39:13.000000000 +0100
+++ nethack-autoconf/include/unixconf.h	2008-09-23 22:24:57.000000000 +0200
@@ -132,8 +132,10 @@
  * "extra output" method is used, but not all systems provide access to
  * a fine-grained timer.
  */
+#ifndef AUTOCONF
 /* #define TIMED_DELAY */	/* usleep() */
 #endif
+#endif
 
 /*
  * If you define MAIL, then the player will be notified of new mail
@@ -265,6 +267,8 @@
 
 #define HLOCK	"perm"	/* an empty file used for locking purposes */
 
+#include "system.h"
+
 #ifndef REDO
 #define Getchar nhgetch
 #endif
@@ -272,8 +276,6 @@
 
 #define SHELL		/* do not delete the '!' command */
 
-#include "system.h"
-
 #if defined(POSIX_TYPES) || defined(__GNUC__)
 #include <stdlib.h>
 #include <unistd.h>
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Install.ac nethack-autoconf/sys/autoconf/Install.ac
--- nethack-3.4.3/sys/autoconf/Install.ac	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Install.ac	2009-01-16 14:27:49.000000000 +0100
@@ -0,0 +1,41 @@
+                 Instructions for installing NetHack
+                 on a GNU autoconf supported system
+                ====================================
+
+1.  If your system is supported by GNU autoconf, then you should just be
+    able to change to the top level directory (the one containing the
+    sys and src directories, amoung others) and run:
+
+	% ./configure
+	% make
+	% su -
+	# make install
+
+    Notes:
+    
+    * You do _not_ need to have a copy of GNU autoconf to install NetHack.
+
+2.  If you do not like the default set of optional features, then you can
+    use the --enable-FEATURE and/or --disable-FEATURE flags to configure
+    as required. Use configure --help to get a list of the optional feaures
+    available and their default settings.
+
+3.  If the steps above fail for any reason, then your system is probably
+    not supported by GNU autoconf and you should use the system-specific
+    installation instructions in the relevent subdirectory of sys.
+
+4.  If you think you've found a bug in the automatic configuration system,
+    then please report it to <bhaak@gmx.net>.
+    If the problem is that configure exited with an error then, as well as
+    a cut & paste of the error message, please attach the relevant section
+    of config.log (or the whole thing if you're not sure).
+
+5.  If for some reason you need to recreate the configure script, then you
+    should use bootstrap.sh for this purpose. You will need autoconf,
+    automake and pkgconfig for this step.
+
+6.  config.guess and config.sub come from the GNU config package. They should
+    periodically be updated from the official copies. At the time of writing,
+    these can be found here:
+
+	http://savannah.gnu.org/projects/config/
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Makefile.dat nethack-autoconf/sys/autoconf/Makefile.dat
--- nethack-3.4.3/sys/autoconf/Makefile.dat	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Makefile.dat	2009-02-17 12:21:42.000000000 +0100
@@ -0,0 +1,348 @@
+#	NetHack Makefile.
+#       @configure_input@
+#	SCCS Id: @(#)Makefile.dat	3.4	1992/09/18
+
+VPATH=@srcdir@
+srcdir=@srcdir@
+
+EXEEXT = @EXEEXT@
+
+# for Atari
+# SHELL=E:/GEMINI2/MUPFEL.TTP
+# UUDECODE=uudecode
+
+VARDAT = data rumors quest.dat oracles options
+
+all:	$(VARDAT) spec_levs quest_levs dungeon
+
+../util/makedefs:
+	(cd ../util ; make makedefs)
+
+../util/dgn_comp:
+	(cd ../util ; make dgn_comp)
+
+../util/lev_comp:
+	(cd ../util ; make lev_comp)
+
+../util/tile2x11:
+	(cd ../util ; make tile2x11)
+
+../util/tile2beos:
+	(cd ../util ; make tile2beos)
+
+../util/tile2png:
+	(cd ../util ; make tile2png)
+
+../util/magtile:
+	(cd ../util ; make magtile)
+
+../util/bigtile:
+	(cd ../util ; make bigtile)
+
+../util/txtmerge:
+	(cd ../util ; make txtmerge)
+
+../util/txtbg:
+	(cd ../util ; make txtbg)
+
+../util/mapmerge:
+	(cd ../util ; make mapmerge)
+
+../util/tile2bmp$(EXEEXT):
+	(cd ../util ; make tile2bmp$(EXEEXT))
+
+../util/uudecode$(EXEEXT):
+	(cd ../util ; make uudecode$(EXEEXT))
+
+x11tiles: ../util/tile2x11 $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+				$(srcdir)/../win/share/other.txt
+	../util/tile2x11 $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+				$(srcdir)/../win/share/other.txt
+
+x11tiles.map: ../util/mapmerge $(srcdir)/../win/share/monsters.map \
+				$(srcdir)/../win/share/objects.map $(srcdir)/../win/share/other.map
+	../util/mapmerge x11tiles.map $(srcdir)/../win/share/monsters.map \
+				$(srcdir)/../win/share/objects.map $(srcdir)/../win/share/other.map
+
+x11bigtiles:	../util/tile2x11 ../win/share/mon32.txt \
+		../win/share/obj32.txt ../win/share/oth32.txt
+	../util/tile2x11 -o x11bigtiles ../win/share/mon32.txt \
+		../win/share/obj32.txt ../win/share/oth32.txt
+
+x11bigtiles.map:	x11tiles.map
+	cp x11tiles.map x11bigtiles.map
+
+x11big3dtiles:	../util/tile2x11 ../win/share/mon3d.txt \
+		../win/share/obj3d.txt ../win/share/oth3d.txt
+	../util/tile2x11 -o x11big3dtiles ../win/share/mon3d.txt \
+		../win/share/obj3d.txt ../win/share/oth3d.txt
+
+x11big3dtiles.map:	x11tiles.map
+	cp x11tiles.map x11big3dtiles.map
+
+beostiles: ../util/tile2beos $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+			$(srcdir)/../win/share/other.txt
+	../util/tile2beos $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+			$(srcdir)/../win/share/other.txt
+
+gltile16.png: ../util/tile2png $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+				$(srcdir)/../win/share/other.txt
+	../util/tile2png -o $@ $(srcdir)/../win/share/monsters.txt $(srcdir)/../win/share/objects.txt \
+				$(srcdir)/../win/share/other.txt
+
+gltile16.map: ../util/mapmerge $(srcdir)/../win/share/monsters.map \
+				$(srcdir)/../win/share/objects.map $(srcdir)/../win/share/other.map
+	../util/mapmerge gltile16.map $(srcdir)/../win/share/monsters.map \
+				$(srcdir)/../win/share/objects.map $(srcdir)/../win/share/other.map
+
+gltile32.png:	../util/tile2png ../win/share/mon32.txt \
+		../win/share/obj32.txt ../win/share/oth32.txt
+	../util/tile2png -o $@ -t ../win/share/mon32.txt \
+		../win/share/obj32.txt ../win/share/oth32.txt
+
+gltile32.map:	gltile16.map
+	cp gltile16.map gltile32.map
+
+gltile64.png:	../util/tile2png ../win/share/mon3d.txt \
+		../win/share/obj3d.txt ../win/share/oth3d.txt
+	../util/tile2png -o $@ -t ../win/share/mon3d.txt \
+		../win/share/obj3d.txt ../win/share/oth3d.txt
+
+gltile64.map:	gltile16.map
+	cp gltile16.map gltile64.map
+
+glfont8.png:	../util/tile2png $(srcdir)/../win/gl/font8.txt
+	../util/tile2png -o $@ -f $(srcdir)/../win/gl/font8.txt
+
+glfont14.png:	../util/tile2png $(srcdir)/../win/gl/font14.txt
+	../util/tile2png -o $@ -f $(srcdir)/../win/gl/font14.txt
+
+glfont20.png:	../util/tile2png $(srcdir)/../win/gl/font20.txt
+	../util/tile2png -o $@ -f $(srcdir)/../win/gl/font20.txt
+
+glfont22.png:	../util/tile2png $(srcdir)/../win/gl/font22.txt
+	../util/tile2png -o $@ -f $(srcdir)/../win/gl/font22.txt
+
+gllogo.png:	../util/tile2png $(srcdir)/../win/gl/logo.txt
+	../util/tile2png -o $@ -a 28 $(srcdir)/../win/gl/logo.txt
+
+glrip.png:	../util/tile2png $(srcdir)/../win/gl/rip.txt
+	../util/tile2png -o $@ -a 20 $(srcdir)/../win/gl/rip.txt
+
+../win/share/monmag.txt:	../util/magtile $(srcdir)/../win/share/monsters.txt
+	../util/magtile $(srcdir)/
+
+../win/share/objmag.txt:	../util/magtile $(srcdir)/../win/share/objects.txt
+	../util/magtile $(srcdir)/
+
+../win/share/othmag.txt:	../util/magtile $(srcdir)/../win/share/other.txt
+	../util/magtile $(srcdir)/
+
+../win/share/monbig.txt:	../util/bigtile ../win/share/mon32-t.txt \
+				../win/share/obj32-t.txt \
+				../win/share/oth32-t.txt
+	../util/bigtile
+
+../win/share/objbig.txt:	../util/bigtile ../win/share/mon32-t.txt \
+				../win/share/obj32-t.txt \
+				../win/share/oth32-t.txt
+	../util/bigtile
+
+../win/share/othbig.txt:	../util/bigtile ../win/share/mon32-t.txt \
+				../win/share/obj32-t.txt \
+				../win/share/oth32-t.txt
+	../util/bigtile
+
+../win/share/mon32.txt:	../util/txtbg ../win/share/mon32-t.txt
+	../util/txtbg ../win/share/mon32-t.txt ../win/share/mon32.txt
+
+../win/share/obj32.txt:	../util/txtbg ../win/share/obj32-t.txt
+	../util/txtbg ../win/share/obj32-t.txt ../win/share/obj32.txt
+
+../win/share/oth32.txt:	../util/txtbg ../win/share/oth32-t.txt
+	../util/txtbg ../win/share/oth32-t.txt ../win/share/oth32.txt
+
+../win/share/mon32-t.txt:	../util/txtmerge ../win/share/monmag.txt \
+		$(srcdir)/../win/share/mon32mi.txt $(srcdir)/../win/share/mon32alg.txt \
+		$(srcdir)/../win/share/mon32aw.txt $(srcdir)/../win/share/mon32se.txt \
+		$(srcdir)/../win/share/palette.txt
+	../util/txtmerge -p $(srcdir)/../win/share/palette.txt ../win/share/mon32-t.txt \
+		../win/share/monmag.txt -b $(srcdir)/../win/share/mon32mi.txt \
+		-b $(srcdir)/../win/share/mon32se.txt -bff00ff $(srcdir)/../win/share/mon32alg.txt \
+		-bff00ff $(srcdir)/../win/share/mon32aw.txt 
+
+../win/share/obj32-t.txt:	../util/txtmerge ../win/share/objmag.txt \
+		$(srcdir)/../win/share/obj32mi.txt $(srcdir)/../win/share/obj32se.txt \
+		$(srcdir)/../win/share/obj32alg.txt $(srcdir)/../win/share/palette.txt
+	../util/txtmerge -p $(srcdir)/../win/share/palette.txt ../win/share/obj32-t.txt \
+		../win/share/objmag.txt -b $(srcdir)/../win/share/obj32mi.txt \
+		-b $(srcdir)/../win/share/obj32se.txt -bff00ff $(srcdir)/../win/share/obj32alg.txt
+
+../win/share/oth32-t.txt:	../util/txtmerge ../win/share/othmag.txt \
+		$(srcdir)/../win/share/oth32mi.txt $(srcdir)/../win/share/oth32se.txt \
+		$(srcdir)/../win/share/oth32alg.txt $(srcdir)/../win/share/palette.txt
+	../util/txtmerge -p $(srcdir)/../win/share/palette.txt ../win/share/oth32-t.txt \
+		../win/share/othmag.txt -b $(srcdir)/../win/share/oth32mi.txt \
+		-b $(srcdir)/../win/share/oth32se.txt -bff00ff $(srcdir)/../win/share/oth32alg.txt
+
+../win/share/mon3d.txt:	../util/txtmerge ../win/share/monbig.txt \
+		$(srcdir)/../win/share/mon3dmi.txt $(srcdir)/../win/share/palette.txt
+	../util/txtmerge -p $(srcdir)/../win/share/palette.txt ../win/share/mon3d.txt \
+		../win/share/monbig.txt -b $(srcdir)/../win/share/mon3dmi.txt
+
+../win/share/obj3d.txt:	../util/txtmerge ../win/share/objbig.txt
+	cp ../win/share/objbig.txt ../win/share/obj3d.txt
+
+../win/share/oth3d.txt:	../util/txtmerge ../win/share/othbig.txt \
+		$(srcdir)/../win/share/oth3dmi.txt $(srcdir)/../win/share/oth-2kmi.txt \
+		$(srcdir)/../win/share/oth3dse.txt $(srcdir)/../win/share/palette.txt
+	../util/txtmerge -p $(srcdir)/../win/share/palette.txt ../win/share/oth3d.txt \
+		../win/share/othbig.txt -b $(srcdir)/../win/share/oth3dmi.txt \
+		-b $(srcdir)/../win/share/oth-2kmi.txt -b $(srcdir)/../win/share/oth3dse.txt
+
+tiles.bmp: ../util/tile2bmp$(EXEEXT) $(srcdir)/../win/share/monsters.txt \
+		$(srcdir)/../win/share/objects.txt \
+		$(srcdir)/../win/share/other.txt
+	../util/tile2bmp $@
+#$(srcdir)/../win/share/monsters.txt \
+#		$(srcdir)/../win/share/objects.txt \
+#		$(srcdir)/../win/share/other.txt
+
+mnsel.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/mnsel.uu
+	../util/uudecode $(srcdir)/../win/win32/mnsel.uu
+
+mnselcnt.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/mnselcnt.uu
+	../util/uudecode $(srcdir)/../win/win32/mnselcnt.uu
+
+mnunsel.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/mnunsel.uu
+	../util/uudecode $(srcdir)/../win/win32/mnunsel.uu
+
+rip.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/rip.uu
+	../util/uudecode $(srcdir)/../win/win32/rip.uu
+
+petmark.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/petmark.uu
+	../util/uudecode $(srcdir)/../win/win32/petmark.uu
+
+NetHack.ico: ../util/uudecode$(EXEEXT) $(srcdir)/../sys/winnt/nhico.uu
+	../util/uudecode $(srcdir)/../sys/winnt/nhico.uu
+
+splash.bmp: ../util/uudecode$(EXEEXT) $(srcdir)/../win/win32/splash.uu
+	../util/uudecode $(srcdir)/../win/win32/splash.uu
+
+NetHack.ad: $(srcdir)/../win/X11/NetHack.ad
+	cp $(srcdir)/../win/X11/NetHack.ad NetHack.ad
+
+pet_mark.xbm: $(srcdir)/../win/X11/pet_mark.xbm
+	cp $(srcdir)/../win/X11/pet_mark.xbm pet_mark.xbm
+
+rip.xpm: $(srcdir)/../win/X11/rip.xpm
+	cp $(srcdir)/../win/X11/rip.xpm rip.xpm
+
+mapbg.xpm: $(srcdir)/../win/gnome/mapbg.xpm
+	cp $(srcdir)/../win/gnome/mapbg.xpm mapbg.xpm
+
+nhsplash.xpm: $(srcdir)/../win/Qt/nhsplash.xpm
+	cp $(srcdir)/../win/Qt/nhsplash.xpm nhsplash.xpm
+
+nethack.icns: $(srcdir)/../win/Qt/nhicns.uu
+	$(UUDECODE) $(srcdir)/../win/Qt/nhicns.uu
+
+Info.plist: $(srcdir)/../win/Qt/Info.pli
+	cp $(srcdir)/../win/Qt/Info.pli Info.plist
+
+../util/tile2img.ttp:
+	(cd ../util ; make tile2img.ttp)
+
+../util/xpm2img.ttp:
+	(cd ../util ; make xpm2img.ttp)
+nh16.img: ../util/tile2img.ttp $(srcdir)/../win/share/monsters.txt \
+                              $(srcdir)/../win/share/objects.txt $(srcdir)/../win/share/other.txt
+	../util/tile2img.ttp nh16.img
+
+rip.img: ../util/xpm2img.ttp
+	../util/xpm2img.ttp $(srcdir)/../win/X11/rip.xpm rip.img
+title.img:
+	# cp $(srcdir)/../win/gem/title.img title.img
+	$(UUDECODE) $(srcdir)/../win/gem/title.uu
+
+GEM_RSC.RSC:
+	# cp $(srcdir)/../win/gem/GEM_RSC.RSC GEM_RSC.RSC
+	$(UUDECODE) $(srcdir)/../win/gem/gem_rsc.uu
+
+data:	data.base ../util/makedefs
+	../util/makedefs -d
+
+rumors:	rumors.tru rumors.fal ../util/makedefs
+	../util/makedefs -r
+
+quest.dat:	quest.txt ../util/makedefs
+	../util/makedefs -q
+
+oracles:	oracles.txt ../util/makedefs
+	../util/makedefs -h
+
+# note: 'options' should have already been made when include/date.h was created
+options:	../util/makedefs
+	../util/makedefs -v
+
+
+spec_levs: ../util/lev_comp \
+	bigroom.des castle.des \
+	endgame.des gehennom.des knox.des \
+	medusa.des \
+	mines.des oracle.des \
+	sokoban.des tower.des yendor.des
+	../util/lev_comp $(srcdir)/bigroom.des
+	../util/lev_comp $(srcdir)/castle.des
+	../util/lev_comp $(srcdir)/endgame.des
+	../util/lev_comp $(srcdir)/gehennom.des
+	../util/lev_comp $(srcdir)/knox.des
+	../util/lev_comp $(srcdir)/medusa.des
+	../util/lev_comp $(srcdir)/mines.des
+	../util/lev_comp $(srcdir)/oracle.des
+	../util/lev_comp $(srcdir)/sokoban.des
+	../util/lev_comp $(srcdir)/tower.des
+	../util/lev_comp $(srcdir)/yendor.des
+	touch spec_levs
+
+quest_levs: ../util/lev_comp \
+	Arch.des Barb.des Caveman.des Healer.des Knight.des \
+	Monk.des Priest.des Ranger.des Rogue.des Samurai.des \
+	Tourist.des Valkyrie.des Wizard.des
+	../util/lev_comp $(srcdir)/Arch.des
+	../util/lev_comp $(srcdir)/Barb.des
+	../util/lev_comp $(srcdir)/Caveman.des
+	../util/lev_comp $(srcdir)/Healer.des
+	../util/lev_comp $(srcdir)/Knight.des
+	../util/lev_comp $(srcdir)/Monk.des
+	../util/lev_comp $(srcdir)/Priest.des
+	../util/lev_comp $(srcdir)/Ranger.des
+	../util/lev_comp $(srcdir)/Rogue.des
+	../util/lev_comp $(srcdir)/Samurai.des
+	@if egrep -s tourists options > /dev/null ; then \
+	echo ../util/lev_comp $(srcdir)/Tourist.des ; ../util/lev_comp $(srcdir)/Tourist.des ; \
+	else rm -f Tou-goal.lev Tou-fil?.lev Tou-loca.lev Tou-strt.lev ; fi
+	../util/lev_comp $(srcdir)/Valkyrie.des
+	../util/lev_comp $(srcdir)/Wizard.des
+	touch quest_levs
+
+dungeon: $(srcdir)/dungeon.def ../util/makedefs ../util/dgn_comp
+	../util/makedefs -e
+	../util/dgn_comp dungeon.pdf
+
+spotless:
+	-rm -f spec_levs quest_levs *.lev $(VARDAT) dungeon dungeon.pdf
+	-rm -f nhdat x11tiles beostiles pet_mark.xbm rip.xpm mapbg.xpm
+	-rm -f rip.img GEM_RSC.RSC title.img nh16.img NetHack.ad
+	-rm -f options guioptions ttyoptions
+	-rm -f rip.bmp mnselcnt.bmp mnunsel.bmp tiles.bmp nethack.ico splash.bmp mnsel.bmp petmark.bmp
+	-rm -f ../win/share/monmag.txt ../win/share/mon32.txt
+	-rm -f ../win/share/objmag.txt ../win/share/obj32.txt
+	-rm -f ../win/share/othmag.txt ../win/share/oth32.txt
+	-rm -f ../win/share/monbig.txt ../win/share/mon3d.txt
+	-rm -f ../win/share/objbig.txt ../win/share/obj3d.txt
+	-rm -f ../win/share/othbig.txt ../win/share/oth3d.txt
+	-rm -f ../win/share/mon32-t.txt
+	-rm -f ../win/share/obj32-t.txt
+	-rm -f ../win/share/oth32-t.txt
+	-rm -f Makefile
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Makefile.doc nethack-autoconf/sys/autoconf/Makefile.doc
--- nethack-3.4.3/sys/autoconf/Makefile.doc	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Makefile.doc	2009-01-16 14:27:49.000000000 +0100
@@ -0,0 +1,105 @@
+#	NetHack Makefile.
+#       @configure_input@
+#       SCCS Id: @(#)Makefile.doc       3.4     1996/03/23
+
+VPATH=@srcdir@
+srcdir=@srcdir@
+
+# for Atari
+# SHELL=E:/GEMINI2/MUPFEL.TTP
+
+GUIDEBOOK = Guidebook		# regular ASCII file
+#GUIDEBOOK = Guidebook.ps	# PostScript file
+#GUIDEBOOK = Guidebook.dvi	# TeX device-independent file
+
+# Some versions of col need -x to keep them from converting spaces to tabs;
+# some versions of col don't do the conversion by default and don't
+# recognize the option.  Sigh.
+COLCMD = col -bx
+#COLCMD = col -b
+
+# The command to use to generate a PostScript file
+# PSCMD = ditroff | psdit
+PSCMD = groff -Wall -Tps
+
+# Use the "cat" GUIDECMD if groff and/or tbl are not installed
+# Not appropriate for creating Guidebook.txt.
+# DOS w/o cat users can use "type"
+# GUIDECMD = cat Guidebook.txt
+# The following works better with groff-1.18, eg on Linux
+# GUIDECMD = tbl tmac.n Guidebook.mn | nroff -c -Tascii | $(COLCMD)
+# GUIDECMD = tbl tmac.n Guidebook.mn | groff -Wall -mtty-char -Tascii -P-u -P-b 
+GUIDECMD = tbl $(srcdir)/tmac.n $(srcdir)/Guidebook.mn | nroff -c -Tascii | $(COLCMD)
+
+# the basic guidebook
+Guidebook:	Guidebook.mn
+	$(GUIDECMD) > Guidebook
+
+# Fancier output for those with ditroff, psdit and a PostScript printer.
+Guidebook.ps:	Guidebook.mn
+	tbl tmac.n Guidebook.mn | $(PSCMD) > Guidebook.ps
+
+# Guidebook.tex is the same as Guidebook.mn but formatted with LaTeX.
+# - The invocation command for LaTeX may vary in different installations.
+# - To print Guidebook.dvi you need to use a suitable dvi-driver.
+Guidebook.dvi:	Guidebook.tex
+	latex Guidebook.tex
+# Or for those with groff
+# Guidebook.dvi:	Guidebook.mn
+#	tbl tmac.n Guidebook.mn | groff -Wall -Tdvi > Guidebook.dvi
+
+GAME    = nethack
+MANDIR	= /usr/man/man6
+MANEXT	= 6
+
+# manual installation for most BSD-style systems
+GAMEMANCREATE = cp $(GAME).6
+LEVMANCREATE = cp lev_comp.6
+DGNMANCREATE = cp dgn_comp.6
+RCVRMANCREATE = cp recover.6
+DLBMANCREATE = cp dlb.6
+# manual installation for most SYSV-style systems
+# and for man files readable in less (eg dos DJGPP+GNU)
+# GAMEMANCREATE = groff -Wall -mtty-char -Tascii -man $(GAME).6 >
+# LEVMANCREATE = groff -Wall -mtty-char -Tascii -man lev_comp.6 >
+# DGNMANCREATE = groff -Wall -mtty-char -Tascii -man dgn_comp.6 >
+# RCVRMANCREATE = groff -Wall -mtty-char -Tascii -man recover.6 >
+# DLBMANCREATE = groff -Wall -mtty-char -Tascii -man dlb.6 >
+
+manpages:
+	-$(GAMEMANCREATE) $(MANDIR)/$(GAME).$(MANEXT)
+	-$(LEVMANCREATE) $(MANDIR)/lev_comp.$(MANEXT)
+	-$(DGNMANCREATE) $(MANDIR)/dgn_comp.$(MANEXT)
+	-$(RCVRMANCREATE) $(MANDIR)/recover.$(MANEXT)
+	-$(DLBMANCREATE) $(MANDIR)/dlb.$(MANEXT)
+
+# manual creation for distribution
+DISTRIB = Guidebook.txt $(GAME).txt lev_comp.txt dgn_comp.txt recover.txt dlb.txt
+
+distrib: $(DISTRIB)
+	@echo "Plain text documentation is up to date."
+
+Guidebook.txt	: Guidebook.mn tmac.n
+	$(GUIDECMD) > Guidebook.txt
+$(GAME).txt	: $(GAME).6
+	nroff -man $(GAME).6 | $(COLCMD) > $(GAME).txt
+lev_comp.txt	: lev_comp.6
+	nroff -man lev_comp.6 | $(COLCMD) > lev_comp.txt
+dgn_comp.txt	: dgn_comp.6
+	nroff -man dgn_comp.6 | $(COLCMD) > dgn_comp.txt
+recover.txt	: recover.6
+	nroff -man recover.6 | $(COLCMD) > recover.txt
+dlb.txt		: dlb.6
+	nroff -man dlb.6 | $(COLCMD) > dlb.txt
+
+
+clean:
+	-rm -f Guidebook.aux Guidebook.log
+
+spotless: clean
+	-rm -f Guidebook Guidebook.ps Guidebook.dvi
+	-rm -f Makefile
+
+maintainer-clean: spotless
+	-rm -f $(DISTRIB)
+#	-rm -f Makefile
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Makefile.src nethack-autoconf/sys/autoconf/Makefile.src
--- nethack-3.4.3/sys/autoconf/Makefile.src	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Makefile.src	2009-01-16 14:27:49.000000000 +0100
@@ -0,0 +1,797 @@
+#	NetHack Makefile.
+#       @configure_input@
+#	SCCS Id: @(#)Makefile.src	3.4	2002/03/02
+
+VPATH = @srcdir@
+srcdir = @srcdir@
+
+SYSTEM = @SYSTEM@
+EXEEXT = @EXEEXT@
+
+SHELL=/bin/sh
+
+LINK=$(CC)
+
+# for UNIX systems
+SYSUNIXSRC = $(srcdir)/../sys/share/ioctl.c $(srcdir)/../sys/share/unixtty.c \
+	$(srcdir)/../sys/unix/unixmain.c $(srcdir)/../sys/unix/unixunix.c \
+	$(srcdir)/../sys/unix/unixres.c
+SYSUNIXOBJ = ioctl.o unixmain.o unixtty.o unixunix.o unixres.o
+# for Microsoft Window systems
+SYSMSWINSRC = $(srcdir)/../sys/winnt/nttty.c $(srcdir)/../sys/winnt/winnt.c \
+	$(srcdir)/../sys/share/pcsys.c $(srcdir)/../sys/share/pcunix.c \
+	$(srcdir)/../sys/share/pcmain.c $(srcdir)/../sys/share/random.c \
+	$(srcdir)/../sys/share/nhlan.c $(srcdir)/../sys/winnt/ntsound.c
+SYSMSWINOBJ = nttty.o winnt.o pcsys.o pcunix.o pcmain.o random.o nhlan.o ntsound.o
+#
+SYSSRC=@SYSSRC@
+SYSOBJ=@SYSOBJ@
+
+CC = @CC@ -DAUTOCONF
+WINDRES = @WINDRES@
+
+CFLAGS = -Wall -I../include -I$(srcdir)/../include @CFLAGS@ #-fbounds-checking #-fprofile-arcs -ftest-coverage
+LFLAGS = @LFLAGS@ #-fbounds-checking
+
+# Only used for the Gnome interface.
+GNOMEINC=`gnome-config gnome --cflags` -I$(srcdir)/../win/gnome
+
+# QT windowing system
+QTLIBDIR=$(QTDIR)/lib
+QTINCDIR=$(QTDIR)/include
+QTBINDIR=$(QTDIR)/bin
+KDELIBDIR=/usr/lib
+KDEINCDIR=/usr/include/kde
+
+CXXFLAGS = $(CFLAGS) -I. -I$(QTINCDIR)
+CXX=g++
+
+# files for a straight tty port using no native windowing system
+WINTTYSRC = $(srcdir)/../win/tty/getline.c $(srcdir)/../win/tty/termcap.c $(srcdir)/../win/tty/topl.c \
+	$(srcdir)/../win/tty/wintty.c 
+WINTTYOBJ = getline.o termcap.o topl.o wintty.o 
+#
+# files for an X11 port
+# (tile.c is included in the defn. for WINCSRC, below)
+WINX11SRC = $(srcdir)/../win/X11/Window.c $(srcdir)/../win/X11/dialogs.c $(srcdir)/../win/X11/winX.c \
+	$(srcdir)/../win/X11/winmap.c  $(srcdir)/../win/X11/winmenu.c $(srcdir)/../win/X11/winmesg.c \
+	$(srcdir)/../win/X11/winmisc.c $(srcdir)/../win/X11/winstat.c $(srcdir)/../win/X11/wintext.c \
+	$(srcdir)/../win/X11/winval.c
+WINX11OBJ = Window.o dialogs.o winX.o winmap.o winmenu.o winmesg.o \
+	winmisc.o winstat.o wintext.o winval.o nhwin.a
+#
+# Files for a Qt port
+#
+WINQTSRC = $(srcdir)/../win/Qt/qt_win.cpp $(srcdir)/../win/Qt/qt_clust.cpp $(srcdir)/../win/Qt/qttableview.cpp
+WINQTOBJ = qt_win.o qt_clust.o qttableview.o nhwin.a
+#
+# Files for a Gnome port
+#
+WINGNOMESRC = $(srcdir)/../win/gnome/gnaskstr.c $(srcdir)/../win/gnome/gnbind.c \
+      $(srcdir)/../win/gnome/gnglyph.c $(srcdir)/../win/gnome/gnmain.c $(srcdir)/../win/gnome/gnmap.c \
+      $(srcdir)/../win/gnome/gnmenu.c $(srcdir)/../win/gnome/gnmesg.c $(srcdir)/../win/gnome/gnopts.c \
+      $(srcdir)/../win/gnome/gnplayer.c $(srcdir)/../win/gnome/gnsignal.c \
+      $(srcdir)/../win/gnome/gnstatus.c $(srcdir)/../win/gnome/gntext.c $(srcdir)/../win/gnome/gnyesno.c \
+      $(srcdir)/../win/gnome/gnworn.c
+WINGNOMEOBJ = gnaskstr.o gnbind.o gnglyph.o gnmain.o gnmap.o gnmenu.o \
+      gnmesg.o gnopts.o gnplayer.o gnsignal.o gnstatus.o gntext.o \
+      gnyesno.o gnworn.o nhwin.a
+#
+# Files for a Gem port
+WINGEMSRC = $(srcdir)/../win/gem/wingem.c $(srcdir)/../win/gem/wingem1.c $(srcdir)/../win/gem/load_img.c \
+	$(srcdir)/../win/gem/gr_rect.c
+WINGEMOBJ = wingem.o wingem1.o load_img.o gr_rect.o nhwin.a
+#
+# Files for a BeOS InterfaceKit port -- not ready for prime time
+WINBESRC =
+WINBEOBJ =
+#WINBESRC = $(srcdir)/../win/BeOS/winbe.cpp $(srcdir)/../win/BeOS/NHWindow.cpp \
+#     $(srcdir)/../win/BeOS/NHMenuWindow.cpp $(srcdir)/../win/BeOS/NHMapWindow.cpp
+#WINBEOBJ = winbe.o NHWindow.o NHMenuWindow.o NHMapWindow.o nhwin.a
+#
+# files for a native MS-Windows port
+# (tile.c is included in the defn. for WINCSRC, below)
+WINMSSRC = $(srcdir)/../win/win32/mswproc.c $(srcdir)/../win/win32/winhack.c \
+	 $(srcdir)/../win/win32/mhdlg.c $(srcdir)/../win/win32/mhaskyn.c \
+	 $(srcdir)/../win/win32/mhfont.c $(srcdir)/../win/win32/mhinput.c \
+         $(srcdir)/../win/win32/mhmain.c $(srcdir)/../win/win32/mhmsgwnd.c \
+	 $(srcdir)/../win/win32/mhsplash.c $(srcdir)/../win/win32/mhstatus.c \
+	 $(srcdir)/../win/win32/mhtext.c $(srcdir)/../win/win32/mhmenu.c \
+         $(srcdir)/../win/win32/mhmap.c $(srcdir)/../win/win32/mhrip.c
+WINMSOBJ = mswproc.o winhack.o mhdlg.o mhaskyn.o mhfont.o mhinput.o mhmain.o \
+	mhmsgwnd.o mhsplash.o mhstatus.o mhtext.o mhmenu.o mhmap.o mhrip.o \
+	winres.o nhwin.a
+WINMSCFLAGS=-I$(srcdir)/../win/win32 -D_WIN32_IE=0x0400
+
+WINSRC = @WINSRC@
+WINOBJ = @WINOBJ@
+WINTTYLIB = @WINTTYLIB@
+WINX11LIB = -lXaw -lXmu -lXext -lXt -lX11
+
+# libraries for Qt
+WINQTLIB = -L$(QTLIBDIR) -lqt
+#
+# libraries for KDE (with Qt)
+WINKDELIB = -lkdecore -lkdeui -lXext
+#
+# libraries for Gnome
+WINGNOMELIB = -lgnomeui -lgnome -lart_lgpl -lgtk -lgdk -lpopt
+#
+# libraries for Gem port
+WINGEMLIB = -le_gem -lgem
+#
+# libraries for BeOS
+WINBELIB = -lbe
+# libraries for native MS-Windows
+WINMSLIB = -lcomctl32 -lgdi32
+
+WINLIB = @WINLIB@
+
+LIBS =
+
+# make NetHack
+GAME     = nethack$(EXEEXT)
+
+RANDOBJ =
+
+
+# used by `make depend' to reconstruct this Makefile; you shouldn't need this
+AWK	= @AWK@
+
+MAKEDEFS = ../util/makedefs
+
+# timestamp files to reduce `make' overhead and shorten .o dependency lists
+CONFIG_H = ../src/config.h-t
+HACK_H	= ../src/hack.h-t
+
+# all .c that are part of the main NetHack program and are not operating- or
+# windowing-system specific
+HACKCSRC = $(srcdir)/allmain.c $(srcdir)/alloc.c $(srcdir)/apply.c \
+	$(srcdir)/artifact.c $(srcdir)/attrib.c $(srcdir)/ball.c \
+	$(srcdir)/bones.c $(srcdir)/botl.c $(srcdir)/cmd.c $(srcdir)/dbridge.c \
+	$(srcdir)/decl.c $(srcdir)/detect.c $(srcdir)/dig.c $(srcdir)/display.c\
+	$(srcdir)/dlb.c $(srcdir)/do.c $(srcdir)/do_name.c $(srcdir)/do_wear.c \
+	$(srcdir)/dog.c $(srcdir)/dogmove.c $(srcdir)/dokick.c \
+	$(srcdir)/dothrow.c $(srcdir)/drawing.c $(srcdir)/dungeon.c \
+	$(srcdir)/eat.c $(srcdir)/end.c $(srcdir)/engrave.c $(srcdir)/exper.c \
+	$(srcdir)/explode.c $(srcdir)/extralev.c $(srcdir)/files.c \
+	$(srcdir)/fountain.c $(srcdir)/hack.c $(srcdir)/hacklib.c \
+	$(srcdir)/invent.c $(srcdir)/light.c $(srcdir)/lock.c $(srcdir)/mail.c \
+	$(srcdir)/makemon.c $(srcdir)/mapglyph.c $(srcdir)/mcastu.c \
+	$(srcdir)/mhitm.c $(srcdir)/mhitu.c $(srcdir)/minion.c \
+	$(srcdir)/mklev.c $(srcdir)/mkmap.c $(srcdir)/mkmaze.c \
+	$(srcdir)/mkobj.c $(srcdir)/mkroom.c $(srcdir)/mon.c \
+	$(srcdir)/mondata.c $(srcdir)/monmove.c $(srcdir)/monst.c \
+	$(srcdir)/mplayer.c $(srcdir)/mthrowu.c $(srcdir)/muse.c \
+	$(srcdir)/music.c $(srcdir)/o_init.c $(srcdir)/objects.c \
+	$(srcdir)/objnam.c $(srcdir)/options.c $(srcdir)/pager.c \
+	$(srcdir)/pickup.c $(srcdir)/pline.c $(srcdir)/polyself.c \
+	$(srcdir)/potion.c $(srcdir)/pray.c $(srcdir)/priest.c \
+	$(srcdir)/quest.c $(srcdir)/questpgr.c $(srcdir)/read.c \
+	$(srcdir)/rect.c $(srcdir)/region.c $(srcdir)/restore.c $(srcdir)/rip.c\
+	$(srcdir)/rnd.c $(srcdir)/role.c $(srcdir)/rumors.c $(srcdir)/save.c \
+	$(srcdir)/shk.c $(srcdir)/shknam.c $(srcdir)/sit.c $(srcdir)/sounds.c \
+	$(srcdir)/sp_lev.c $(srcdir)/spell.c $(srcdir)/steal.c \
+	$(srcdir)/steed.c $(srcdir)/teleport.c $(srcdir)/timeout.c \
+	$(srcdir)/topten.c $(srcdir)/track.c $(srcdir)/trap.c \
+	$(srcdir)/u_init.c $(srcdir)/uhitm.c $(srcdir)/vault.c \
+	$(srcdir)/version.c $(srcdir)/vision.c $(srcdir)/weapon.c \
+	$(srcdir)/were.c $(srcdir)/wield.c $(srcdir)/windows.c \
+	$(srcdir)/wizard.c $(srcdir)/worm.c $(srcdir)/worn.c $(srcdir)/write.c \
+	$(srcdir)/zap.c
+
+# all operating-system-dependent .c (for dependencies and such)
+SYSCSRC = $(srcdir)/../sys/share/nhlan.c $(srcdir)/../sys/share/ioctl.c \
+	$(srcdir)/../sys/share/pcmain.c $(srcdir)/../sys/share/pcsys.c \
+	$(srcdir)/../sys/share/pctty.c $(srcdir)/../sys/share/pcunix.c \
+	$(srcdir)/../sys/share/random.c $(srcdir)/../sys/share/unixtty.c \
+	$(srcdir)/../sys/atari/tos.c $(srcdir)/../sys/be/bemain.c \
+	$(srcdir)/../sys/unix/unixmain.c $(srcdir)/../sys/unix/unixres.c \
+	$(srcdir)/../sys/unix/unixunix.c $(srcdir)/../sys/winnt/nttty.c \
+	$(srcdir)/../sys/winnt/winnt.c
+
+# generated source files (tile.c is handled separately)
+GENCSRC = monstr.c vis_tab.c  #tile.c
+
+# all windowing-system-dependent .c (for dependencies and such)
+WINCSRC = $(WINTTYSRC) $(WINX11SRC) $(WINGNOMESRC) $(WINGEMSRC) \
+	$(WINPROXYSRC) $(WINGLSRC) $(WINMSSRC) tile.c
+# all windowing-system-dependent .cpp (for dependencies and such)
+WINCXXSRC = $(WINQTSRC) $(WINBESRC)
+
+# .c files for this version (for date.h)
+VERSOURCES = $(HACKCSRC) $(SYSSRC) $(WINSRC) $(GENCSRC)
+
+# .c files for all versions using this Makefile (for lint and tags)
+CSOURCES = $(HACKCSRC) $(SYSSRC) $(WINCSRC) $(GENCSRC)
+
+
+# all .h files except date.h, onames.h, pm.h, and vis_tab.h which would
+# cause dependency loops if run through "make depend"
+# and dgn_comp.h, dgn_file.h, lev_comp.h, special level & dungeon files.
+#
+HACKINCL = align.h amiconf.h artifact.h artilist.h attrib.h beconf.h color.h \
+	config.h config1.h coord.h decl.h def_os2.h display.h dlb.h dungeon.h \
+	edog.h emin.h engrave.h epri.h eshk.h extern.h flag.h func_tab.h \
+	global.h autoconf.h hack.h lev.h macconf.h mfndpos.h micro.h mkroom.h \
+	monattk.h mondata.h monflag.h monst.h monsym.h obj.h objclass.h \
+	os2conf.h patchlevel.h pcconf.h permonst.h prop.h rect.h region.h rm.h \
+	sp_lev.h spell.h system.h tcap.h timeout.h tosconf.h tradstdc.h \
+	trampoli.h trap.h unixconf.h vault.h vision.h vmsconf.h wintty.h \
+	winX.h winprocs.h wintype.h you.h youprop.h
+
+HSOURCES = $(HACKINCL) date.h onames.h pm.h vis_tab.h\
+		lev_comp.h dgn_comp.h dgn_file.h
+
+# the following .o's _must_ be made before any others (for makedefs)
+FIRSTOBJ = monst.o objects.o alloc.o
+
+HOBJ = $(FIRSTOBJ) allmain.o apply.o artifact.o attrib.o ball.o \
+	bones.o botl.o cmd.o dbridge.o decl.o detect.o dig.o display.o dlb.o \
+	do.o do_name.o do_wear.o dog.o dogmove.o dokick.o dothrow.o \
+	drawing.o dungeon.o eat.o end.o engrave.o exper.o explode.o \
+	extralev.o files.o fountain.o hack.o hacklib.o invent.o light.o \
+	lock.o mail.o makemon.o mapglyph.o mcastu.o mhitm.o mhitu.o \
+	minion.o mklev.o mkmap.o \
+	mkmaze.o mkobj.o mkroom.o mon.o mondata.o monmove.o monstr.o \
+	mplayer.o mthrowu.o muse.o music.o o_init.o objnam.o options.o \
+	pager.o pickup.o pline.o polyself.o potion.o pray.o priest.o \
+	quest.o questpgr.o read.o rect.o region.o restore.o rip.o rnd.o \
+	role.o rumors.o save.o shk.o shknam.o sit.o sounds.o sp_lev.o spell.o \
+	steal.o steed.o teleport.o timeout.o topten.o track.o trap.o u_init.o \
+	uhitm.o vault.o vision.o vis_tab.o weapon.o were.o wield.o windows.o \
+	wizard.o worm.o worn.o write.o zap.o \
+	$(RANDOBJ) $(SYSOBJ) $(WINOBJ) version.o
+# the .o files from the HACKCSRC, SYSSRC, and WINSRC lists
+
+$(GAME):	$(SYSTEM)
+	@echo "$(GAME) is up to date."
+
+Sysunix:	$(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB) $(LIBS)
+	@touch Sysunix
+
+Syswinnt:	$(HOBJ) @EXTRA_UNSHARE@ Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB) $(LIBS)
+	@touch Syswinnt
+
+Sys3B2:	$(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB) -lmalloc
+	@touch Sys3B2
+
+Sysatt:	$(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LD) $(LFLAGS) /lib/crt0s.o /lib/shlib.ifile -o $(GAME) $(HOBJ)
+	@touch Sysatt
+
+Systos:	$(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB)
+	@touch Systos
+
+SysV-AT:	DUMB.Setup $(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB)
+	@touch SysV-AT
+
+SysBe: $(HOBJ) Makefile
+	@echo "Loading ..."
+	@$(LINK) $(LFLAGS) -o $(GAME) $(HOBJ) $(WINLIB) $(LIBS)
+	@xres -o $(GAME) $(srcdir)/../win/BeOS/nethack.rsrc
+	@mimeset -f $(GAME)
+	@touch SysBe
+
+DUMB.Setup:	../include/extern.h
+	cp ../include/extern.h ../include/extern.h.BAK
+	cat ../include/extern.h | \
+		sed -e '/^E\ int\ /!b' \
+			-e '/[^;/ 	]$$/N' \
+			-e '/[(][*]occupation[)]/b' \
+			-e '/[(][*]afternmv[)]/b' \
+			-e '/float_down/b' \
+			-e '/done1/b' \
+			-e '/identify/b' \
+			-e '/Hear_again/b' \
+			-e '/hangup/b' \
+			-e 's/^\(.*\)$$/\/\* \1 \/\*\*\//' | \
+		sed -e '/^E\ void\ /!b' \
+			-e '/[^;/ 	]$$/N' \
+			-e 's/^\(.*\)$$/\/\* \1 \/\*\*\//' \
+				>../include/extern.DUMB
+	cp ../include/extern.DUMB ../include/extern.h
+	@touch DUMB.Setup
+
+.SUFFIXES:	.dll .o
+
+.o.dll:
+	@NHKEYDLL_GCC@$(CC) $(LFLAGS) -shared -Wl,--export-all-symbols \
+	@NHKEYDLL_GCC@	-Wl,--add-stdcall-alias -o $@ $<
+
+nhdefkey.o: $(srcdir)/../sys/winnt/nhdefkey.c
+	$(CC) $(CFLAGS) -DBUILD_DLL -c $(srcdir)/../sys/winnt/nhdefkey.c
+
+nh340key.o: $(srcdir)/../sys/winnt/nh340key.c
+	$(CC) $(CFLAGS) -DBUILD_DLL -c $(srcdir)/../sys/winnt/nh340key.c
+
+nhraykey.o: $(srcdir)/../sys/winnt/nhraykey.c
+	$(CC) $(CFLAGS) -DBUILD_DLL -c $(srcdir)/../sys/winnt/nhraykey.c
+
+all:	$(GAME)
+
+#	dependencies for makedefs and its outputs, which the util
+#	Makefile is responsible for keeping up to date
+#
+
+# special rules, to force update of makedefs, real dependencies should be
+# below in the 'make depend' output.
+monst.o:
+	$(CC) $(CFLAGS) -c $(srcdir)/monst.c
+	@rm -f $(MAKEDEFS)
+
+objects.o:
+	$(CC) $(CFLAGS) -c $(srcdir)/objects.c
+	@rm -f $(MAKEDEFS)
+
+# Qt windowport meta-object-compiler output
+qt_kde0.moc: ../include/qt_kde0.h
+	$(QTBINDIR)/moc -o qt_kde0.moc ../include/qt_kde0.h
+
+qt_win.moc: ../include/qt_win.h
+	$(QTBINDIR)/moc -o qt_win.moc ../include/qt_win.h
+
+qttableview.moc: ../include/qttableview.h
+	$(QTDIR)/bin/moc -o qttableview.moc ../include/qttableview.h
+
+# Microsoft Window's native port resources
+../dat/tiles.bmp:
+	(cd ../util; make tile2bmp$(EXEEXT))
+	(cd ../dat; $(MAKE) tiles.bmp)
+
+winres.o: $(srcdir)/../win/win32/winhack.rc ../dat/tiles.bmp
+	(cd ../util; make uudecode$(EXEEXT))
+	(cd ../dat; $(MAKE) mnsel.bmp mnselcnt.bmp mnunsel.bmp rip.bmp)
+	(cd ../dat; $(MAKE) petmark.bmp NetHack.ico splash.bmp)
+	$(WINDRES) -o$@ --include-dir=../dat -DNODEBUG -i \
+		$(srcdir)/../win/win32/winhack.rc
+
+# NetHack windows library for modules needed by more than one windows
+# interface.
+nhwin.a:	tile.o
+	$(AR) cr nhwin.a tile.o
+
+$(MAKEDEFS): ../util/makedefs.c  $(CONFIG_H) ../include/permonst.h \
+		../include/objclass.h ../include/monsym.h \
+		../include/artilist.h ../include/dungeon.h ../include/obj.h \
+		../include/monst.h ../include/you.h ../include/flag.h \
+		../include/dlb.h ../include/patchlevel.h ../include/qtext.h
+	@( cd ../util ; $(MAKE) makedefs)
+
+../include/onames.h: $(MAKEDEFS)
+	@( cd ../util ; $(MAKE) ../include/onames.h )
+../include/pm.h: $(MAKEDEFS)
+	@( cd ../util ; $(MAKE) ../include/pm.h )
+monstr.c: $(MAKEDEFS)
+	@( cd ../util ; $(MAKE) ../src/monstr.c )
+../include/vis_tab.h: $(MAKEDEFS)
+	@( cd ../util ; $(MAKE) ../include/vis_tab.h )
+# makedefs -z makes both vis_tab.h and vis_tab.c, but writes the .h first
+vis_tab.c: ../include/vis_tab.h
+tile.c: $(srcdir)/../win/share/tilemap.c $(HACK_H)
+	@( cd ../util ; $(MAKE) ../src/tile.c )
+
+$(srcdir)/../win/gnome/gn_rip.h: $(srcdir)/../win/X11/rip.xpm
+	cp $(srcdir)/../win/X11/rip.xpm $(srcdir)/../win/gnome/gn_rip.h
+
+#	date.h should be remade any time any of the source or include code
+#	is modified.  Unfortunately, this would make the contents of this
+#	file far more complex.  Since "hack.h" depends on most of the include
+#	files, we kludge around this by making date.h dependent on hack.h,
+#	even though it doesn't include this file.
+#
+#	hack.h depends on makedefs' output, so we know makedefs will be
+#	up to date before being executed
+../include/date.h:	$(VERSOURCES) $(HACK_H)
+	../util/makedefs -v
+
+
+lint:
+# lint cannot have -p here because (i) capitals are meaningful:
+# [Ww]izard, (ii) identifiers may coincide in the first six places:
+# doweararm() versus dowearring().
+# _flsbuf comes from <stdio.h>, a bug in the system libraries.
+	@echo lint -axbh -DLINT ...
+	@lint -axbh -I../include -I$(srcdir)/../include -DLINT $(CSOURCES) | sed '/_flsbuf/d'
+
+
+tags: $(CSOURCES)
+	@echo ctags -tw ...
+	@ctags -tw $(CSOURCES)
+	@( cd ../include ; ctags -tw $(HSOURCES) )
+	@( cd ../util ; $(MAKE) tags )
+
+clean:
+	-rm -f *.o nhwin.a *.dll $(HACK_H) $(CONFIG_H)
+
+spotless: clean
+	-rm -f a.out core $(GAME) Sys* @EXTRA_UNSHARE@
+	-rm -f ../include/date.h ../include/onames.h ../include/pm.h
+	-rm -f monstr.c ../include/vis_tab.h vis_tab.c tile.c *.moc
+	-rm -f $(srcdir)/../win/gnome/gn_rip.h
+	-rm -f ../include/filename.h
+	-rm -f Makefile
+
+depend: ../sys/autoconf/depend.awk \
+		$(SYSCSRC) $(WINCSRC) $(WINCXXSRC) $(GENCSRC) $(HACKCSRC)
+	@cp Makefile Makefile.bak
+	@sed -n '1,/^# DO NOT DELETE THIS LINE OR CHANGE ANYTHING BEYOND IT/p' \
+		< Makefile.bak > Makefile
+	@echo '' >> Makefile
+	@$(AWK) -f ../sys/autoconf/depend.awk ../include/*.h \
+		$(srcdir)/../include/*.h $(SYSCSRC) $(WINCSRC) $(WINCXXSRC) \
+		$(GENCSRC) $(HACKCSRC) >> Makefile
+	@echo '# DEPENDENCIES MUST END AT END OF FILE' >> Makefile
+	@echo '# IF YOU PUT STUFF HERE IT WILL GO AWAY' >> Makefile
+	@echo '# see make depend above' >> Makefile
+	- diff Makefile.bak Makefile
+	@rm -f Makefile.bak
+
+# DO NOT DELETE THIS LINE OR CHANGE ANYTHING BEYOND IT
+
+# config.h timestamp
+$(CONFIG_H): ../include/config.h ../include/config1.h ../include/tradstdc.h \
+		../include/global.h ../include/coord.h ../include/vmsconf.h \
+		../include/system.h ../include/unixconf.h ../include/os2conf.h \
+		../include/micro.h ../include/pcconf.h ../include/tosconf.h \
+		../include/amiconf.h ../include/macconf.h ../include/beconf.h \
+		../include/wceconf.h ../include/ntconf.h ../include/nhlan.h \
+		../include/autoconf.h
+	touch $(CONFIG_H)
+# hack.h timestamp
+$(HACK_H): ../include/hack.h $(CONFIG_H) ../include/align.h \
+		../include/dungeon.h ../include/monsym.h ../include/mkroom.h \
+		../include/objclass.h ../include/youprop.h ../include/prop.h \
+		../include/permonst.h ../include/monattk.h \
+		../include/monflag.h ../include/mondata.h ../include/pm.h \
+		../include/wintype.h ../include/decl.h ../include/quest.h \
+		../include/obj.h ../include/spell.h \
+		../include/you.h ../include/attrib.h ../include/monst.h \
+		../include/skills.h ../include/onames.h ../include/color.h \
+		../include/timeout.h ../include/trap.h ../include/flag.h \
+		../include/rm.h ../include/vision.h ../include/display.h \
+		../include/engrave.h ../include/rect.h ../include/region.h \
+		../include/winprocs.h ../include/wintty.h ../include/trampoli.h
+	touch $(HACK_H)
+#
+nhlan.o: $(srcdir)/../sys/share/nhlan.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/nhlan.c
+pcmain.o: $(srcdir)/../sys/share/pcmain.c $(HACK_H) ../include/dlb.h \
+		../include/patchlevel.h #../include/win32api.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/pcmain.c
+pcsys.o: $(srcdir)/../sys/share/pcsys.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/pcsys.c
+pctty.o: $(srcdir)/../sys/share/pctty.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/pctty.c
+pcunix.o: $(srcdir)/../sys/share/pcunix.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/pcunix.c
+random.o: $(srcdir)/../sys/share/random.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/random.c
+ioctl.o: $(srcdir)/../sys/share/ioctl.c $(HACK_H) ../include/tcap.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/ioctl.c
+unixtty.o: $(srcdir)/../sys/share/unixtty.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/unixtty.c
+tos.o: $(srcdir)/../sys/atari/tos.c $(HACK_H) ../include/tcap.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/atari/tos.c
+bemain.o: $(srcdir)/../sys/be/bemain.c $(HACK_H) ../include/dlb.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/be/bemain.c
+unixmain.o: $(srcdir)/../sys/unix/unixmain.c $(HACK_H) ../include/dlb.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/unix/unixmain.c
+unixunix.o: $(srcdir)/../sys/unix/unixunix.c $(HACK_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/unix/unixunix.c
+unixres.o: $(srcdir)/../sys/unix/unixres.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/unix/unixres.c
+ntsound.o: $(srcdir)/../sys/winnt/ntsound.c $(HACK_H) #../include/win32api.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/winnt/ntsound.c
+nttty.o: $(srcdir)/../sys/winnt/nttty.c $(HACK_H) #../include/win32api.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/winnt/nttty.c
+winnt.o: $(srcdir)/../sys/winnt/winnt.c $(HACK_H) #../include/win32api.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/winnt/winnt.c
+getline.o: $(srcdir)/../win/tty/getline.c $(HACK_H) ../include/func_tab.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/tty/getline.c
+termcap.o: $(srcdir)/../win/tty/termcap.c $(HACK_H) ../include/tcap.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/tty/termcap.c
+topl.o: $(srcdir)/../win/tty/topl.c $(HACK_H) ../include/tcap.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/tty/topl.c
+wintty.o: $(srcdir)/../win/tty/wintty.c $(HACK_H) ../include/dlb.h \
+		../include/patchlevel.h ../include/tcap.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/tty/wintty.c
+Window.o: $(srcdir)/../win/X11/Window.c ../include/xwindowp.h \
+		../include/xwindow.h $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/Window.c
+dialogs.o: $(srcdir)/../win/X11/dialogs.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/dialogs.c
+winX.o: $(srcdir)/../win/X11/winX.c $(HACK_H) ../include/winX.h \
+		../include/dlb.h ../include/patchlevel.h ../win/X11/nh72icon \
+		../win/X11/nh56icon ../win/X11/nh32icon
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winX.c
+winmap.o: $(srcdir)/../win/X11/winmap.c ../include/xwindow.h $(HACK_H) \
+		../include/dlb.h ../include/winX.h ../include/patchlevel.h \
+		../include/tile2x11.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winmap.c
+winmenu.o: $(srcdir)/../win/X11/winmenu.c $(HACK_H) ../include/winX.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winmenu.c
+winmesg.o: $(srcdir)/../win/X11/winmesg.c ../include/xwindow.h $(HACK_H) \
+		../include/winX.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winmesg.c
+winmisc.o: $(srcdir)/../win/X11/winmisc.c $(HACK_H) ../include/func_tab.h \
+		../include/winX.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winmisc.c
+winstat.o: $(srcdir)/../win/X11/winstat.c $(HACK_H) ../include/winX.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winstat.c
+wintext.o: $(srcdir)/../win/X11/wintext.c $(HACK_H) ../include/winX.h \
+		../include/xwindow.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/wintext.c
+winval.o: $(srcdir)/../win/X11/winval.c $(HACK_H) ../include/winX.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/winval.c
+gnaskstr.o: $(srcdir)/../win/gnome/gnaskstr.c ../win/gnome/gnaskstr.h \
+		../win/gnome/gnmain.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnaskstr.c
+gnbind.o: $(srcdir)/../win/gnome/gnbind.c ../win/gnome/gnbind.h \
+		../win/gnome/gnmain.h ../win/gnome/gnmenu.h \
+		../win/gnome/gnaskstr.h ../win/gnome/gnyesno.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnbind.c
+gnglyph.o: $(srcdir)/../win/gnome/gnglyph.c ../win/gnome/gnglyph.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnglyph.c
+gnmain.o: $(srcdir)/../win/gnome/gnmain.c ../win/gnome/gnmain.h \
+		../win/gnome/gnsignal.h ../win/gnome/gnbind.h \
+		../win/gnome/gnopts.h $(HACK_H) ../include/date.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnmain.c
+gnmap.o: $(srcdir)/../win/gnome/gnmap.c ../win/gnome/gnmap.h \
+		../win/gnome/gnglyph.h ../win/gnome/gnsignal.h $(HACK_H)
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnmap.c
+gnmenu.o: $(srcdir)/../win/gnome/gnmenu.c ../win/gnome/gnmenu.h \
+		../win/gnome/gnmain.h ../win/gnome/gnbind.h \
+		../include/func_tab.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnmenu.c
+gnmesg.o: $(srcdir)/../win/gnome/gnmesg.c ../win/gnome/gnmesg.h \
+		../win/gnome/gnsignal.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnmesg.c
+gnopts.o: $(srcdir)/../win/gnome/gnopts.c ../win/gnome/gnopts.h \
+		../win/gnome/gnglyph.h ../win/gnome/gnmain.h \
+		../win/gnome/gnmap.h $(HACK_H)
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnopts.c
+gnplayer.o: $(srcdir)/../win/gnome/gnplayer.c ../win/gnome/gnplayer.h \
+		../win/gnome/gnmain.h $(HACK_H)
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnplayer.c
+gnsignal.o: $(srcdir)/../win/gnome/gnsignal.c ../win/gnome/gnsignal.h \
+		../win/gnome/gnmain.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnsignal.c
+gnstatus.o: $(srcdir)/../win/gnome/gnstatus.c ../win/gnome/gnstatus.h \
+		../win/gnome/gnsignal.h ../win/gnome/gn_xpms.h \
+		../win/gnome/gnomeprv.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnstatus.c
+gntext.o: $(srcdir)/../win/gnome/gntext.c ../win/gnome/gntext.h \
+		../win/gnome/gnmain.h ../win/gnome/gn_rip.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gntext.c
+gnyesno.o: $(srcdir)/../win/gnome/gnyesno.c ../win/gnome/gnbind.h \
+		../win/gnome/gnyesno.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnyesno.c
+gnworn.o: $(srcdir)/../win/gnome/gnworn.c ../win/gnome/gnworn.h \
+		../win/gnome/gnglyph.h ../win/gnome/gnsignal.h \
+		../win/gnome/gnomeprv.h
+	$(CC) $(CFLAGS) $(GNOMEINC) -c $(srcdir)/../win/gnome/gnworn.c
+wingem.o: $(srcdir)/../win/gem/wingem.c $(HACK_H) ../include/func_tab.h \
+		../include/dlb.h ../include/patchlevel.h ../include/wingem.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/wingem.c
+wingem1.o: $(srcdir)/../win/gem/wingem1.c ../include/gem_rsc.h \
+		../include/load_img.h ../include/gr_rect.h \
+		../include/wintype.h ../include/wingem.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/wingem1.c
+load_img.o: $(srcdir)/../win/gem/load_img.c ../include/load_img.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/load_img.c
+gr_rect.o: $(srcdir)/../win/gem/gr_rect.c ../include/gr_rect.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/gr_rect.c
+mswproc.o: $(srcdir)/../win/win32/mswproc.c $(HACK_H) ../include/dlb.h \
+		../include/func_tab.h ../win/win32/winMS.h \
+		../win/win32/mhmap.h ../win/win32/mhstatus.h \
+		../win/win32/mhtext.h ../win/win32/mhmsgwnd.h \
+		../win/win32/mhmenu.h ../win/win32/mhsplash.h \
+		../win/win32/mhmsg.h ../win/win32/mhinput.h \
+		../win/win32/mhaskyn.h ../win/win32/mhdlg.h \
+		../win/win32/mhrip.h ../win/win32/mhmain.h \
+		../win/win32/mhfont.h ../win/win32/resource.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mswproc.c
+winhack.o: $(srcdir)/../win/win32/winhack.c ../win/win32/winMS.h $(HACK_H) \
+		../include/dlb.h ../win/win32/resource.h ../win/win32/mhmain.h \
+		../win/win32/mhmap.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/winhack.c
+mhdlg.o: $(srcdir)/../win/win32/mhdlg.c ../win/win32/winMS.h $(HACK_H) \
+		../include/func_tab.h ../win/win32/resource.h \
+		../win/win32/mhdlg.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhdlg.c
+mhaskyn.o: $(srcdir)/../win/win32/mhaskyn.c ../win/win32/winMS.h \
+		../win/win32/mhaskyn.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhaskyn.c
+mhfont.o: $(srcdir)/../win/win32/mhfont.c ../win/win32/mhfont.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhfont.c
+mhinput.o: $(srcdir)/../win/win32/mhinput.c ../win/win32/winMS.h \
+		../win/win32/mhinput.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhinput.c
+mhmain.o: $(srcdir)/../win/win32/mhmain.c ../win/win32/winMS.h \
+		../include/patchlevel.h ../win/win32/resource.h \
+		../win/win32/mhmsg.h ../win/win32/mhinput.h \
+		../win/win32/mhmain.h ../win/win32/mhmenu.h \
+		../win/win32/mhstatus.h ../win/win32/mhmsgwnd.h \
+		../win/win32/mhmap.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhmain.c
+mhmsgwnd.o: $(srcdir)/../win/win32/mhmsgwnd.c ../win/win32/winMS.h \
+		../win/win32/mhmsgwnd.h ../win/win32/mhmsg.h \
+		../win/win32/mhfont.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhmsgwnd.c
+mhsplash.o: $(srcdir)/../win/win32/mhsplash.c ../win/win32/winMS.h \
+		../win/win32/resource.h ../win/win32/mhsplash.h \
+		../win/win32/mhmsg.h ../win/win32/mhfont.h \
+		../include/patchlevel.h ../include/dlb.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhsplash.c
+mhstatus.o: $(srcdir)/../win/win32/mhstatus.c ../win/win32/winMS.h \
+		../win/win32/mhstatus.h ../win/win32/mhmsg.h \
+		../win/win32/mhfont.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhstatus.c
+mhtext.o: $(srcdir)/../win/win32/mhtext.c ../win/win32/winMS.h \
+		../win/win32/resource.h ../win/win32/mhtext.h \
+		../win/win32/mhmsg.h ../win/win32/mhfont.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhtext.c
+mhmenu.o: $(srcdir)/../win/win32/mhmenu.c ../win/win32/winMS.h \
+		../win/win32/resource.h ../win/win32/mhmenu.h \
+		../win/win32/mhmain.h ../win/win32/mhmsg.h \
+		../win/win32/mhfont.h ../win/win32/mhdlg.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhmenu.c
+mhmap.o: $(srcdir)/../win/win32/mhmap.c ../win/win32/winMS.h \
+		../win/win32/resource.h ../win/win32/mhmap.h \
+		../win/win32/mhmsg.h ../win/win32/mhinput.h \
+		../win/win32/mhfont.h ../include/patchlevel.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhmap.c
+mhrip.o: $(srcdir)/../win/win32/mhrip.c ../win/win32/winMS.h \
+		../win/win32/resource.h ../win/win32/mhrip.h \
+		../win/win32/mhmsg.h ../win/win32/mhfont.h
+	$(CC) $(CFLAGS) $(WINMSCFLAGS) -c $(srcdir)/../win/win32/mhrip.c
+tile.o: tile.c $(HACK_H)
+qt_win.o: $(srcdir)/../win/Qt/qt_win.cpp $(HACK_H) ../include/func_tab.h \
+		../include/dlb.h ../include/date.h ../include/patchlevel.h \
+		../include/tile2x11.h ../include/qt_win.h \
+		../include/qt_clust.h ../include/qt_kde0.h \
+		../include/qt_xpms.h qt_win.moc qt_kde0.moc qttableview.moc
+	$(CXX) $(CXXFLAGS) -c $(srcdir)/../win/Qt/qt_win.cpp
+qt_clust.o: $(srcdir)/../win/Qt/qt_clust.cpp ../include/qt_clust.h
+	$(CXX) $(CXXFLAGS) -c $(srcdir)/../win/Qt/qt_clust.cpp
+qttableview.o: $(srcdir)/../win/Qt/qttableview.cpp ../include/qttableview.h
+	$(CXX) $(CXXFLAGS) -c $(srcdir)/../win/Qt/qttableview.cpp
+monstr.o: monstr.c $(CONFIG_H)
+vis_tab.o: vis_tab.c $(CONFIG_H) ../include/vis_tab.h
+allmain.o: $(srcdir)/allmain.c $(HACK_H) ../include/patchlevel.h
+alloc.o: $(srcdir)/alloc.c $(CONFIG_H)
+apply.o: $(srcdir)/apply.c $(HACK_H) ../include/edog.h 
+artifact.o: $(srcdir)/artifact.c $(HACK_H) ../include/artifact.h \
+		../include/artilist.h
+attrib.o: $(srcdir)/attrib.c $(HACK_H)
+ball.o: $(srcdir)/ball.c $(HACK_H)
+bones.o: $(srcdir)/bones.c $(HACK_H) ../include/lev.h
+botl.o: $(srcdir)/botl.c $(HACK_H)
+cmd.o: $(srcdir)/cmd.c $(HACK_H) ../include/func_tab.h
+dbridge.o: $(srcdir)/dbridge.c $(HACK_H)
+decl.o: $(srcdir)/decl.c $(HACK_H)
+detect.o: $(srcdir)/detect.c $(HACK_H) ../include/artifact.h
+dig.o: $(srcdir)/dig.c $(HACK_H) ../include/edog.h
+display.o: $(srcdir)/display.c $(HACK_H)
+dlb.o: $(srcdir)/dlb.c $(CONFIG_H) ../include/dlb.h
+do.o: $(srcdir)/do.c $(HACK_H) ../include/lev.h
+do_name.o: $(srcdir)/do_name.c $(HACK_H)
+do_wear.o: $(srcdir)/do_wear.c $(HACK_H)
+dog.o: $(srcdir)/dog.c $(HACK_H) ../include/edog.h ../include/emin.h \
+		../include/epri.h
+dogmove.o: $(srcdir)/dogmove.c $(HACK_H) ../include/mfndpos.h \
+		../include/edog.h ../include/emin.h ../include/epri.h
+dokick.o: $(srcdir)/dokick.c $(HACK_H) ../include/eshk.h
+dothrow.o: $(srcdir)/dothrow.c $(HACK_H) ../include/edog.h
+drawing.o: $(srcdir)/drawing.c $(HACK_H) ../include/tcap.h
+dungeon.o: $(srcdir)/dungeon.c $(HACK_H) ../include/dlb.h
+eat.o: $(srcdir)/eat.c $(HACK_H)
+end.o: $(srcdir)/end.c $(HACK_H) ../include/eshk.h ../include/dlb.h
+engrave.o: $(srcdir)/engrave.c $(HACK_H) ../include/lev.h
+exper.o: $(srcdir)/exper.c $(HACK_H)
+explode.o: $(srcdir)/explode.c $(HACK_H)
+extralev.o: $(srcdir)/extralev.c $(HACK_H)
+files.o: $(srcdir)/files.c $(HACK_H) ../include/dlb.h
+fountain.o: $(srcdir)/fountain.c $(HACK_H)
+hack.o: $(srcdir)/hack.c $(HACK_H)
+hacklib.o: $(srcdir)/hacklib.c $(HACK_H)
+invent.o: $(srcdir)/invent.c $(HACK_H)
+light.o: $(srcdir)/light.c $(HACK_H) ../include/lev.h
+lock.o: $(srcdir)/lock.c $(HACK_H)
+mail.o: $(srcdir)/mail.c $(HACK_H) ../include/mail.h
+makemon.o: $(srcdir)/makemon.c $(HACK_H) ../include/epri.h ../include/emin.h \
+		../include/edog.h
+mapglyph.o: $(srcdir)/mapglyph.c $(HACK_H)
+mcastu.o: $(srcdir)/mcastu.c $(HACK_H)
+mhitm.o: $(srcdir)/mhitm.c $(HACK_H) ../include/artifact.h ../include/edog.h
+mhitu.o: $(srcdir)/mhitu.c $(HACK_H) ../include/artifact.h ../include/edog.h
+minion.o: $(srcdir)/minion.c $(HACK_H) ../include/emin.h ../include/epri.h
+mklev.o: $(srcdir)/mklev.c $(HACK_H)
+mkmap.o: $(srcdir)/mkmap.c $(HACK_H) ../include/sp_lev.h
+mkmaze.o: $(srcdir)/mkmaze.c $(HACK_H) ../include/sp_lev.h ../include/lev.h
+mkobj.o: $(srcdir)/mkobj.c $(HACK_H)
+mkroom.o: $(srcdir)/mkroom.c $(HACK_H)
+mon.o: $(srcdir)/mon.c $(HACK_H) ../include/mfndpos.h ../include/edog.h \
+		../include/artifact.h
+mondata.o: $(srcdir)/mondata.c $(HACK_H) ../include/eshk.h ../include/epri.h
+monmove.o: $(srcdir)/monmove.c $(HACK_H) ../include/mfndpos.h \
+		../include/artifact.h ../include/epri.h
+monst.o: $(srcdir)/monst.c $(CONFIG_H) ../include/permonst.h \
+		../include/align.h ../include/monattk.h ../include/monflag.h \
+		../include/monsym.h ../include/dungeon.h ../include/eshk.h \
+		../include/vault.h ../include/epri.h \
+		../include/color.h
+mplayer.o: $(srcdir)/mplayer.c $(HACK_H)
+mthrowu.o: $(srcdir)/mthrowu.c $(HACK_H)
+muse.o: $(srcdir)/muse.c $(HACK_H) ../include/edog.h
+music.o: $(srcdir)/music.c $(HACK_H) #interp.c
+o_init.o: $(srcdir)/o_init.c $(HACK_H) ../include/lev.h
+objects.o: $(srcdir)/objects.c $(CONFIG_H) ../include/obj.h \
+		../include/objclass.h ../include/prop.h ../include/skills.h \
+		../include/color.h objects.c
+objnam.o: $(srcdir)/objnam.c $(HACK_H)
+options.o: $(srcdir)/options.c $(CONFIG_H) ../include/objclass.h \
+		../include/flag.h $(HACK_H) ../include/tcap.h
+pager.o: $(srcdir)/pager.c $(HACK_H) ../include/dlb.h
+pickup.o: $(srcdir)/pickup.c $(HACK_H)
+pline.o: $(srcdir)/pline.c $(HACK_H) ../include/epri.h ../include/edog.h
+polyself.o: $(srcdir)/polyself.c $(HACK_H)
+potion.o: $(srcdir)/potion.c $(HACK_H)
+pray.o: $(srcdir)/pray.c $(HACK_H) ../include/epri.h
+priest.o: $(srcdir)/priest.c $(HACK_H) ../include/mfndpos.h ../include/eshk.h \
+		../include/epri.h ../include/emin.h
+quest.o: $(srcdir)/quest.c $(HACK_H) ../include/qtext.h
+questpgr.o: $(srcdir)/questpgr.c $(HACK_H) ../include/dlb.h ../include/qtext.h
+read.o: $(srcdir)/read.c $(HACK_H)
+rect.o: $(srcdir)/rect.c $(HACK_H)
+region.o: $(srcdir)/region.c $(HACK_H) ../include/lev.h
+restore.o: $(srcdir)/restore.c $(HACK_H) ../include/lev.h ../include/tcap.h
+rip.o: $(srcdir)/rip.c $(HACK_H)
+rnd.o: $(srcdir)/rnd.c $(HACK_H)
+role.o: $(srcdir)/role.c $(HACK_H)
+rumors.o: $(srcdir)/rumors.c $(HACK_H) ../include/lev.h ../include/dlb.h
+save.o: $(srcdir)/save.c $(HACK_H) ../include/lev.h
+shk.o: $(srcdir)/shk.c $(HACK_H) ../include/eshk.h
+shknam.o: $(srcdir)/shknam.c $(HACK_H) ../include/eshk.h
+sit.o: $(srcdir)/sit.c $(HACK_H) ../include/artifact.h
+sounds.o: $(srcdir)/sounds.c $(HACK_H) ../include/edog.h
+sp_lev.o: $(srcdir)/sp_lev.c $(HACK_H) ../include/dlb.h ../include/sp_lev.h
+spell.o: $(srcdir)/spell.c $(HACK_H) ../include/edog.h
+steal.o: $(srcdir)/steal.c $(HACK_H)
+steed.o: $(srcdir)/steed.c $(HACK_H)
+teleport.o: $(srcdir)/teleport.c $(HACK_H)
+timeout.o: $(srcdir)/timeout.c $(HACK_H) ../include/lev.h
+topten.o: $(srcdir)/topten.c $(HACK_H) ../include/dlb.h ../include/patchlevel.h
+track.o: $(srcdir)/track.c $(HACK_H)
+trap.o: $(srcdir)/trap.c $(HACK_H)
+u_init.o: $(srcdir)/u_init.c $(HACK_H)
+uhitm.o: $(srcdir)/uhitm.c $(HACK_H)
+vault.o: $(srcdir)/vault.c $(HACK_H) ../include/vault.h
+version.o: $(srcdir)/version.c $(HACK_H) ../include/date.h \
+		../include/patchlevel.h
+vision.o: $(srcdir)/vision.c $(HACK_H) ../include/vis_tab.h
+weapon.o: $(srcdir)/weapon.c $(HACK_H)
+were.o: $(srcdir)/were.c $(HACK_H)
+wield.o: $(srcdir)/wield.c $(HACK_H)
+windows.o: $(srcdir)/windows.c $(HACK_H) ../include/wingem.h \
+		../include/winGnome.h 
+wizard.o: $(srcdir)/wizard.c $(HACK_H) ../include/qtext.h ../include/epri.h
+worm.o: $(srcdir)/worm.c $(HACK_H) ../include/lev.h
+worn.o: $(srcdir)/worn.c $(HACK_H)
+write.o: $(srcdir)/write.c $(HACK_H)
+zap.o: $(srcdir)/zap.c $(HACK_H)
+# DEPENDENCIES MUST END AT END OF FILE
+# IF YOU PUT STUFF HERE IT WILL GO AWAY
+# see make depend above
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Makefile.top nethack-autoconf/sys/autoconf/Makefile.top
--- nethack-3.4.3/sys/autoconf/Makefile.top	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Makefile.top	2009-02-17 13:08:09.000000000 +0100
@@ -0,0 +1,329 @@
+#	NetHack Makefile.
+#       @configure_input@
+#	SCCS Id: @(#)Makefile.top	3.4	1995/01/05
+
+VPATH=@srcdir@
+srcdir=@srcdir@
+
+# newer makes predefine $(MAKE) to 'make' and do smarter processing of
+# recursive make calls if $(MAKE) is used
+# these makes allow $(MAKE) to be overridden by the environment if someone
+# wants to (or has to) use something other than the standard make, so we do
+# not want to unconditionally set $(MAKE) here
+#
+# unfortunately, some older makes do not predefine $(MAKE); if you have one of
+# these, uncomment the following line
+# (you will know that you have one if you get complaints about unable to
+# execute things like 'data' and 'rumors')
+# MAKE = make
+
+# make NetHack
+PREFIX   = @prefix@
+EXEEXT	 = @EXEEXT@
+SCRIPT   = nethack
+GAME     = nethack$(EXEEXT)
+GAMEUID  = @OWNER@
+GAMEGRP  = @GROUP@
+
+# Permissions - some places use setgid instead of setuid, for instance
+# See also the option "SECURE" in include/config.h
+GAMEPERM = 04755
+FILEPERM = 0644
+EXEPERM  = 0755
+DIRPERM  = 0755
+VARFILEPERM = 0644
+VARDIRPERM  = 0755
+
+# GAMEDIR also appears in config.h as "HACKDIR".
+# VARDIR may also appear in unixconf.h as "VAR_PLAYGROUND" else GAMEDIR
+#
+# note that 'make install' believes in creating nice tidy directories for
+# installation, free of debris from previous NetHack versions --
+# therefore there should not be anything in GAMEDIR that you want to keep
+# (if there is, you'll have to do the installation by hand or modify the
+# instructions)
+# These must agree with the definitions in unixconf.h
+
+# Defs. for non file areas support.
+GAMEDIR  = $(PREFIX)/nethackdir
+VARDIR = $(GAMEDIR)
+FILE_AREA_VAR = $(VARDIR)
+FILE_AREA_SAVE = $(VARDIR)/save
+FILE_AREA_SHARE = $(GAMEDIR)
+FILE_AREA_UNSHARE = $(GAMEDIR)
+FILE_AREA_DOC = $(GAMEDIR)
+FILE_AREA_BONES = $(FILE_AREA_VAR)
+FILE_AREA_LEVL = $(FILE_AREA_VAR)
+SHELLDIR = $(PREFIX)/bin
+
+# Shareable (architecture independent) data files which are not candidates
+# for inclusion in DLB libraries (ND) and which are (D). Port specific files
+# per discussions in Install.X11 and Install.Qt
+CNF_SHARE_QTND = x11tiles rip.xpm nhsplash.xpm
+CNF_SHARE_X11ND = x11tiles NetHack.ad pet_mark.xbm
+#CNF_SHARE_X11ND = x11tiles NetHack.ad pet_mark.xbm
+# CNF_SHARE_X11ND = x11tiles NetHack.ad pet_mark.xbm rip.xpm
+# for Atari/Gem
+CNF_SHARE_GEMND = nh16.img title.img GEM_RSC.RSC rip.img
+# for BeOS
+CNF_SHARE_BEND = beostiles
+# for SDL/GL window port
+CNF_SHARE_GLND = gltile16.png gltile32.png gltile64.png gllogo.png glrip.png \
+                 glfont8.png glfont14.png glfont20.png glfont22.png
+# for Gnome
+CNF_SHARE_GNOMEND = x11tiles pet_mark.xbm rip.xpm mapbg.xpm
+# for Proxy
+CNF_SHARE_PROXYND = gltile64.png gltile32.png gltile16.png \
+	gltile64.map gltile32.map gltile16.map
+
+# CNF_SHARE_DATND = $(CNF_SHARE_X11ND)
+# CNF_SHARE_DATND = $(CNF_SHARE_QTND)
+# CNF_SHARE_DATND = $(CNF_SHARE_GLND)
+# CNF_SHARE_DATND = $(CNF_SHARE_PROXYND)
+CNF_SHARE_DATND = @CNF_SHARE_DATND@
+
+CNF_SHARE_DATD = data oracles @OPTIONS_FILES@ quest.dat rumors
+CNF_SHARE_DAT = $(CNF_SHARE_DATD) $(CNF_SHARE_DATND)
+
+# Some versions of make use the SHELL environment variable as the shell
+# for running commands.  We need this to be a Bourne shell.
+# SHELL = /bin/sh
+# for Atari
+# SHELL=E:/GEMINI2/MUPFEL.TTP
+
+# Commands for setting the owner and group on files during installation.
+# Some systems fail with one or the other when installing over NFS or for
+# other permission-related reasons.  If that happens, you may want to set the
+# command to "true", which is a no-op. Note that disabling chown or chgrp
+# will only work if setuid (or setgid) behavior is not desired or required.
+CHOWN = @CHOWN@
+CHGRP = @CHGRP@
+CHMOD = @CHMOD@
+
+#
+# end of configuration
+#
+
+DATHELP = help hh cmdhelp history opthelp wizhelp
+
+SPEC_LEVS = asmodeus.lev baalz.lev bigrm-?.lev castle.lev fakewiz?.lev \
+	juiblex.lev knox.lev medusa-?.lev minend-?.lev minefill.lev \
+	minetn-?.lev oracle.lev orcus.lev sanctum.lev soko?-?.lev \
+	tower?.lev valley.lev wizard?.lev \
+	astral.lev air.lev earth.lev fire.lev water.lev
+QUEST_LEVS = ???-goal.lev ???-fil?.lev ???-loca.lev ???-strt.lev
+
+SHARE_DATNODLB = $(CNF_SHARE_DATND)
+UNSHARE_DATNODLB =
+SHARE_DATDLB = $(DATHELP) $(CNF_SHARE_DATD)
+UNSHARE_DATDLB = dungeon $(SPEC_LEVS) $(QUEST_LEVS)
+SHARE_DAT = $(SHARE_DATNODLB) $(SHARE_DATDLB)
+UNSHARE_DAT = $(UNSHARE_DATNODLB) $(UNSHARE_DATDLB)
+
+
+$(GAME):
+	( cd src ; $(MAKE) )
+
+all:	$(GAME) recover$(EXEEXT) @GUIDEBOOK@ $(CNF_SHARE_DAT) dungeon spec_levs check-dlb
+	@echo "Done."
+
+# Note: many of the dependencies below are here to allow parallel make
+# to generate valid output
+
+Guidebook:
+	( cd doc ; $(MAKE) Guidebook )
+
+manpages:
+	( cd doc ; $(MAKE) manpages )
+
+data: $(GAME)
+	( cd dat ; $(MAKE) data )
+
+rumors: $(GAME)
+	( cd dat ; $(MAKE) rumors )
+
+oracles: $(GAME)
+	( cd dat ; $(MAKE) oracles )
+
+#	Note: options should have already been made with make, but...
+@OPTIONS_FILE@: $(GAME)
+	( cd dat ; $(MAKE) options )
+
+quest.dat: $(GAME)
+	( cd dat ; $(MAKE) quest.dat )
+
+spec_levs: $(GAME)
+	( cd util ; $(MAKE) lev_comp )
+	( cd dat ; $(MAKE) spec_levs )
+	( cd dat ; $(MAKE) quest_levs )
+
+dungeon: $(GAME)
+	( cd util ; $(MAKE) dgn_comp )
+	( cd dat ; $(MAKE) dungeon )
+
+Guidebook.txt:
+	( cd doc; $(MAKE) Guidebook.txt )
+
+tiles.bmp: $(GAME)
+	( cd dat ; $(MAKE) tiles.bmp )
+
+x11tiles: $(GAME)
+	( cd util ; $(MAKE) tile2x11 )
+	( cd dat ; $(MAKE) x11tiles )
+
+beostiles: $(GAME)
+	( cd util ; $(MAKE) tile2beos )
+	( cd dat ; $(MAKE) beostiles )
+
+NetHack.ad: $(GAME)
+	( cd dat ; $(MAKE) NetHack.ad )
+
+pet_mark.xbm:
+	( cd dat ; $(MAKE) pet_mark.xbm )
+
+rip.xpm:
+	( cd dat ; $(MAKE) rip.xpm )
+
+mapbg.xpm:
+	(cd dat ; $(MAKE) mapbg.xpm )
+
+nhsplash.xpm:
+	( cd dat ; $(MAKE) nhsplash.xpm )
+
+nh16.img: $(GAME)
+	( cd util ; $(MAKE) tile2img.ttp )
+	( cd dat ; $(MAKE) nh16.img )
+
+rip.img:
+	( cd util ; $(MAKE) xpm2img.ttp )
+	( cd dat ; $(MAKE) rip.img )
+GEM_RSC.RSC:
+	( cd dat ; $(MAKE) GEM_RSC.RSC )
+
+title.img:
+	( cd dat ; $(MAKE) title.img )
+
+check-dlb: @OPTIONS_FILE@
+	@if egrep -s librarian dat/@OPTIONS_FILE@ ; then $(MAKE) dlb ; else true ; fi
+
+dlb:
+	( cd util ; $(MAKE) dlb )
+	( cd dat ; ../util/dlb cf nhdat $(SHARE_DATDLB) $(UNSHARE_DATDLB) )
+
+# recover can be used when INSURANCE is defined in include/config.h
+# and the checkpoint option is true
+recover$(EXEEXT): $(GAME)
+	( cd util ; $(MAKE) recover$(EXEEXT) )
+
+dofiles:
+	target=`sed -n					\
+		-e '/librarian/{' 			\
+		-e	's/.*/dlb/p' 			\
+		-e	'q' 				\
+		-e '}' 					\
+	  	-e '$$s/.*/nodlb/p' < dat/@OPTIONS_FILE@` ;	\
+	$(MAKE) dofiles-$${target-nodlb}
+	(cd src; cp $(GAME) @EXTRA_UNSHARE@ $(FILE_AREA_UNSHARE))
+	@HOST_MSWIN@cp $(srcdir)/sys/winnt/defaults.nh $(FILE_AREA_UNSHARE)
+	cp util/recover$(EXEEXT) $(FILE_AREA_UNSHARE)
+	if test -f $(srcdir)/doc/Guidebook.txt ; then \
+		cp $(srcdir)/doc/Guidebook.txt $(FILE_AREA_DOC); \
+	fi
+	cp $(srcdir)/dat/license $(FILE_AREA_DOC)
+#	cp win/Qt/KDE/knethack.kdelnk $(KDEDIR)/share/applnk/Games
+	@HOST_UNIX@-rm -f $(SHELLDIR)/$(SCRIPT)
+	@HOST_UNIX@sed -e 's;/usr/games/lib/nethackdir;$(FILE_AREA_UNSHARE);' \
+	@HOST_UNIX@	-e 's;HACKDIR/nethack;HACKDIR/$(GAME);' \
+	@HOST_UNIX@	< $(srcdir)/sys/unix/nethack.sh \
+	@HOST_UNIX@	> $(SHELLDIR)/$(SCRIPT)
+# set up their permissions
+	-( cd $(FILE_AREA_UNSHARE) ; $(CHOWN) $(GAMEUID) $(GAME) recover$(EXEEXT) ; \
+			$(CHGRP) $(GAMEGRP) $(GAME) recover$(EXEEXT) )
+	chmod $(GAMEPERM) $(FILE_AREA_UNSHARE)/$(GAME)
+	chmod $(EXEPERM) $(FILE_AREA_UNSHARE)/recover$(EXEEXT)
+	-( cd $(FILE_AREA_DOC) ; \
+			$(CHOWN) $(GAMEUID) license @GUIDEBOOK_TXT@ ; \
+			$(CHGRP) $(GAMEGRP) license @GUIDEBOOK_TXT@ ; \
+			chmod $(FILEPERM) license @GUIDEBOOK_TXT@ )
+	@HOST_UNIX@-$(CHOWN) $(GAMEUID) $(SHELLDIR)/$(SCRIPT)
+	@HOST_UNIX@$(CHGRP) $(GAMEGRP) $(SHELLDIR)/$(SCRIPT)
+	@HOST_UNIX@chmod $(EXEPERM) $(SHELLDIR)/$(SCRIPT)
+
+dofiles-dlb: check-dlb
+	( cd dat ; cp nhdat $(SHARE_DATNODLB) $(FILE_AREA_SHARE) )
+# set up their permissions
+	-( cd $(FILE_AREA_SHARE) ; \
+			$(CHOWN) $(GAMEUID) nhdat $(SHARE_DATNODLB) ; \
+			$(CHGRP) $(GAMEGRP) nhdat $(SHARE_DATNODLB) ; \
+			chmod $(FILEPERM) nhdat $(SHARE_DATNODLB) )
+
+dofiles-nodlb:
+# copy over the game files
+	( cd dat ; cp $(SHARE_DAT) $(FILE_AREA_SHARE) )
+	( cd dat ; cp $(UNSHARE_DAT) $(FILE_AREA_UNSHARE) )
+# set up their permissions
+	-( cd $(FILE_AREA_SHARE) ; $(CHOWN) $(GAMEUID) $(SHARE_DAT) ; \
+			$(CHGRP) $(GAMEGRP) $(SHARE_DAT) ; \
+			chmod $(FILEPERM) $(SHARE_DAT) )
+	-( cd $(FILE_AREA_UNSHARE) ; $(CHOWN) $(GAMEUID) $(UNSHARE_DAT) ; \
+			$(CHGRP) $(GAMEGRP) $(UNSHARE_DAT) ; \
+			chmod $(FILEPERM) $(UNSHARE_DAT) )
+
+update: $(GAME) recover$(EXEEXT) $(CNF_SHARE_DAT) dungeon spec_levs @GUIDEBOOK_TXT@
+#	(don't yank the old version out from under people who're playing it)
+	-mv $(FILE_AREA_UNSHARE)/$(GAME) $(FILE_AREA_UNSHARE)/$(GAME).old
+#	quest.dat is also kept open and has the same problems over NFS
+#	(quest.dat may be inside nhushare if dlb is in use)
+	-mv $(FILE_AREA_UNSHARE)/quest.dat $(FILE_AREA_UNSHARE)/quest.dat.old
+	-mv $(FILE_AREA_UNSHARE)/nhushare $(FILE_AREA_UNSHARE)/nhushare.old
+# set up new versions of the game files
+	( $(MAKE) dofiles )
+# touch time-sensitive files
+	-touch -c $(FILE_AREA_BONES)/bones* $(FILE_AREA_VAR)/?lock*
+	-touch -c $(FILE_AREA_VAR)/wizard* $(FILE_AREA_SAVE)/*
+	touch $(FILE_AREA_VAR)/perm $(FILE_AREA_VAR)/record
+# and a reminder
+	@echo You may also want to install the man pages via the doc Makefile.
+
+install: $(GAME) recover$(EXEEXT) $(CNF_SHARE_DAT) dungeon spec_levs @GUIDEBOOK_TXT@
+# set up the directories
+# not all mkdirs have -p; those that don't will create a -p directory
+	-mkdir -p $(SHELLDIR)
+	-rm -rf $(FILE_AREA_VAR) $(FILE_AREA_BONES) $(FILE_AREA_SAVE)
+	-rm -rf $(FILE_AREA_LEVL) $(FILE_AREA_SHARE) $(FILE_AREA_UNSHARE)
+	-rm -rf $(FILE_AREA_DOC)
+	-mkdir -p $(FILE_AREA_VAR) $(FILE_AREA_BONES) $(FILE_AREA_SAVE)
+	-mkdir -p $(FILE_AREA_LEVL) $(FILE_AREA_SHARE) $(FILE_AREA_UNSHARE)
+	-mkdir -p $(FILE_AREA_DOC)
+	-rmdir ./-p
+	-$(CHOWN) $(GAMEUID) $(FILE_AREA_VAR) $(FILE_AREA_BONES) $(FILE_AREA_SAVE) $(FILE_AREA_LEVL)
+	$(CHGRP) $(GAMEGRP) $(FILE_AREA_VAR) $(FILE_AREA_BONES) $(FILE_AREA_SAVE) $(FILE_AREA_LEVL)
+	chmod $(VARDIRPERM) $(FILE_AREA_VAR) $(FILE_AREA_BONES) $(FILE_AREA_SAVE) $(FILE_AREA_LEVL)
+	-$(CHOWN) $(GAMEUID) $(FILE_AREA_SHARE) $(FILE_AREA_UNSHARE)
+	$(CHGRP) $(GAMEGRP) $(FILE_AREA_SHARE) $(FILE_AREA_UNSHARE)
+	chmod $(DIRPERM) $(FILE_AREA_SHARE) $(FILE_AREA_UNSHARE)
+# set up the game files
+	( $(MAKE) dofiles )
+# set up some additional files
+	touch $(FILE_AREA_VAR)/perm $(FILE_AREA_VAR)/record $(FILE_AREA_VAR)/logfile
+	-( cd $(FILE_AREA_VAR) ; $(CHOWN) $(GAMEUID) perm record logfile ; \
+			$(CHGRP) $(GAMEGRP) perm record logfile ; \
+			chmod $(VARFILEPERM) perm record logfile )
+# and a reminder
+	@echo You may also want to reinstall the man pages via the doc Makefile.
+
+
+# 'make clean' removes all the .o files, but leaves around all the executables
+# and compiled data files
+clean:
+	( cd src ; $(MAKE) clean )
+	( cd util ; $(MAKE) clean )
+
+# 'make spotless' returns the source tree to near-distribution condition.
+# it removes .o files, executables, and compiled data files
+spotless:
+	( cd src ; $(MAKE) spotless )
+	( cd util ; $(MAKE) spotless )
+	( cd dat ; $(MAKE) spotless )
+	( cd doc ; $(MAKE) spotless )
+	-rm -f Makefile include/autoconf.h include/win32api.h
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/Makefile.utl nethack-autoconf/sys/autoconf/Makefile.utl
--- nethack-3.4.3/sys/autoconf/Makefile.utl	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/Makefile.utl	2009-01-17 13:28:05.000000000 +0100
@@ -0,0 +1,425 @@
+#	Makefile for NetHack's utility programs.
+#       @configure_input@
+#	SCCS Id: @(#)Makefile.utl	3.4	1997/04/19
+
+VPATH=@srcdir@
+srcdir=@srcdir@
+
+# newer makes predefine $(MAKE) to 'make' and do smarter processing of
+# recursive make calls if $(MAKE) is used
+# these makes allow $(MAKE) to be overridden by the environment if someone
+# wants to (or has to) use something other than the standard make, so we do
+# not want to unconditionally set $(MAKE) here
+#
+# unfortunately, some older makes do not predefine $(MAKE); if you have one of
+# these, uncomment the following line
+# (you will know that you have one if you get complaints about unable to
+# execute things like 'foo.o')
+# MAKE = make
+
+EXEEXT = @EXEEXT@
+CC = @CC@ -DAUTOCONF
+
+# if you are using gcc as your compiler,
+#	uncomment the CC definition below if it's not in your environment
+# CC = gcc
+#
+#	For Bull DPX/2 systems at B.O.S. 2.0 or higher use the following:
+#
+# CC = gcc -ansi -D_BULL_SOURCE -D_XOPEN_SOURCE -D_POSIX_SOURCE
+# 
+#	If you are using GCC 2.2.2 or higher on a DPX/2, just use:
+#
+# CC = gcc -ansi
+#
+#	For HP/UX 10.20 with GCC:
+# CC = gcc -D_POSIX_SOURCE
+#
+# if your make doesn't define a default SHELL properly, you may need
+#    the line below (Atari users will need a bourne work-alike)
+# SHELL = /bin/sh
+# for Atari
+# SHELL=E:/GEMINI2/MUPFEL.TTP
+
+# flags may have to be changed as required
+# flags for 286 Xenix:
+# CFLAGS = -Ml2t16 -O -LARGE -I../include -I$(srcdir)/../include
+# LFLAGS = -Ml -F 4000 -SEG 512
+
+# flags for 286 Microport SysV-AT
+# CFLAGS = -DDUMB -Ml -I../include -I$(srcdir)/../include
+# LFLAGS = -Ml
+
+# flags for Atari GCC (3.2.1)
+# CFLAGS = -O -I../include -I$(srcdir)/../include
+# LFLAGS = -s
+# flags for Atari GCC (3.3)
+# CFLAGS = -mshort -O2 -I../include -I$(srcdir)/../include
+# LFLAGS = -mshort -s
+
+# flags for Apollos using their native cc
+# (as long as it claims to be __STDC__ but isn't)
+# CFLAGS = -DAPOLLO -O -I../include -I$(srcdir)/../include
+
+# flags for AIX 3.1 cc on IBM RS/6000 to define
+# a suitable subset of standard libraries
+# (note that there is more info regarding the "-qchars=signed"
+# switch in file Install.unx note 8)
+# CFLAGS = -D_NO_PROTO -D_XOPEN_SOURCE -O -I../include -I$(srcdir)/../include -qchars=signed
+# and for AIX 3.2:
+# CFLAGS = -D_NO_PROTO -D_XOPEN_SOURCE -D_ALL_SOURCE -O -I../include -I$(srcdir)/../include -qchars=signed
+
+# flags for A/UX 2.01 using native cc or c89
+# gcc predefines AUX so that's not needed there
+# CFLAGS = -ZS -D_POSIX_SOURCE -O -I../include -I$(srcdir)/../include -DAUX
+
+# flags for IRIX 4.0.x using native cc
+# SGI cc 3.10 will fail to compile makedefs with -O
+# CFLAGS = -I../include -I$(srcdir)/../include -D__STDC__ -woff 100,293
+
+# flags for Linux
+#   compile normally
+# CFLAGS = -O2 -fomit-frame-pointer -I../include -I$(srcdir)/../include
+# LFLAGS = -L/usr/X11R6/lib
+#   OR compile backwards compatible a.out format
+# CFLAGS = -O2 -b i486-linuxaout -fomit-frame-pointer -I../include -I$(srcdir)/../include
+# LFLAGS = -b i486-linuxaout -L/usr/X11R6/lib
+
+# flags for BeOS using the command line
+# remember to uncomment flex and bison below
+#   BeOS on a Mac/BeBox:
+#CC = mwcc
+#CFLAGS = -I../include -I$(srcdir)/../include
+#   BeOS on Intel:
+# the default values are fine
+
+# flags for debugging:
+# CFLAGS = -g -I../include -I$(srcdir)/../include
+
+CFLAGS = -O -I../include -I$(srcdir)/../include @CFLAGS@
+LFLAGS = @LFLAGS@
+
+LIBS =
+ 
+# If you are cross-compiling, you must use this:
+#OBJDIR = .
+# otherwise, you can save a little bit of disk space with this:
+OBJDIR = ../src
+
+# yacc/lex programs to use to generate *_comp.h, *_lex.c, and *_yacc.c.
+# if, instead of yacc/lex you have bison/flex, comment/uncomment the following.
+# YACC     = yacc
+# LEX      = lex
+# YACC     = bison -y
+# YACC     = byacc
+# LEX      = flex
+LEX      = @LEX@
+YACC     = @YACC@
+ 
+# these are the names of the output files from YACC/LEX. Under MS-DOS
+# and similar systems, they may differ
+YTABC = y.tab.c
+YTABH = y.tab.h
+LEXYYC = @LEX_OUTPUT_ROOT@.c
+# LEXYYC = lex.yy.c
+# YTABC = y_tab.c
+# YTABH = y_tab.h
+# LEXYYC = lexyy.c
+
+
+
+# ----------------------------------------
+#
+# Nothing below this line should have to be changed.
+
+# timestamps for primary header files, matching src/Makefile
+CONFIG_H = ../src/config.h-t
+HACK_H	 = ../src/hack.h-t
+
+# utility .c files
+MAKESRC = makedefs.c
+SPLEVSRC = lev_yacc.c lev_lex.c lev_main.c
+DGNCOMPSRC = dgn_yacc.c dgn_lex.c dgn_main.c
+RECOVSRC = recover.c
+DLBSRC = dlb_main.c
+UTILSRCS = $(MAKESRC) panic.c $(SPLEVSRC) $(DGNCOMPSRC) $(RECOVSRC) $(DLBSRC)
+
+# files that define all monsters and objects
+CMONOBJ = $(srcdir)/../src/monst.c $(srcdir)/../src/objects.c
+OMONOBJ = $(OBJDIR)/monst.o $(OBJDIR)/objects.o
+# files that provide access to NetHack's names
+CNAMING = $(srcdir)/../src/drawing.c $(srcdir)/../src/decl.c $(CMONOBJ)
+ONAMING = $(OBJDIR)/drawing.o $(OBJDIR)/decl.o $(OMONOBJ)
+# dynamic memory allocation
+CALLOC = $(srcdir)/../src/alloc.c panic.c
+OALLOC = $(OBJDIR)/alloc.o panic.o
+
+# object files for makedefs
+MAKEOBJS = makedefs.o $(OMONOBJ) $(OALLOC)
+
+# object files for special levels compiler
+SPLEVOBJS = lev_yacc.o lev_lex.o lev_main.o $(OALLOC) $(ONAMING)
+
+# object files for dungeon compiler
+DGNCOMPOBJS = dgn_yacc.o dgn_lex.o dgn_main.o $(OALLOC)
+
+# object files for recovery utility
+RECOVOBJS = recover.o
+
+# object files for the data librarian
+DLBOBJS = dlb_main.o $(OBJDIR)/dlb.o $(OALLOC)
+
+# flags for creating distribution versions of sys/share/*_lex.c, using
+# a more portable flex skeleton, which is not included in the distribution.
+# hopefully keeping this out of the section to be edited will keep too
+# many people from being confused by it...
+# FLEXDIST = -L -S../sys/share/flexhack.skl
+FLEXDIST =
+#
+# flags for creating distribution versions of sys/share/*_yacc.c, without
+# line numbers so patches from version to version are practical
+# YACCDIST = -l
+YACCDIST =
+
+#	dependencies for makedefs
+#
+makedefs:	$(MAKEOBJS)
+	$(CC) $(LFLAGS) -o makedefs $(MAKEOBJS)
+
+makedefs.o: makedefs.c $(CONFIG_H) $(srcdir)/../include/permonst.h \
+		$(srcdir)/../include/objclass.h $(srcdir)/../include/monsym.h \
+		$(srcdir)/../include/artilist.h $(srcdir)/../include/dungeon.h $(srcdir)/../include/obj.h \
+		$(srcdir)/../include/monst.h $(srcdir)/../include/you.h $(srcdir)/../include/flag.h \
+		$(srcdir)/../include/dlb.h $(srcdir)/../include/patchlevel.h $(srcdir)/../include/qtext.h
+
+../include/onames.h: makedefs
+	./makedefs -o
+../include/pm.h: makedefs
+	./makedefs -p
+../src/monstr.c: makedefs
+	./makedefs -m
+../include/vis_tab.h: makedefs
+	./makedefs -z
+# makedefs -z makes both vis_tab.h and vis_tab.c, but writes the .h first
+../src/vis_tab.c: ../include/vis_tab.h
+
+lintdefs:
+	@lint -axbh -I../include -I$(srcdir)/../include -DLINT $(MAKESRC) $(CMONOBJ) | sed '/_flsbuf/d'
+
+
+# we defer this makedefs call to the src Makefile, since it knows all about
+# the main src and include files date.h is a timestamp for
+../include/date.h::
+	@( cd ../src ; $(MAKE) ../include/date.h )
+
+# support code used by several of the utility programs (but not makedefs)
+panic.o:     panic.c $(CONFIG_H)
+
+
+#	dependencies for lev_comp
+#
+lev_comp:  $(SPLEVOBJS)
+	$(CC) $(LFLAGS) -o lev_comp $(SPLEVOBJS) $(LIBS)
+
+lev_yacc.o:  lev_yacc.c $(HACK_H) ../include/sp_lev.h
+lev_main.o:  lev_main.c $(HACK_H) ../include/sp_lev.h ../include/tcap.h \
+		../include/date.h ../include/artilist.h
+
+# see lev_comp.l for WEIRD_LEX discussion
+# egrep will return failure if it doesn't find anything, but we know there
+# is one "_cplusplus" inside a comment
+lev_lex.o:   lev_lex.c $(HACK_H) ../include/lev_comp.h ../include/sp_lev.h
+	@echo $(CC) -c $(CFLAGS) lev_lex.c
+	@$(CC) -c $(CFLAGS) -DWEIRD_LEX=`egrep -c _cplusplus lev_lex.c` lev_lex.c
+
+../include/lev_comp.h: lev_yacc.c
+
+lev_yacc.c: $(srcdir)/lev_comp.y
+	$(YACC) $(YACCDIST) -d $(srcdir)/lev_comp.y
+	mv $(YTABC) lev_yacc.c
+	mv $(YTABH) ../include/lev_comp.h
+
+lev_lex.c: $(srcdir)/lev_comp.l
+	$(LEX) $(FLEXDIST) $(srcdir)/lev_comp.l
+	mv $(LEXYYC) lev_lex.c
+
+# with all of extern.h's functions to complain about, we drown in
+# 'defined but not used' without -u
+lintlev:
+	@lint -axhu -I../include -I$(srcdir)/../include -DLINT $(SPLEVSRC) $(CALLOC) $(CNAMING) | sed '/_flsbuf/d'
+
+
+#	dependencies for dgn_comp
+#
+dgn_comp:  $(DGNCOMPOBJS)
+	$(CC) $(LFLAGS) -o dgn_comp $(DGNCOMPOBJS) $(LIBS)
+
+dgn_yacc.o:  dgn_yacc.c $(CONFIG_H) ../include/dgn_file.h ../include/date.h
+dgn_main.o:  dgn_main.c $(CONFIG_H) ../include/dlb.h
+
+# see dgn_comp.l for WEIRD_LEX discussion
+dgn_lex.o:   dgn_lex.c $(CONFIG.H) ../include/dgn_comp.h ../include/dgn_file.h
+	@echo $(CC) -c $(CFLAGS) dgn_lex.c
+	@$(CC) -c $(CFLAGS) -DWEIRD_LEX=`egrep -c _cplusplus dgn_lex.c` dgn_lex.c
+
+
+../include/dgn_comp.h: dgn_yacc.c
+
+dgn_yacc.c: $(srcdir)/dgn_comp.y
+	$(YACC) $(YACCDIST) -d $(srcdir)/dgn_comp.y
+	mv $(YTABC) dgn_yacc.c
+	mv $(YTABH) ../include/dgn_comp.h
+
+dgn_lex.c: $(srcdir)/dgn_comp.l
+	$(LEX) $(FLEXDIST) $(srcdir)/dgn_comp.l
+	mv $(LEXYYC) dgn_lex.c
+
+# with all of extern.h's functions to complain about, we drown in
+# 'defined but not used' without -u
+lintdgn:
+	@lint -axhu -I../include -I$(srcdir)/../include -DLINT $(DGNCOMPSRC) $(CALLOC) | sed '/_flsbuf/d'
+
+
+#	dependencies for recover
+#
+recover$(EXEEXT): $(RECOVOBJS)
+	$(CC) $(LFLAGS) -o recover$(EXEEXT) $(RECOVOBJS) $(LIBS)
+
+recover.o: recover.c $(CONFIG_H) ../include/date.h
+
+
+#	dependencies for dlb
+#
+dlb:	$(DLBOBJS)
+	$(CC) $(LFLAGS) -o dlb $(DLBOBJS) $(LIBS)
+
+dlb_main.o: dlb_main.c $(CONFIG_H) ../include/dlb.h ../include/date.h
+	$(CC) $(CFLAGS) -c $(srcdir)/dlb_main.c
+
+
+#	dependencies for uudecode
+#
+uudecode$(EXEEXT): uudecode.o
+	$(CC) $(LFLAGS) -o $@ uudecode.o
+
+uudecode.o: $(srcdir)/../sys/share/uudecode.c
+	$(CC) $(CFLAGS) -c $(srcdir)/../sys/share/uudecode.c
+
+
+#	dependencies for tile utilities
+#
+TEXT_IO = tiletext.o tiletxt.o $(ONAMING)
+GIFREADERS = gifread.o $(OALLOC)
+PPMWRITERS = ppmwrite.o $(OALLOC)
+
+tileutils: tilemap gif2txt txt2ppm tile2x11
+
+gif2txt: $(GIFREADERS) $(TEXT_IO)
+	$(CC) $(LFLAGS) -o gif2txt $(GIFREADERS) $(TEXT_IO) $(LIBS)
+txt2ppm: $(PPMWRITERS) $(TEXT_IO)
+	$(CC) $(LFLAGS) -o txt2ppm $(PPMWRITERS) $(TEXT_IO) $(LIBS)
+
+tile2x11: tile2x11.o $(TEXT_IO)
+	$(CC) $(LFLAGS) -o tile2x11 tile2x11.o $(TEXT_IO) $(LIBS)
+
+tile2img.ttp: tile2img.o bitmfile.o $(TEXT_IO)
+	$(CC) $(LFLAGS) -o tile2img.ttp tile2img.o bitmfile.o $(TEXT_IO) $(LIBS)
+
+tile2bmp$(EXEEXT): tile2bmp.o $(TEXT_IO)
+	$(CC) $(LFLAGS) -o $@ tile2bmp.o $(TEXT_IO)
+
+xpm2img.ttp: xpm2img.o bitmfile.o
+	$(CC) $(LFLAGS) -o xpm2img.ttp xpm2img.o bitmfile.o $(LIBS)
+
+tile2beos: tile2beos.o $(TEXT_IO)
+	$(CC) $(LFLAGS) -o tile2beos tile2beos.o $(TEXT_IO) -lbe
+
+tilemap: $(srcdir)/../win/share/tilemap.c $(HACK_H)
+	$(CC) $(CFLAGS) $(LFLAGS) -o tilemap $(srcdir)/../win/share/tilemap.c $(LIBS)
+$(srcdir)/../src/tile.c: tilemap
+	./tilemap
+#../include/tile.h: ../win/share/tile.h tilemap
+#	./tilemap
+
+../include/tile.h: ../win/share/tile.h tilemap
+	./tilemap
+#	cp ../win/share/tile.h ../include/tile.h
+
+tiletext.o: $(srcdir)/../win/share/tiletext.c $(CONFIG_H) ../include/tile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/share/tiletext.c
+tiletxt.o: $(srcdir)/../win/share/tilemap.c $(HACK_H)
+	$(CC) $(CFLAGS) -c -DTILETEXT $(srcdir)/../win/share/tilemap.c
+	mv tilemap.o tiletxt.o
+
+gifread.o: $(srcdir)/../win/share/gifread.c $(CONFIG_H) ../include/tile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/share/gifread.c
+ppmwrite.o: $(srcdir)/../win/share/ppmwrite.c $(CONFIG_H) ../include/tile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/share/ppmwrite.c
+
+tile2bmp.o: $(srcdir)/../win/share/tile2bmp.c $(HACK_H) ../include/tile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/share/tile2bmp.c
+
+tile2x11.o: $(srcdir)/../win/X11/tile2x11.c $(HACK_H) ../include/tile.h \
+						../include/tile2x11.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/X11/tile2x11.c
+
+tile2img.o: $(srcdir)/../win/gem/tile2img.c $(HACK_H) ../include/tile.h \
+						../include/bitmfile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/tile2img.c
+xpm2img.o: $(srcdir)/../win/gem/xpm2img.c $(HACK_H) ../include/bitmfile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/xpm2img.c
+bitmfile.o: $(srcdir)/../win/gem/bitmfile.c ../include/bitmfile.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../win/gem/bitmfile.c
+
+tile2beos.o: $(srcdir)/../win/BeOS/tile2beos.cpp $(HACK_H) ../include/tile.h
+	$(CXX) $(CFLAGS) -c $(srcdir)/../win/BeOS/tile2beos.cpp
+
+# using dependencies like
+#	../src/foo::
+#		@( cd ../src ; $(MAKE) foo )
+# would always force foo to be up-to-date according to the src Makefile
+# when it's needed here.  unfortunately, some makes believe this syntax
+# means foo always changes, instead of foo should always be checked.
+# therefore, approximate via config.h dependencies, and hope that anybody
+# changing anything other than basic configuration also knows when not
+# to improvise things not in the instructions, like 'make makedefs' here
+# in util...
+
+# make sure object files from src are available when needed
+#
+$(OBJDIR)/alloc.o: $(srcdir)/../src/alloc.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/alloc.c -o $@
+$(OBJDIR)/drawing.o: $(srcdir)/../src/drawing.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/drawing.c -o $@
+$(OBJDIR)/decl.o: $(srcdir)/../src/decl.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/decl.c -o $@
+$(OBJDIR)/monst.o: $(srcdir)/../src/monst.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/monst.c -o $@
+$(OBJDIR)/objects.o: $(srcdir)/../src/objects.c $(CONFIG_H)
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/objects.c -o $@
+$(OBJDIR)/dlb.o: $(srcdir)/../src/dlb.c $(HACK_H) ../include/dlb.h
+	$(CC) $(CFLAGS) -c $(srcdir)/../src/dlb.c -o $@
+
+# make sure hack.h dependencies get transitive information
+$(HACK_H): $(CONFIG_H)
+	@( cd ../src ; $(MAKE) $(HACK_H) )
+$(CONFIG_H): ../include/config.h
+	@( cd ../src ; $(MAKE) $(CONFIG_H) )
+
+tags: $(UTILSRCS)
+	@ctags -tw $(UTILSRCS)
+
+clean:
+	-rm -f *.o
+
+spotless: clean
+	-rm -f lev_lex.c lev_yacc.c dgn_lex.c dgn_yacc.c
+	-rm -f ../include/lev_comp.h ../include/dgn_comp.h
+	-rm -f ../include/tile.h
+	-rm -f makedefs$(EXEEXT) lev_comp$(EXEEXT) dgn_comp$(EXEEXT) recover$(EXEEXT) dlb$(EXEEXT) uudecode$(EXEEXT)
+	-rm -f gif2txt txt2ppm tile2x11$(EXEEXT) tile2img.ttp xpm2img.ttp tilemap$(EXEEXT) tile2bmp$(EXEEXT)
+	-rm -f Makefile
+
+tileedit: tileedit.cpp $(TEXT_IO)
+	$(QTDIR)/bin/moc -o tileedit.moc tileedit.h
+	$(CC) -o tileedit -I../include -I$(srcdir)/../include -I$(QTDIR)/include -L$(QTDIR)/lib tileedit.cpp $(TEXT_IO) -lqt
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/acinclude.m4 nethack-autoconf/sys/autoconf/acinclude.m4
--- nethack-3.4.3/sys/autoconf/acinclude.m4	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/acinclude.m4	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,316 @@
+# $Id: acinclude.m4,v 1.8 2007/01/06 16:00:55 j_ali Exp $
+
+# Front-end of AC_ARG_ENABLE
+# Usage:
+#	NETHACK_ARG([feature], [description], [pre-processor switch], [default],
+#	  [action-if-auto])
+# Note that the action-if-auto argument is only used if the default is auto
+# (and the user doesn't specify). The action should set the shell variable
+# enable_feature, with any '-' characters changed into '_'.
+AC_DEFUN([NETHACK_ARG],
+  [AC_MSG_CHECKING(whether to enable $1)
+   AC_ARG_ENABLE([$1], AC_HELP_STRING([--enable-$1],[$2 (default=$4)]),
+     [],m4_if([$4], [auto], [$5], [enable_]m4_bpatsubst([$1], -, _)="[$4]"))
+   AC_MSG_RESULT([$enable_]m4_bpatsubst([$1], -, _))
+   if test "[$enable_]m4_bpatsubst([$1], -, _)" != "no" ; then
+      AC_DEFINE_UNQUOTED([$3], [], [$2])
+   fi
+  ])
+
+# NETHACK_WIN_ENABLE(win, default, help-text)
+# -------------------------------------------
+AC_DEFUN([NETHACK_WIN_ENABLE],[AC_ARG_ENABLE($1-graphics,
+  [AC_HELP_STRING([--enable-$1-graphics],
+    m4_ifval([$3],[$3],[use $1-graphics]) [(default=$2)])],
+  [enable_$1_graphics="$enableval"], [enable_$1_graphics="$2"])
+  if test "$enable_$1_graphics" != "no"; then
+    nethack_wins="$1 $nethack_wins"
+  fi])
+
+# NETHACK_AUTO_WIN_DISABLE(win)
+# -----------------------------
+# Disable a windowing system previously set to auto.
+AC_DEFUN([NETHACK_AUTO_WIN_DISABLE],[enable_$1_graphics="no"
+    nethack_wins=`echo $nethack_wins | sed 's/$1 //'`
+])
+
+# NETHACK__LINK_ADD(DEST, [SOURCE])
+# ---------------------------------
+# Update if there is a newer source
+AC_DEFUN([NETHACK__LINK_ADD],
+	[m4_ifval([$2],[if test ! -f $1 -o ${srcdir}/$2 -nt $1 ; then
+	   NETHACK_LINKS="${NETHACK_LINKS} $1:$2"
+	fi],[NETHACK__LINK_ADD([$1],[$1])])])
+AC_DEFUN([NETHACK_LINKS_ADD],
+	[AC_FOREACH([NETHACK_File],[$1],
+	    [NETHACK__LINK_ADD(m4_bpatsubst(NETHACK_File,[:],[,]))])])
+
+# Autoconf's standard AC_CONFIG_HEADERS() avoids undefining switches because
+# of concern that it might undefine system switches (eg., POSIX_SOURCE).
+# However, we need to override the settings in config.h etc., so we post-process
+# the generated headers and force an explicit define and/or undefine.
+AC_DEFUN([NETHACK_CONFIG_HEADER],
+    [AC_CONFIG_HEADERS([$1],
+      [sed -e 's,^/\* \(#undef .*\) \*/,\1,' \
+        -e '/#define [^ ]*/ { h; s,#define \([^ ]*\).*,#undef \1,p; g; }'] \
+        < m4_bpatsubst([$1], [:.*]) > m4_bpatsubst([$1], [[^.]*:.*], [new])
+      [mv] m4_bpatsubst([$1], [[^.]*:.*], [new]) \
+        m4_bpatsubst([$1], [:.*]),[])])
+
+# NETHACK__ADD_FLAG(output-variable, existing-flags, flag)
+# ---------------------------------
+# Add a compiler flag to a variable. A number of flags are recognized and
+# handled specially (specifically, -I, -L and -l).
+AC_DEFUN([NETHACK__ADD_FLAG],[[
+    case "$3" in
+	-I*|-L*|-l*)
+	    for nethack__eflag in $2; do
+		if test "$nethack__eflag" = "$3"; then
+		    break
+		fi
+	    done
+	    if test "$nethack__eflag" = "$3"; then
+		$1="$2"
+	    else
+		case "$3" in
+		    -L*)$1="$3 $2";;
+		    *)  $1="$2 $3";;
+		esac
+	    fi
+	    ;;
+	*)  $1="$2 $3";;
+    esac
+]])
+
+# NETHACK__ADD_FLAGS(output-variable, existing-flags, new-flags)
+# ---------------------------------
+# Front-end to NETHACK__ADD_FLAG. Add compiler flags to a variable.
+AC_DEFUN([NETHACK__ADD_FLAGS],[
+    $1="$2"
+    for nethack__flag in $3; do
+	NETHACK__ADD_FLAG([$1], [${$1}], [$nethack__flag])
+    done
+])
+
+# NETHACK__TRY_LINK(STUFF, library, cflags, libs, includes, body, action-if,
+#	action-if-not)
+# ---------------------------------
+# Try linking using the given cflags and libs.
+AC_DEFUN([NETHACK__TRY_LINK],[
+    nethack__save_cflags=$CFLAGS
+    nethack__save_libs=$LIBS
+    CFLAGS="$CFLAGS $3"
+    LIBS="$LIBS $4"
+    AC_MSG_CHECKING([if $2 is useable with $CFLAGS and $LIBS])
+    AC_TRY_LINK([$5], [$6],
+      [$1_CFLAGS="$3"; $1_LIBS="$4"; AC_MSG_RESULT([yes]); $7],
+      [AC_MSG_RESULT([no]); $8])
+    CFLAGS=$nethack__save_cflags
+    LIBS=$nethack__save_libs])
+
+# NETHACK__TRY_LIBXAW(STUFF, cflags, libs, action-if, action-if-not)
+# ---------------------------------
+# Try linking with libXaw using the given cflags and libs.
+AC_DEFUN([NETHACK__TRY_LIBXAW], [NETHACK__TRY_LINK([$1], [libXaw], [$2], [$3],
+    [#include <X11/Xaw/List.h>], [XawListUnhighlight((Widget)0);], [$4], [$5])])
+
+# NETHACK_CHECK_LIBXAW(stuff, action-if, action-if-not)
+# ---------------------------------
+# Check if libXaw can be used
+AC_DEFUN([NETHACK_CHECK_LIBXAW],[
+    AC_ARG_VAR([LIBXAW_CFLAGS], [Compiler flags for libXaw, overriding pkg-config])
+    AC_ARG_VAR([LIBXAW_LIBS], [Linker flags for libXaw, overriding pkg-config])
+    # If the user has supplied flags, then believe them.
+    if test -n "$LIBXAW_CFLAGS" -o -n "$LIBXAW_LIBS"; then
+	NETHACK__ADD_FLAGS(nethack__cflags, [$NETHACK__LIBXAW_CFLAGS],
+	  [$LIBXAW_CFLAGS])
+	NETHACK__ADD_FLAGS(nethack__libs, [$NETHACK__LIBXAW_LIBS],
+	  [$LIBXAW_LIBS])
+	NETHACK__TRY_LIBXAW($1, [$nethack__cflags], [$nethack__libs],
+	  [nethack__succeeded=yes], [nethack__succeeded=no])
+    else
+	nethack__succeeded=maybe
+    fi
+    if test $nethack__succeeded = maybe; then
+	PKG_CHECK_EXISTS(xaw8, [nethack__succeeded=yes], [])
+    fi
+    if test $nethack__succeeded = maybe; then
+	PKG_CHECK_EXISTS(xaw7, [nethack__succeeded=yes], [])
+    fi
+    if test $nethack__succeeded = maybe; then
+	PKG_CHECK_EXISTS(xaw6, [nethack__succeeded=yes], [])
+    fi
+    if test $nethack__succeeded = yes; then
+	NETHACK__ADD_FLAGS(nethack__cflags, [$NETHACK__LIBXAW_CFLAGS],
+	  [-I/usr/X11R6/include])
+	NETHACK__ADD_FLAGS(nethack__libs, [$NETHACK__LIBXAW_LIBS],
+	  [-L/usr/X11R6/lib -lXaw -lXmu -lXext -lXt -lX11])
+	NETHACK__TRY_LIBXAW($1, [$nethack__cflags], [$nethack__libs],
+	  [nethack__succeeded=yes], [nethack__succeeded=no])
+    fi
+    if test $nethack__succeeded = yes; then
+	AC_MSG_CHECKING([$1_CFLAGS])
+	AC_MSG_RESULT([${$1_CFLAGS}])
+	AC_SUBST($1_CFLAGS)
+	AC_MSG_CHECKING([$1_LIBS])
+	AC_MSG_RESULT([${$1_LIBS}])
+	AC_SUBST($1_LIBS)
+	$2
+    m4_ifval([$3],[else $3],[])
+    fi
+])
+
+# NETHACK__TRY_LIBPNG(STUFF, cflags, libs, action-if, action-if-not)
+# ---------------------------------
+# Try linking with libpng using the given cflags and libs.
+AC_DEFUN([NETHACK__TRY_LIBPNG], [NETHACK__TRY_LINK([$1], [libpng], [$2], [$3],
+    [#include <png.h>], [png_structp ptr=
+      png_create_write_struct(PNG_LIBPNG_VER_STRING,NULL,NULL,NULL);],
+    [$4], [$5])])
+
+# NETHACK_CHECK_LIBPNG(stuff, action-if, action-if-not)
+# ---------------------------------
+# Check if libpng can be used
+AC_DEFUN([NETHACK_CHECK_LIBPNG],[
+    # Slash'EM may well work with earlier versions,
+    # but 1.2.4 is the earliest tested to date.
+    PKG_CHECK_MODULES(NETHACK__LIBPNG, libpng >= 1.2.4,
+      [nethack__succeeded=maybe], [nethack__succeeded=no])
+    # Slash'EM doesn't use zlib directly, but libpng does. This should
+    # all be handled in libpng.pc, but isn't in many versions of libpng.
+    if test $nethack__succeeded = maybe; then
+	NETHACK__ADD_FLAGS(nethack__libs, [$NETHACK__LIBPNG_LIBS], [-lz])
+	NETHACK__TRY_LIBPNG($1, $NETHACK__LIBPNG_CFLAGS, $nethack__libs,
+	  [nethack__succeeded=yes], [])
+    fi
+    # If the user has supplied flags, then believe them.
+    if test $nethack__succeeded = maybe -a \
+      \( -n "$ZLIB_CFLAGS" -o -n "$ZLIB_LIBS" \); then
+	NETHACK__ADD_FLAGS(nethack__cflags, [$NETHACK__LIBPNG_CFLAGS],
+	  [$ZLIB_CFLAGS])
+	NETHACK__ADD_FLAGS(nethack__libs, [$NETHACK__LIBPNG_LIBS],
+	  [$ZLIB_LIBS])
+	NETHACK__TRY_LIBPNG($1, [$nethack__cflags], [$nethack__libs],
+	  [nethack__succeeded=yes], [])
+    fi
+    # Otherwise, try pkg-config.
+    if test $nethack__succeeded = maybe; then
+	AC_MSG_CHECKING([for zlib])
+	if $PKG_CONFIG --exists zlib; then
+	    AC_MSG_RESULT([yes])
+	    NETHACK__ADD_FLAGS(nethack__cflags, [$NETHACK__LIBPNG_CFLAGS],
+	      [`$PKG_CONFIG --cflags zlib`])
+	    NETHACK__ADD_FLAGS(nethack__libs, [$NETHACK__LIBPNG_LIBS],
+	      [`$PKG_CONFIG --libs zlib`])
+	    NETHACK__TRY_LIBPNG($1, [$nethack__cflags], [$nethack__libs],
+	      [nethack__succeeded=yes], [])
+	else
+	    AC_MSG_RESULT([not found by pkg-config])
+	fi
+    fi
+    # Try the same prefix as libpng since zlib is
+    # likely to be installed in the same place.
+    if test $nethack__succeeded = maybe; then
+        nethack__libpng_prefix=`$PKG_CONFIG --variable=prefix libpng`
+	NETHACK__ADD_FLAG(nethack__cflags, [$NETHACK__LIBPNG_CFLAGS],
+	  [-I$nethack__libpng_prefix/include])
+	NETHACK__ADD_FLAG(nethack__libs, [$NETHACK__LIBPNG_LIBS],
+	  [-L$nethack__libpng_prefix/lib])
+	NETHACK__ADD_FLAG(nethack__libs, [$nethack__libs], [-lz])
+        NETHACK__TRY_LIBPNG($1, [$nethack__cflags], [$nethack__libs],
+          [nethack__succeeded=yes], [])
+    fi
+    if test $nethack__succeeded = yes; then
+	AC_MSG_CHECKING([$1_CFLAGS])
+	AC_MSG_RESULT([${$1_CFLAGS}])
+	AC_SUBST($1_CFLAGS)
+	AC_MSG_CHECKING([$1_LIBS])
+	AC_MSG_RESULT([${$1_LIBS}])
+	AC_SUBST($1_LIBS)
+	$2
+    m4_ifval([$3],[else $3],[])
+    fi
+])
+
+# NETHACK_COMMAND_IFELSE(command, action-if, action-if-not)
+# ---------------------------------
+# If command returns an exit status of 0 when executed, run shell commands
+# action-if. Otherwise, run shell commands action-if-not.
+AC_DEFUN([NETHACK_COMMAND_IFELSE], [
+    AS_IF([AC_TRY_COMMAND([$1])], [$2],
+    [echo "$as_me: program exited with status $ac_status" >&AS_MESSAGE_LOG_FD
+    m4_ifvaln([$3], [( exit $ac_status )
+	    $3])])])
+
+# NETHACK_COMPRESS_EXT
+# ---------------------------------
+# Check the extension used for compressed files by the compressor.
+AC_DEFUN([NETHACK_COMPRESS_EXT], [
+    AC_MSG_CHECKING([for suffix of compressed files])
+    rm -f conftest conftest.*
+    echo "Test" > conftest
+    nethack__extension=""
+    NETHACK_COMMAND_IFELSE([$COMPRESS $COMPRESS_OPTIONS conftest], [
+	for nethack__file in \
+	  `(ls conftest.bz2 conftest.gz conftest.Z conftest.*) 2>/dev/null`; do
+	    case $nethack__file in
+		*)  nethack__extension=`expr "$nethack__file" : '.*\(\..*\)'`
+		    break
+		    ;;
+	    esac
+	done
+	if test -z "$nethack__extension"; then
+	    AC_MSG_FAILURE([test failed: cannot find compressed output])
+	fi
+	rm -f conftest conftest.*
+	AC_DEFINE_UNQUOTED(COMPRESS_EXTENSION, ["$nethack__extension"],
+	  [Extension of compressed files])
+	AC_MSG_RESULT([$nethack__extension])
+	], [AC_MSG_FAILURE([test failed: cannot compress])])])
+
+# NETHACK_PROG_COMPRESS
+# ---------------------------------
+# Configure the compress program.
+AC_DEFUN([NETHACK_PROG_COMPRESS], [
+    AC_ARG_WITH([compression], [AS_HELP_STRING([--with-compression=PROGRAM],
+	    [Set the program to compress data files (default=auto)])],
+	    [], [with_compression=auto])
+    case $with_compression in
+	auto)
+	    AC_PATH_PROGS(COMPRESS, [bzip2 gzip compress], [:])
+	    ;;
+	no)
+	    COMPRESS=":"
+	    ;;
+	*)
+	    set dummy $with_compression
+	    AC_PATH_PROG(COMPRESS, [$[2]], [:])
+	    ;;
+    esac
+    AC_MSG_CHECKING([for compression support])
+    if test "$with_compression" = "auto" ; then
+	AC_DEFINE_UNQUOTED(COMPRESS, ["$COMPRESS"], [Compression program])
+	COMPRESS_OPTIONS=""
+	if test "$COMPRESS" = ":"; then
+	    AC_DEFINE(INTERNAL_COMP, [1], [Use NetHack's compression routines])
+	fi
+    elif test "$with_compression" = "no" ; then
+	COMPRESS=":"
+	AC_DEFINE(INTERNAL_COMP, [1], [Use NetHack's compression routines])
+    else
+	AC_DEFINE_UNQUOTED(COMPRESS, ["$COMPRESS"], [Compression program])
+	set dummy $with_compression
+	shift
+	shift
+	if test -n "$[1]"; then
+	    AC_DEFINE_UNQUOTED(COMPRESS_OPTIONS, ["$[@]"],
+	      [Options to pass to the compression program, if any])
+	fi
+	COMPRESS_OPTIONS="$[@]"
+    fi
+    if test "$COMPRESS" = ":"; then
+	AC_MSG_RESULT([internal])
+    else
+	AC_MSG_RESULT([$COMPRESS $COMPRESS_OPTIONS])
+	NETHACK_COMPRESS_EXT
+    fi])
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/autoconf.hin nethack-autoconf/sys/autoconf/autoconf.hin
--- nethack-3.4.3/sys/autoconf/autoconf.hin	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/autoconf.hin	2009-02-17 19:44:47.000000000 +0100
@@ -0,0 +1,180 @@
+/* sys/autoconf/autoconf.hin.  Generated from sys/autoconf/configure.ac by autoheader.  */
+
+#ifndef AUTOCONF_H
+#define AUTOCONF_H
+
+/* Exceptions to autopickup (experimental) */
+#undef AUTOPICKUP_EXCEPTIONS
+
+/* A BSD like system */
+#undef BSD
+
+/* Allow smaller screens */
+#undef CLIPPING
+
+/* Compression program */
+#undef COMPRESS
+
+/* Extension of compressed files */
+#undef COMPRESS_EXTENSION
+
+/* Options to pass to the compression program, if any */
+#undef COMPRESS_OPTIONS
+
+/* Unix on win32 */
+#undef CYGWIN32
+
+/* The default windowing system */
+#undef DEFAULT_WINDOW_SYS
+
+/* Data librarian */
+#undef DLB
+
+/* Engraving the E-word repels monsters */
+#undef ELBERETH
+
+/* Show experience on bottom line */
+#undef EXP_ON_BOTL
+
+/* Gold is kept on object chains (experimental) */
+#undef GOLDOBJ
+
+/* Define to 1 if you have the <curses.h> header file. */
+#undef HAVE_CURSES_H
+
+/* Define to 1 if you have the declaration of `strncmpi', and to 0 if you
+   don't. */
+#undef HAVE_DECL_STRNCMPI
+
+/* Define to 1 if you have the declaration of `strnicmp', and to 0 if you
+   don't. */
+#undef HAVE_DECL_STRNICMP
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#undef HAVE_INTTYPES_H
+
+/* Define to 1 if you have the <memory.h> header file. */
+#undef HAVE_MEMORY_H
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#undef HAVE_STDINT_H
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#undef HAVE_STDLIB_H
+
+/* Define to 1 if you have the <strings.h> header file. */
+#undef HAVE_STRINGS_H
+
+/* Define to 1 if you have the <string.h> header file. */
+#undef HAVE_STRING_H
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#undef HAVE_SYS_STAT_H
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#undef HAVE_SYS_TYPES_H
+
+/* Define to 1 if you have the <termcap.h> header file. */
+#undef HAVE_TERMCAP_H
+
+/* Define this if you have the tparm function in an included lib. */
+#undef HAVE_TPARM
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#undef HAVE_UNISTD_H
+
+/* Use NetHack's compression routines */
+#undef INTERNAL_COMP
+
+/* Keystone Kops */
+#undef KOPS
+
+/* GNU Linux */
+#undef LINUX
+
+/* Use regular expressions */
+#undef MENU_COLOR_REGEX
+
+/* GNU regex is available */
+#undef MENU_COLOR_REGEX_GNU
+
+/* Posix regex is available */
+#undef MENU_COLOR_REGEX_POSIX
+
+/* Microsoft Window's native graphics */
+#undef MSWIN_GRAPHICS
+
+/* No void type available */
+#undef NOVOID
+
+/* Define to the address where bug reports for this package should be sent. */
+#undef PACKAGE_BUGREPORT
+
+/* Define to the full name of this package. */
+#undef PACKAGE_NAME
+
+/* Define to the full name and version of this package. */
+#undef PACKAGE_STRING
+
+/* Define to the one symbol short name of this package. */
+#undef PACKAGE_TARNAME
+
+/* Define to the version of this package. */
+#undef PACKAGE_VERSION
+
+/* Redo last command */
+#undef REDO
+
+/* Special Rogue-like levels */
+#undef REINCARNATION
+
+/* Show score on bottom line */
+#undef SCORE_ON_BOTL
+
+/* Succubi/incubi seduction */
+#undef SEDUCE
+
+/* Kitchen sinks */
+#undef SINKS
+
+/* Define to 1 if you have the ANSI C header files. */
+#undef STDC_HEADERS
+
+/* Ability to ride monsters */
+#undef STEED
+
+/* Use strncmpi */
+#undef STRNCMPI
+
+/* A System V like system */
+#undef SYSV
+
+/* Using msleep */
+#undef TIMED_DELAY
+
+/* Tourist class */
+#undef TOURIST
+
+/* Console output */
+#undef TTY_GRAPHICS
+
+/* Allow user-defined mapping from messages to sounds) */
+#undef USER_SOUNDS
+
+/* Fancy mazes */
+#undef WALLIFIED_MAZE
+
+/* An MS-Windows system */
+#undef WIN32
+
+/* The person allowed to use the -D option */
+#undef WIZARD
+
+/* X11 graphics */
+#undef X11_GRAPHICS
+
+/* Define to 1 if `lex' declares `yytext' as a `char *' by default, not a
+   `char[]'. */
+#undef YYTEXT_POINTER
+
+#endif /* AUTOCONF_H */
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/bootstrap.sh nethack-autoconf/sys/autoconf/bootstrap.sh
--- nethack-3.4.3/sys/autoconf/bootstrap.sh	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/bootstrap.sh	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,25 @@
+#!/bin/sh
+#
+# $Id: bootstrap.sh,v 1.2 2005/09/17 14:58:33 j_ali Exp $
+#
+case "$0" in
+    */*)	confdir=`echo $0 | sed 's:/[^/]*$::'` ;;
+    *)		confdir='.' ;;
+esac
+set -e
+cd $confdir
+# Avoid autoheader creating backup file
+rm -f autoconf.hin
+aclocal
+# We can't avoid running autotools in multiple directories,
+# but at least we can have only one cache.
+if [ -d autom4te.cache ]; then		# aclocal v1.7 doesn't create cache
+    rm -rf ../../autom4te.cache
+    mv autom4te.cache ../..
+fi
+# autoheader must be run from topdir since configure.ac refers
+# to sys/autoconf/autoconf.hin
+(cd ../.. && autoheader -I sys/autoconf sys/autoconf/configure.ac)
+mv ../../autom4te.cache .
+autoconf configure.ac > ../../configure
+rm -rf autom4te.cache aclocal.m4
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/config.guess nethack-autoconf/sys/autoconf/config.guess
--- nethack-3.4.3/sys/autoconf/config.guess	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/config.guess	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,1499 @@
+#! /bin/sh
+# Attempt to guess a canonical system name.
+#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+
+timestamp='2005-05-27'
+
+# This file is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+
+# Originally written by Per Bothner <per@bothner.com>.
+# Please send patches to <config-patches@gnu.org>.  Submit a context
+# diff and a properly formatted ChangeLog entry.
+#
+# This script attempts to guess a canonical system name similar to
+# config.sub.  If it succeeds, it prints the system name on stdout, and
+# exits with 0.  Otherwise, it exits with 1.
+#
+# The plan is that this can be called by configure scripts if you
+# don't specify an explicit build system type.
+
+me=`echo "$0" | sed -e 's,.*/,,'`
+
+usage="\
+Usage: $0 [OPTION]
+
+Output the configuration name of the system \`$me' is run on.
+
+Operation modes:
+  -h, --help         print this help, then exit
+  -t, --time-stamp   print date of last modification, then exit
+  -v, --version      print version number, then exit
+
+Report bugs and patches to <config-patches@gnu.org>."
+
+version="\
+GNU config.guess ($timestamp)
+
+Originally written by Per Bothner.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+Free Software Foundation, Inc.
+
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+
+help="
+Try \`$me --help' for more information."
+
+# Parse command line
+while test $# -gt 0 ; do
+  case $1 in
+    --time-stamp | --time* | -t )
+       echo "$timestamp" ; exit ;;
+    --version | -v )
+       echo "$version" ; exit ;;
+    --help | --h* | -h )
+       echo "$usage"; exit ;;
+    -- )     # Stop option processing
+       shift; break ;;
+    - )	# Use stdin as input.
+       break ;;
+    -* )
+       echo "$me: invalid option $1$help" >&2
+       exit 1 ;;
+    * )
+       break ;;
+  esac
+done
+
+if test $# != 0; then
+  echo "$me: too many arguments$help" >&2
+  exit 1
+fi
+
+trap 'exit 1' 1 2 15
+
+# CC_FOR_BUILD -- compiler used by this script. Note that the use of a
+# compiler to aid in system detection is discouraged as it requires
+# temporary files to be created and, as you can see below, it is a
+# headache to deal with in a portable fashion.
+
+# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
+# use `HOST_CC' if defined, but it is deprecated.
+
+# Portable tmp directory creation inspired by the Autoconf team.
+
+set_cc_for_build='
+trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
+trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
+: ${TMPDIR=/tmp} ;
+ { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+ { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
+ { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+ { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
+dummy=$tmp/dummy ;
+tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
+case $CC_FOR_BUILD,$HOST_CC,$CC in
+ ,,)    echo "int x;" > $dummy.c ;
+	for c in cc gcc c89 c99 ; do
+	  if ($c -c -o $dummy.o $dummy.c) >/dev/null 2>&1 ; then
+	     CC_FOR_BUILD="$c"; break ;
+	  fi ;
+	done ;
+	if test x"$CC_FOR_BUILD" = x ; then
+	  CC_FOR_BUILD=no_compiler_found ;
+	fi
+	;;
+ ,,*)   CC_FOR_BUILD=$CC ;;
+ ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+esac ;'
+
+# This is needed to find uname on a Pyramid OSx when run in the BSD universe.
+# (ghazi@noc.rutgers.edu 1994-08-24)
+if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
+	PATH=$PATH:/.attbin ; export PATH
+fi
+
+UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
+UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
+UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
+UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
+
+# Note: order is significant - the case branches are not exclusive.
+
+case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+    *:NetBSD:*:*)
+	# NetBSD (nbsd) targets should (where applicable) match one or
+	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
+	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
+	# switched to ELF, *-*-netbsd* would select the old
+	# object file format.  This provides both forward
+	# compatibility and a consistent mechanism for selecting the
+	# object file format.
+	#
+	# Note: NetBSD doesn't particularly care about the vendor
+	# portion of the name.  We always set it to "unknown".
+	sysctl="sysctl -n hw.machine_arch"
+	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
+	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
+	case "${UNAME_MACHINE_ARCH}" in
+	    armeb) machine=armeb-unknown ;;
+	    arm*) machine=arm-unknown ;;
+	    sh3el) machine=shl-unknown ;;
+	    sh3eb) machine=sh-unknown ;;
+	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+	esac
+	# The Operating System including object format, if it has switched
+	# to ELF recently, or will in the future.
+	case "${UNAME_MACHINE_ARCH}" in
+	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+		eval $set_cc_for_build
+		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
+			| grep __ELF__ >/dev/null
+		then
+		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
+		    # Return netbsd for either.  FIX?
+		    os=netbsd
+		else
+		    os=netbsdelf
+		fi
+		;;
+	    *)
+	        os=netbsd
+		;;
+	esac
+	# The OS release
+	# Debian GNU/NetBSD machines have a different userland, and
+	# thus, need a distinct triplet. However, they do not need
+	# kernel version information, so it can be replaced with a
+	# suitable tag, in the style of linux-gnu.
+	case "${UNAME_VERSION}" in
+	    Debian*)
+		release='-gnu'
+		;;
+	    *)
+		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+		;;
+	esac
+	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
+	# contains redundant information, the shorter form:
+	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
+	echo "${machine}-${os}${release}"
+	exit ;;
+    amd64:OpenBSD:*:*)
+	echo x86_64-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    amiga:OpenBSD:*:*)
+	echo m68k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    cats:OpenBSD:*:*)
+	echo arm-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    hp300:OpenBSD:*:*)
+	echo m68k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    luna88k:OpenBSD:*:*)
+    	echo m88k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    mac68k:OpenBSD:*:*)
+	echo m68k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    macppc:OpenBSD:*:*)
+	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    mvme68k:OpenBSD:*:*)
+	echo m68k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    mvme88k:OpenBSD:*:*)
+	echo m88k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    mvmeppc:OpenBSD:*:*)
+	echo powerpc-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    sgi:OpenBSD:*:*)
+	echo mips64-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    sun3:OpenBSD:*:*)
+	echo m68k-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    *:OpenBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    *:ekkoBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+	exit ;;
+    macppc:MirBSD:*:*)
+	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
+    *:MirBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
+    alpha:OSF1:*:*)
+	case $UNAME_RELEASE in
+	*4.0)
+		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
+		;;
+	*5.*)
+	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+		;;
+	esac
+	# According to Compaq, /usr/sbin/psrinfo has been available on
+	# OSF/1 and Tru64 systems produced since 1995.  I hope that
+	# covers most systems running today.  This code pipes the CPU
+	# types through head -n 1, so we only detect the type of CPU 0.
+	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
+	case "$ALPHA_CPU_TYPE" in
+	    "EV4 (21064)")
+		UNAME_MACHINE="alpha" ;;
+	    "EV4.5 (21064)")
+		UNAME_MACHINE="alpha" ;;
+	    "LCA4 (21066/21068)")
+		UNAME_MACHINE="alpha" ;;
+	    "EV5 (21164)")
+		UNAME_MACHINE="alphaev5" ;;
+	    "EV5.6 (21164A)")
+		UNAME_MACHINE="alphaev56" ;;
+	    "EV5.6 (21164PC)")
+		UNAME_MACHINE="alphapca56" ;;
+	    "EV5.7 (21164PC)")
+		UNAME_MACHINE="alphapca57" ;;
+	    "EV6 (21264)")
+		UNAME_MACHINE="alphaev6" ;;
+	    "EV6.7 (21264A)")
+		UNAME_MACHINE="alphaev67" ;;
+	    "EV6.8CB (21264C)")
+		UNAME_MACHINE="alphaev68" ;;
+	    "EV6.8AL (21264B)")
+		UNAME_MACHINE="alphaev68" ;;
+	    "EV6.8CX (21264D)")
+		UNAME_MACHINE="alphaev68" ;;
+	    "EV6.9A (21264/EV69A)")
+		UNAME_MACHINE="alphaev69" ;;
+	    "EV7 (21364)")
+		UNAME_MACHINE="alphaev7" ;;
+	    "EV7.9 (21364A)")
+		UNAME_MACHINE="alphaev79" ;;
+	esac
+	# A Pn.n version is a patched version.
+	# A Vn.n version is a released version.
+	# A Tn.n version is a released field test version.
+	# A Xn.n version is an unreleased experimental baselevel.
+	# 1.2 uses "1.2" for uname -r.
+	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+	exit ;;
+    Alpha\ *:Windows_NT*:*)
+	# How do we know it's Interix rather than the generic POSIX subsystem?
+	# Should we change UNAME_MACHINE based on the output of uname instead
+	# of the specific Alpha model?
+	echo alpha-pc-interix
+	exit ;;
+    21064:Windows_NT:50:3)
+	echo alpha-dec-winnt3.5
+	exit ;;
+    Amiga*:UNIX_System_V:4.0:*)
+	echo m68k-unknown-sysv4
+	exit ;;
+    *:[Aa]miga[Oo][Ss]:*:*)
+	echo ${UNAME_MACHINE}-unknown-amigaos
+	exit ;;
+    *:[Mm]orph[Oo][Ss]:*:*)
+	echo ${UNAME_MACHINE}-unknown-morphos
+	exit ;;
+    *:OS/390:*:*)
+	echo i370-ibm-openedition
+	exit ;;
+    *:z/VM:*:*)
+	echo s390-ibm-zvmoe
+	exit ;;
+    *:OS400:*:*)
+        echo powerpc-ibm-os400
+	exit ;;
+    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
+	echo arm-acorn-riscix${UNAME_RELEASE}
+	exit ;;
+    arm:riscos:*:*|arm:RISCOS:*:*)
+	echo arm-unknown-riscos
+	exit ;;
+    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
+	echo hppa1.1-hitachi-hiuxmpp
+	exit ;;
+    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
+	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
+	if test "`(/bin/universe) 2>/dev/null`" = att ; then
+		echo pyramid-pyramid-sysv3
+	else
+		echo pyramid-pyramid-bsd
+	fi
+	exit ;;
+    NILE*:*:*:dcosx)
+	echo pyramid-pyramid-svr4
+	exit ;;
+    DRS?6000:unix:4.0:6*)
+	echo sparc-icl-nx6
+	exit ;;
+    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
+	case `/usr/bin/uname -p` in
+	    sparc) echo sparc-icl-nx7; exit ;;
+	esac ;;
+    sun4H:SunOS:5.*:*)
+	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    i86pc:SunOS:5.*:*)
+	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:6*:*)
+	# According to config.sub, this is the proper way to canonicalize
+	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
+	# it's likely to be more like Solaris than SunOS4.
+	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:*:*)
+	case "`/usr/bin/arch -k`" in
+	    Series*|S4*)
+		UNAME_RELEASE=`uname -v`
+		;;
+	esac
+	# Japanese Language versions have a version number like `4.1.3-JL'.
+	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
+	exit ;;
+    sun3*:SunOS:*:*)
+	echo m68k-sun-sunos${UNAME_RELEASE}
+	exit ;;
+    sun*:*:4.2BSD:*)
+	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
+	case "`/bin/arch`" in
+	    sun3)
+		echo m68k-sun-sunos${UNAME_RELEASE}
+		;;
+	    sun4)
+		echo sparc-sun-sunos${UNAME_RELEASE}
+		;;
+	esac
+	exit ;;
+    aushp:SunOS:*:*)
+	echo sparc-auspex-sunos${UNAME_RELEASE}
+	exit ;;
+    # The situation for MiNT is a little confusing.  The machine name
+    # can be virtually everything (everything which is not
+    # "atarist" or "atariste" at least should have a processor
+    # > m68000).  The system name ranges from "MiNT" over "FreeMiNT"
+    # to the lowercase version "mint" (or "freemint").  Finally
+    # the system name "TOS" denotes a system which is actually not
+    # MiNT.  But MiNT is downward compatible to TOS, so this should
+    # be no problem.
+    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
+        echo m68k-atari-mint${UNAME_RELEASE}
+	exit ;;
+    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
+	echo m68k-atari-mint${UNAME_RELEASE}
+        exit ;;
+    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
+        echo m68k-atari-mint${UNAME_RELEASE}
+	exit ;;
+    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
+        echo m68k-milan-mint${UNAME_RELEASE}
+        exit ;;
+    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
+        echo m68k-hades-mint${UNAME_RELEASE}
+        exit ;;
+    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
+        echo m68k-unknown-mint${UNAME_RELEASE}
+        exit ;;
+    m68k:machten:*:*)
+	echo m68k-apple-machten${UNAME_RELEASE}
+	exit ;;
+    powerpc:machten:*:*)
+	echo powerpc-apple-machten${UNAME_RELEASE}
+	exit ;;
+    RISC*:Mach:*:*)
+	echo mips-dec-mach_bsd4.3
+	exit ;;
+    RISC*:ULTRIX:*:*)
+	echo mips-dec-ultrix${UNAME_RELEASE}
+	exit ;;
+    VAX*:ULTRIX*:*:*)
+	echo vax-dec-ultrix${UNAME_RELEASE}
+	exit ;;
+    2020:CLIX:*:* | 2430:CLIX:*:*)
+	echo clipper-intergraph-clix${UNAME_RELEASE}
+	exit ;;
+    mips:*:*:UMIPS | mips:*:*:RISCos)
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+#ifdef __cplusplus
+#include <stdio.h>  /* for printf() prototype */
+	int main (int argc, char *argv[]) {
+#else
+	int main (argc, argv) int argc; char *argv[]; {
+#endif
+	#if defined (host_mips) && defined (MIPSEB)
+	#if defined (SYSTYPE_SYSV)
+	  printf ("mips-mips-riscos%ssysv\n", argv[1]); exit (0);
+	#endif
+	#if defined (SYSTYPE_SVR4)
+	  printf ("mips-mips-riscos%ssvr4\n", argv[1]); exit (0);
+	#endif
+	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
+	  printf ("mips-mips-riscos%sbsd\n", argv[1]); exit (0);
+	#endif
+	#endif
+	  exit (-1);
+	}
+EOF
+	$CC_FOR_BUILD -o $dummy $dummy.c &&
+	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+	  SYSTEM_NAME=`$dummy $dummyarg` &&
+	    { echo "$SYSTEM_NAME"; exit; }
+	echo mips-mips-riscos${UNAME_RELEASE}
+	exit ;;
+    Motorola:PowerMAX_OS:*:*)
+	echo powerpc-motorola-powermax
+	exit ;;
+    Motorola:*:4.3:PL8-*)
+	echo powerpc-harris-powermax
+	exit ;;
+    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
+	echo powerpc-harris-powermax
+	exit ;;
+    Night_Hawk:Power_UNIX:*:*)
+	echo powerpc-harris-powerunix
+	exit ;;
+    m88k:CX/UX:7*:*)
+	echo m88k-harris-cxux7
+	exit ;;
+    m88k:*:4*:R4*)
+	echo m88k-motorola-sysv4
+	exit ;;
+    m88k:*:3*:R3*)
+	echo m88k-motorola-sysv3
+	exit ;;
+    AViiON:dgux:*:*)
+        # DG/UX returns AViiON for all architectures
+        UNAME_PROCESSOR=`/usr/bin/uname -p`
+	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
+	then
+	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
+	       [ ${TARGET_BINARY_INTERFACE}x = x ]
+	    then
+		echo m88k-dg-dgux${UNAME_RELEASE}
+	    else
+		echo m88k-dg-dguxbcs${UNAME_RELEASE}
+	    fi
+	else
+	    echo i586-dg-dgux${UNAME_RELEASE}
+	fi
+ 	exit ;;
+    M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
+	echo m88k-dolphin-sysv3
+	exit ;;
+    M88*:*:R3*:*)
+	# Delta 88k system running SVR3
+	echo m88k-motorola-sysv3
+	exit ;;
+    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
+	echo m88k-tektronix-sysv3
+	exit ;;
+    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
+	echo m68k-tektronix-bsd
+	exit ;;
+    *:IRIX*:*:*)
+	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
+	exit ;;
+    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
+	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
+    i*86:AIX:*:*)
+	echo i386-ibm-aix
+	exit ;;
+    ia64:AIX:*:*)
+	if [ -x /usr/bin/oslevel ] ; then
+		IBM_REV=`/usr/bin/oslevel`
+	else
+		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+	fi
+	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
+	exit ;;
+    *:AIX:2:3)
+	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
+		eval $set_cc_for_build
+		sed 's/^		//' << EOF >$dummy.c
+		#include <sys/systemcfg.h>
+
+		main()
+			{
+			if (!__power_pc())
+				exit(1);
+			puts("powerpc-ibm-aix3.2.5");
+			exit(0);
+			}
+EOF
+		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
+		then
+			echo "$SYSTEM_NAME"
+		else
+			echo rs6000-ibm-aix3.2.5
+		fi
+	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
+		echo rs6000-ibm-aix3.2.4
+	else
+		echo rs6000-ibm-aix3.2
+	fi
+	exit ;;
+    *:AIX:*:[45])
+	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+		IBM_ARCH=rs6000
+	else
+		IBM_ARCH=powerpc
+	fi
+	if [ -x /usr/bin/oslevel ] ; then
+		IBM_REV=`/usr/bin/oslevel`
+	else
+		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+	fi
+	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
+	exit ;;
+    *:AIX:*:*)
+	echo rs6000-ibm-aix
+	exit ;;
+    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
+	echo romp-ibm-bsd4.4
+	exit ;;
+    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
+	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
+	exit ;;                             # report: romp-ibm BSD 4.3
+    *:BOSX:*:*)
+	echo rs6000-bull-bosx
+	exit ;;
+    DPX/2?00:B.O.S.:*:*)
+	echo m68k-bull-sysv3
+	exit ;;
+    9000/[34]??:4.3bsd:1.*:*)
+	echo m68k-hp-bsd
+	exit ;;
+    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
+	echo m68k-hp-bsd4.4
+	exit ;;
+    9000/[34678]??:HP-UX:*:*)
+	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+	case "${UNAME_MACHINE}" in
+	    9000/31? )            HP_ARCH=m68000 ;;
+	    9000/[34]?? )         HP_ARCH=m68k ;;
+	    9000/[678][0-9][0-9])
+		if [ -x /usr/bin/getconf ]; then
+		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
+                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
+                    case "${sc_cpu_version}" in
+                      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
+                      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
+                      532)                      # CPU_PA_RISC2_0
+                        case "${sc_kernel_bits}" in
+                          32) HP_ARCH="hppa2.0n" ;;
+                          64) HP_ARCH="hppa2.0w" ;;
+			  '') HP_ARCH="hppa2.0" ;;   # HP-UX 10.20
+                        esac ;;
+                    esac
+		fi
+		if [ "${HP_ARCH}" = "" ]; then
+		    eval $set_cc_for_build
+		    sed 's/^              //' << EOF >$dummy.c
+
+              #define _HPUX_SOURCE
+              #include <stdlib.h>
+              #include <unistd.h>
+
+              int main ()
+              {
+              #if defined(_SC_KERNEL_BITS)
+                  long bits = sysconf(_SC_KERNEL_BITS);
+              #endif
+                  long cpu  = sysconf (_SC_CPU_VERSION);
+
+                  switch (cpu)
+              	{
+              	case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
+              	case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
+              	case CPU_PA_RISC2_0:
+              #if defined(_SC_KERNEL_BITS)
+              	    switch (bits)
+              		{
+              		case 64: puts ("hppa2.0w"); break;
+              		case 32: puts ("hppa2.0n"); break;
+              		default: puts ("hppa2.0"); break;
+              		} break;
+              #else  /* !defined(_SC_KERNEL_BITS) */
+              	    puts ("hppa2.0"); break;
+              #endif
+              	default: puts ("hppa1.0"); break;
+              	}
+                  exit (0);
+              }
+EOF
+		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
+		    test -z "$HP_ARCH" && HP_ARCH=hppa
+		fi ;;
+	esac
+	if [ ${HP_ARCH} = "hppa2.0w" ]
+	then
+	    # avoid double evaluation of $set_cc_for_build
+	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
+
+	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+	    # generating 64-bit code.  GNU and HP use different nomenclature:
+	    #
+	    # $ CC_FOR_BUILD=cc ./config.guess
+	    # => hppa2.0w-hp-hpux11.23
+	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
+	    # => hppa64-hp-hpux11.23
+
+	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
+		grep __LP64__ >/dev/null
+	    then
+		HP_ARCH="hppa2.0w"
+	    else
+		HP_ARCH="hppa64"
+	    fi
+	fi
+	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
+	exit ;;
+    ia64:HP-UX:*:*)
+	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+	echo ia64-hp-hpux${HPUX_REV}
+	exit ;;
+    3050*:HI-UX:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#include <unistd.h>
+	int
+	main ()
+	{
+	  long cpu = sysconf (_SC_CPU_VERSION);
+	  /* The order matters, because CPU_IS_HP_MC68K erroneously returns
+	     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct
+	     results, however.  */
+	  if (CPU_IS_PA_RISC (cpu))
+	    {
+	      switch (cpu)
+		{
+		  case CPU_PA_RISC1_0: puts ("hppa1.0-hitachi-hiuxwe2"); break;
+		  case CPU_PA_RISC1_1: puts ("hppa1.1-hitachi-hiuxwe2"); break;
+		  case CPU_PA_RISC2_0: puts ("hppa2.0-hitachi-hiuxwe2"); break;
+		  default: puts ("hppa-hitachi-hiuxwe2"); break;
+		}
+	    }
+	  else if (CPU_IS_HP_MC68K (cpu))
+	    puts ("m68k-hitachi-hiuxwe2");
+	  else puts ("unknown-hitachi-hiuxwe2");
+	  exit (0);
+	}
+EOF
+	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
+		{ echo "$SYSTEM_NAME"; exit; }
+	echo unknown-hitachi-hiuxwe2
+	exit ;;
+    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
+	echo hppa1.1-hp-bsd
+	exit ;;
+    9000/8??:4.3bsd:*:*)
+	echo hppa1.0-hp-bsd
+	exit ;;
+    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
+	echo hppa1.0-hp-mpeix
+	exit ;;
+    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
+	echo hppa1.1-hp-osf
+	exit ;;
+    hp8??:OSF1:*:*)
+	echo hppa1.0-hp-osf
+	exit ;;
+    i*86:OSF1:*:*)
+	if [ -x /usr/sbin/sysversion ] ; then
+	    echo ${UNAME_MACHINE}-unknown-osf1mk
+	else
+	    echo ${UNAME_MACHINE}-unknown-osf1
+	fi
+	exit ;;
+    parisc*:Lites*:*:*)
+	echo hppa1.1-hp-lites
+	exit ;;
+    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
+	echo c1-convex-bsd
+        exit ;;
+    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
+	if getsysinfo -f scalar_acc
+	then echo c32-convex-bsd
+	else echo c2-convex-bsd
+	fi
+        exit ;;
+    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
+	echo c34-convex-bsd
+        exit ;;
+    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
+	echo c38-convex-bsd
+        exit ;;
+    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
+	echo c4-convex-bsd
+        exit ;;
+    CRAY*Y-MP:*:*:*)
+	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*[A-Z]90:*:*:*)
+	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
+	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
+	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
+	      -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*TS:*:*:*)
+	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*T3E:*:*:*)
+	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*SV1:*:*:*)
+	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    *:UNICOS/mp:*:*)
+	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
+	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+        echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+        exit ;;
+    5000:UNIX_System_V:4.*:*)
+        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+        echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	exit ;;
+    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
+	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
+	exit ;;
+    sparc*:BSD/OS:*:*)
+	echo sparc-unknown-bsdi${UNAME_RELEASE}
+	exit ;;
+    *:BSD/OS:*:*)
+	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+	exit ;;
+    *:FreeBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	exit ;;
+    i*:CYGWIN*:*)
+	echo ${UNAME_MACHINE}-pc-cygwin
+	exit ;;
+    i*:MINGW*:*)
+	echo ${UNAME_MACHINE}-pc-mingw32
+	exit ;;
+    i*:windows32*:*)
+    	# uname -m includes "-pc" on this system.
+    	echo ${UNAME_MACHINE}-mingw32
+	exit ;;
+    i*:PW*:*)
+	echo ${UNAME_MACHINE}-pc-pw32
+	exit ;;
+    x86:Interix*:[34]*)
+	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
+	exit ;;
+    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+	echo i${UNAME_MACHINE}-pc-mks
+	exit ;;
+    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
+	# How do we know it's Interix rather than the generic POSIX subsystem?
+	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
+	# UNAME_MACHINE based on the output of uname instead of i386?
+	echo i586-pc-interix
+	exit ;;
+    i*:UWIN*:*)
+	echo ${UNAME_MACHINE}-pc-uwin
+	exit ;;
+    amd64:CYGWIN*:*:*)
+	echo x86_64-unknown-cygwin
+	exit ;;
+    p*:CYGWIN*:*)
+	echo powerpcle-unknown-cygwin
+	exit ;;
+    prep*:SunOS:5.*:*)
+	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    *:GNU:*:*)
+	# the GNU system
+	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+	exit ;;
+    *:GNU/*:*:*)
+	# other systems with GNU libc and userland
+	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+	exit ;;
+    i*86:Minix:*:*)
+	echo ${UNAME_MACHINE}-pc-minix
+	exit ;;
+    arm*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    cris:Linux:*:*)
+	echo cris-axis-linux-gnu
+	exit ;;
+    crisv32:Linux:*:*)
+	echo crisv32-axis-linux-gnu
+	exit ;;
+    frv:Linux:*:*)
+    	echo frv-unknown-linux-gnu
+	exit ;;
+    ia64:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    m32r*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    m68*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    mips:Linux:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#undef CPU
+	#undef mips
+	#undef mipsel
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	CPU=mipsel
+	#else
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+	CPU=mips
+	#else
+	CPU=
+	#endif
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
+	;;
+    mips64:Linux:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#undef CPU
+	#undef mips64
+	#undef mips64el
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	CPU=mips64el
+	#else
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+	CPU=mips64
+	#else
+	CPU=
+	#endif
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
+	;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-gnu
+	exit ;;
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-gnu
+	exit ;;
+    alpha:Linux:*:*)
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	  EV5)   UNAME_MACHINE=alphaev5 ;;
+	  EV56)  UNAME_MACHINE=alphaev56 ;;
+	  PCA56) UNAME_MACHINE=alphapca56 ;;
+	  PCA57) UNAME_MACHINE=alphapca56 ;;
+	  EV6)   UNAME_MACHINE=alphaev6 ;;
+	  EV67)  UNAME_MACHINE=alphaev67 ;;
+	  EV68*) UNAME_MACHINE=alphaev68 ;;
+        esac
+	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
+	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+	exit ;;
+    parisc:Linux:*:* | hppa:Linux:*:*)
+	# Look for CPU level
+	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
+	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
+	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
+	  *)    echo hppa-unknown-linux-gnu ;;
+	esac
+	exit ;;
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-gnu
+	exit ;;
+    s390:Linux:*:* | s390x:Linux:*:*)
+	echo ${UNAME_MACHINE}-ibm-linux
+	exit ;;
+    sh64*:Linux:*:*)
+    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    sh*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    sparc:Linux:*:* | sparc64:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    x86_64:Linux:*:*)
+	echo x86_64-unknown-linux-gnu
+	exit ;;
+    i*86:Linux:*:*)
+	# The BFD linker knows what the default object file format is, so
+	# first see if it will tell us. cd to the root directory to prevent
+	# problems with other programs or directories called `ld' in the path.
+	# Set LC_ALL=C to ensure ld outputs messages in English.
+	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
+			 | sed -ne '/supported targets:/!d
+				    s/[ 	][ 	]*/ /g
+				    s/.*supported targets: *//
+				    s/ .*//
+				    p'`
+        case "$ld_supported_targets" in
+	  elf32-i386)
+		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
+		;;
+	  a.out-i386-linux)
+		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
+		exit ;;
+	  coff-i386)
+		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
+		exit ;;
+	  "")
+		# Either a pre-BFD a.out linker (linux-gnuoldld) or
+		# one that does not give us useful --help.
+		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
+		exit ;;
+	esac
+	# Determine whether the default compiler is a.out or elf
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#include <features.h>
+	#ifdef __ELF__
+	# ifdef __GLIBC__
+	#  if __GLIBC__ >= 2
+	LIBC=gnu
+	#  else
+	LIBC=gnulibc1
+	#  endif
+	# else
+	LIBC=gnulibc1
+	# endif
+	#else
+	#ifdef __INTEL_COMPILER
+	LIBC=gnu
+	#else
+	LIBC=gnuaout
+	#endif
+	#endif
+	#ifdef __dietlibc__
+	LIBC=dietlibc
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+	test x"${LIBC}" != x && {
+		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+		exit
+	}
+	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
+	;;
+    i*86:DYNIX/ptx:4*:*)
+	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+	# earlier versions are messed up and put the nodename in both
+	# sysname and nodename.
+	echo i386-sequent-sysv4
+	exit ;;
+    i*86:UNIX_SV:4.2MP:2.*)
+        # Unixware is an offshoot of SVR4, but it has its own version
+        # number series starting with 2...
+        # I am not positive that other SVR4 systems won't match this,
+	# I just have to hope.  -- rms.
+        # Use sysv4.2uw... so that sysv4* matches it.
+	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
+	exit ;;
+    i*86:OS/2:*:*)
+	# If we were able to find `uname', then EMX Unix compatibility
+	# is probably installed.
+	echo ${UNAME_MACHINE}-pc-os2-emx
+	exit ;;
+    i*86:XTS-300:*:STOP)
+	echo ${UNAME_MACHINE}-unknown-stop
+	exit ;;
+    i*86:atheos:*:*)
+	echo ${UNAME_MACHINE}-unknown-atheos
+	exit ;;
+    i*86:syllable:*:*)
+	echo ${UNAME_MACHINE}-pc-syllable
+	exit ;;
+    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
+	echo i386-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    i*86:*DOS:*:*)
+	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+	exit ;;
+    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
+	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
+	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
+		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
+	else
+		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
+	fi
+	exit ;;
+    i*86:*:5:[678]*)
+    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+	case `/bin/uname -X | grep "^Machine"` in
+	    *486*)	     UNAME_MACHINE=i486 ;;
+	    *Pentium)	     UNAME_MACHINE=i586 ;;
+	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
+	esac
+	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+	exit ;;
+    i*86:*:3.2:*)
+	if test -f /usr/options/cb.name; then
+		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
+		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
+	elif /bin/uname -X 2>/dev/null >/dev/null ; then
+		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
+		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
+		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
+			&& UNAME_MACHINE=i586
+		(/bin/uname -X|grep '^Machine.*Pent *II' >/dev/null) \
+			&& UNAME_MACHINE=i686
+		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
+			&& UNAME_MACHINE=i686
+		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
+	else
+		echo ${UNAME_MACHINE}-pc-sysv32
+	fi
+	exit ;;
+    pc:*:*:*)
+	# Left here for compatibility:
+        # uname -m prints for DJGPP always 'pc', but it prints nothing about
+        # the processor, so we play safe by assuming i386.
+	echo i386-pc-msdosdjgpp
+        exit ;;
+    Intel:Mach:3*:*)
+	echo i386-pc-mach3
+	exit ;;
+    paragon:*:*:*)
+	echo i860-intel-osf1
+	exit ;;
+    i860:*:4.*:*) # i860-SVR4
+	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
+	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
+	else # Add other i860-SVR4 vendors below as they are discovered.
+	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
+	fi
+	exit ;;
+    mini*:CTIX:SYS*5:*)
+	# "miniframe"
+	echo m68010-convergent-sysv
+	exit ;;
+    mc68k:UNIX:SYSTEM5:3.51m)
+	echo m68k-convergent-sysv
+	exit ;;
+    M680?0:D-NIX:5.3:*)
+	echo m68k-diab-dnix
+	exit ;;
+    M68*:*:R3V[5678]*:*)
+	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
+	OS_REL=''
+	test -r /etc/.relid \
+	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
+	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
+        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+          && { echo i486-ncr-sysv4; exit; } ;;
+    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+	echo m68k-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    mc68030:UNIX_System_V:4.*:*)
+	echo m68k-atari-sysv4
+	exit ;;
+    TSUNAMI:LynxOS:2.*:*)
+	echo sparc-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    rs6000:LynxOS:2.*:*)
+	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    SM[BE]S:UNIX_SV:*:*)
+	echo mips-dde-sysv${UNAME_RELEASE}
+	exit ;;
+    RM*:ReliantUNIX-*:*:*)
+	echo mips-sni-sysv4
+	exit ;;
+    RM*:SINIX-*:*:*)
+	echo mips-sni-sysv4
+	exit ;;
+    *:SINIX-*:*:*)
+	if uname -p 2>/dev/null >/dev/null ; then
+		UNAME_MACHINE=`(uname -p) 2>/dev/null`
+		echo ${UNAME_MACHINE}-sni-sysv4
+	else
+		echo ns32k-sni-sysv
+	fi
+	exit ;;
+    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+                      # says <Richard.M.Bartel@ccMail.Census.GOV>
+        echo i586-unisys-sysv4
+        exit ;;
+    *:UNIX_System_V:4*:FTX*)
+	# From Gerald Hewes <hewes@openmarket.com>.
+	# How about differentiating between stratus architectures? -djm
+	echo hppa1.1-stratus-sysv4
+	exit ;;
+    *:*:*:FTX*)
+	# From seanf@swdc.stratus.com.
+	echo i860-stratus-sysv4
+	exit ;;
+    i*86:VOS:*:*)
+	# From Paul.Green@stratus.com.
+	echo ${UNAME_MACHINE}-stratus-vos
+	exit ;;
+    *:VOS:*:*)
+	# From Paul.Green@stratus.com.
+	echo hppa1.1-stratus-vos
+	exit ;;
+    mc68*:A/UX:*:*)
+	echo m68k-apple-aux${UNAME_RELEASE}
+	exit ;;
+    news*:NEWS-OS:6*:*)
+	echo mips-sony-newsos6
+	exit ;;
+    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
+	if [ -d /usr/nec ]; then
+	        echo mips-nec-sysv${UNAME_RELEASE}
+	else
+	        echo mips-unknown-sysv${UNAME_RELEASE}
+	fi
+        exit ;;
+    BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
+	echo powerpc-be-beos
+	exit ;;
+    BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
+	echo powerpc-apple-beos
+	exit ;;
+    BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+	echo i586-pc-beos
+	exit ;;
+    SX-4:SUPER-UX:*:*)
+	echo sx4-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-5:SUPER-UX:*:*)
+	echo sx5-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-6:SUPER-UX:*:*)
+	echo sx6-nec-superux${UNAME_RELEASE}
+	exit ;;
+    Power*:Rhapsody:*:*)
+	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+	exit ;;
+    *:Rhapsody:*:*)
+	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
+	exit ;;
+    *:Darwin:*:*)
+	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+	case $UNAME_PROCESSOR in
+	    *86) UNAME_PROCESSOR=i686 ;;
+	    unknown) UNAME_PROCESSOR=powerpc ;;
+	esac
+	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+	exit ;;
+    *:procnto*:*:* | *:QNX:[0123456789]*:*)
+	UNAME_PROCESSOR=`uname -p`
+	if test "$UNAME_PROCESSOR" = "x86"; then
+		UNAME_PROCESSOR=i386
+		UNAME_MACHINE=pc
+	fi
+	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
+	exit ;;
+    *:QNX:*:4*)
+	echo i386-pc-qnx
+	exit ;;
+    NSE-?:NONSTOP_KERNEL:*:*)
+	echo nse-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    NSR-?:NONSTOP_KERNEL:*:*)
+	echo nsr-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    *:NonStop-UX:*:*)
+	echo mips-compaq-nonstopux
+	exit ;;
+    BS2000:POSIX*:*:*)
+	echo bs2000-siemens-sysv
+	exit ;;
+    DS/*:UNIX_System_V:*:*)
+	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
+	exit ;;
+    *:Plan9:*:*)
+	# "uname -m" is not consistent, so use $cputype instead. 386
+	# is converted to i386 for consistency with other x86
+	# operating systems.
+	if test "$cputype" = "386"; then
+	    UNAME_MACHINE=i386
+	else
+	    UNAME_MACHINE="$cputype"
+	fi
+	echo ${UNAME_MACHINE}-unknown-plan9
+	exit ;;
+    *:TOPS-10:*:*)
+	echo pdp10-unknown-tops10
+	exit ;;
+    *:TENEX:*:*)
+	echo pdp10-unknown-tenex
+	exit ;;
+    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
+	echo pdp10-dec-tops20
+	exit ;;
+    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
+	echo pdp10-xkl-tops20
+	exit ;;
+    *:TOPS-20:*:*)
+	echo pdp10-unknown-tops20
+	exit ;;
+    *:ITS:*:*)
+	echo pdp10-unknown-its
+	exit ;;
+    SEI:*:*:SEIUX)
+        echo mips-sei-seiux${UNAME_RELEASE}
+	exit ;;
+    *:DragonFly:*:*)
+	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	exit ;;
+    *:*VMS:*:*)
+    	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+	case "${UNAME_MACHINE}" in
+	    A*) echo alpha-dec-vms ; exit ;;
+	    I*) echo ia64-dec-vms ; exit ;;
+	    V*) echo vax-dec-vms ; exit ;;
+	esac ;;
+    *:XENIX:*:SysV)
+	echo i386-pc-xenix
+	exit ;;
+    i*86:skyos:*:*)
+	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+	exit ;;
+esac
+
+#echo '(No uname command or uname output not recognized.)' 1>&2
+#echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
+
+eval $set_cc_for_build
+cat >$dummy.c <<EOF
+#ifdef _SEQUENT_
+# include <sys/types.h>
+# include <sys/utsname.h>
+#endif
+main ()
+{
+#if defined (sony)
+#if defined (MIPSEB)
+  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
+     I don't know....  */
+  printf ("mips-sony-bsd\n"); exit (0);
+#else
+#include <sys/param.h>
+  printf ("m68k-sony-newsos%s\n",
+#ifdef NEWSOS4
+          "4"
+#else
+	  ""
+#endif
+         ); exit (0);
+#endif
+#endif
+
+#if defined (__arm) && defined (__acorn) && defined (__unix)
+  printf ("arm-acorn-riscix\n"); exit (0);
+#endif
+
+#if defined (hp300) && !defined (hpux)
+  printf ("m68k-hp-bsd\n"); exit (0);
+#endif
+
+#if defined (NeXT)
+#if !defined (__ARCHITECTURE__)
+#define __ARCHITECTURE__ "m68k"
+#endif
+  int version;
+  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+  if (version < 4)
+    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
+  else
+    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
+  exit (0);
+#endif
+
+#if defined (MULTIMAX) || defined (n16)
+#if defined (UMAXV)
+  printf ("ns32k-encore-sysv\n"); exit (0);
+#else
+#if defined (CMU)
+  printf ("ns32k-encore-mach\n"); exit (0);
+#else
+  printf ("ns32k-encore-bsd\n"); exit (0);
+#endif
+#endif
+#endif
+
+#if defined (__386BSD__)
+  printf ("i386-pc-bsd\n"); exit (0);
+#endif
+
+#if defined (sequent)
+#if defined (i386)
+  printf ("i386-sequent-dynix\n"); exit (0);
+#endif
+#if defined (ns32000)
+  printf ("ns32k-sequent-dynix\n"); exit (0);
+#endif
+#endif
+
+#if defined (_SEQUENT_)
+    struct utsname un;
+
+    uname(&un);
+
+    if (strncmp(un.version, "V2", 2) == 0) {
+	printf ("i386-sequent-ptx2\n"); exit (0);
+    }
+    if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+	printf ("i386-sequent-ptx1\n"); exit (0);
+    }
+    printf ("i386-sequent-ptx\n"); exit (0);
+
+#endif
+
+#if defined (vax)
+# if !defined (ultrix)
+#  include <sys/param.h>
+#  if defined (BSD)
+#   if BSD == 43
+      printf ("vax-dec-bsd4.3\n"); exit (0);
+#   else
+#    if BSD == 199006
+      printf ("vax-dec-bsd4.3reno\n"); exit (0);
+#    else
+      printf ("vax-dec-bsd\n"); exit (0);
+#    endif
+#   endif
+#  else
+    printf ("vax-dec-bsd\n"); exit (0);
+#  endif
+# else
+    printf ("vax-dec-ultrix\n"); exit (0);
+# endif
+#endif
+
+#if defined (alliant) && defined (i860)
+  printf ("i860-alliant-bsd\n"); exit (0);
+#endif
+
+  exit (1);
+}
+EOF
+
+$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
+	{ echo "$SYSTEM_NAME"; exit; }
+
+# Apollos put the system type in the environment.
+
+test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
+
+# Convex versions that predate uname can use getsysinfo(1)
+
+if [ -x /usr/convex/getsysinfo ]
+then
+    case `getsysinfo -f cpu_type` in
+    c1*)
+	echo c1-convex-bsd
+	exit ;;
+    c2*)
+	if getsysinfo -f scalar_acc
+	then echo c32-convex-bsd
+	else echo c2-convex-bsd
+	fi
+	exit ;;
+    c34*)
+	echo c34-convex-bsd
+	exit ;;
+    c38*)
+	echo c38-convex-bsd
+	exit ;;
+    c4*)
+	echo c4-convex-bsd
+	exit ;;
+    esac
+fi
+
+cat >&2 <<EOF
+$0: unable to guess system type
+
+This script, last modified $timestamp, has failed to recognize
+the operating system you are using. It is advised that you
+download the most up to date version of the config scripts from
+
+  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess
+and
+  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub
+
+If the version you run ($0) is already up to date, please
+send the following data and any information you think might be
+pertinent to <config-patches@gnu.org> in order to provide the needed
+information to handle your system.
+
+config.guess timestamp = $timestamp
+
+uname -m = `(uname -m) 2>/dev/null || echo unknown`
+uname -r = `(uname -r) 2>/dev/null || echo unknown`
+uname -s = `(uname -s) 2>/dev/null || echo unknown`
+uname -v = `(uname -v) 2>/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
+/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
+
+hostinfo               = `(hostinfo) 2>/dev/null`
+/bin/universe          = `(/bin/universe) 2>/dev/null`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
+/bin/arch              = `(/bin/arch) 2>/dev/null`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
+
+UNAME_MACHINE = ${UNAME_MACHINE}
+UNAME_RELEASE = ${UNAME_RELEASE}
+UNAME_SYSTEM  = ${UNAME_SYSTEM}
+UNAME_VERSION = ${UNAME_VERSION}
+EOF
+
+exit 1
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: "timestamp='"
+# time-stamp-format: "%:y-%02m-%02d"
+# time-stamp-end: "'"
+# End:
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/config.sub nethack-autoconf/sys/autoconf/config.sub
--- nethack-3.4.3/sys/autoconf/config.sub	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/config.sub	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,1577 @@
+#! /bin/sh
+# Configuration validation subroutine script.
+#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+
+timestamp='2005-06-02'
+
+# This file is (in principle) common to ALL GNU software.
+# The presence of a machine in this file suggests that SOME GNU software
+# can handle that machine.  It does not imply ALL GNU software can.
+#
+# This file is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+
+# Please send patches to <config-patches@gnu.org>.  Submit a context
+# diff and a properly formatted ChangeLog entry.
+#
+# Configuration subroutine to validate and canonicalize a configuration type.
+# Supply the specified configuration type as an argument.
+# If it is invalid, we print an error message on stderr and exit with code 1.
+# Otherwise, we print the canonical config type on stdout and succeed.
+
+# This file is supposed to be the same for all GNU packages
+# and recognize all the CPU types, system types and aliases
+# that are meaningful with *any* GNU software.
+# Each package is responsible for reporting which valid configurations
+# it does not support.  The user should be able to distinguish
+# a failure to support a valid configuration from a meaningless
+# configuration.
+
+# The goal of this file is to map all the various variations of a given
+# machine specification into a single specification in the form:
+#	CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM
+# or in some cases, the newer four-part form:
+#	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
+# It is wrong to echo any other type of specification.
+
+me=`echo "$0" | sed -e 's,.*/,,'`
+
+usage="\
+Usage: $0 [OPTION] CPU-MFR-OPSYS
+       $0 [OPTION] ALIAS
+
+Canonicalize a configuration name.
+
+Operation modes:
+  -h, --help         print this help, then exit
+  -t, --time-stamp   print date of last modification, then exit
+  -v, --version      print version number, then exit
+
+Report bugs and patches to <config-patches@gnu.org>."
+
+version="\
+GNU config.sub ($timestamp)
+
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+Free Software Foundation, Inc.
+
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+
+help="
+Try \`$me --help' for more information."
+
+# Parse command line
+while test $# -gt 0 ; do
+  case $1 in
+    --time-stamp | --time* | -t )
+       echo "$timestamp" ; exit ;;
+    --version | -v )
+       echo "$version" ; exit ;;
+    --help | --h* | -h )
+       echo "$usage"; exit ;;
+    -- )     # Stop option processing
+       shift; break ;;
+    - )	# Use stdin as input.
+       break ;;
+    -* )
+       echo "$me: invalid option $1$help"
+       exit 1 ;;
+
+    *local*)
+       # First pass through any local machine types.
+       echo $1
+       exit ;;
+
+    * )
+       break ;;
+  esac
+done
+
+case $# in
+ 0) echo "$me: missing argument$help" >&2
+    exit 1;;
+ 1) ;;
+ *) echo "$me: too many arguments$help" >&2
+    exit 1;;
+esac
+
+# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
+# Here we must recognize all the valid KERNEL-OS combinations.
+maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
+case $maybe_os in
+  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
+  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+    os=-$maybe_os
+    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
+    ;;
+  *)
+    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
+    if [ $basic_machine != $1 ]
+    then os=`echo $1 | sed 's/.*-/-/'`
+    else os=; fi
+    ;;
+esac
+
+### Let's recognize common machines as not being operating systems so
+### that things like config.sub decstation-3100 work.  We also
+### recognize some manufacturers as not being operating systems, so we
+### can provide default operating systems below.
+case $os in
+	-sun*os*)
+		# Prevent following clause from handling this invalid input.
+		;;
+	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
+	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
+	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
+	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
+	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
+	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
+	-apple | -axis | -knuth | -cray)
+		os=
+		basic_machine=$1
+		;;
+	-sim | -cisco | -oki | -wec | -winbond)
+		os=
+		basic_machine=$1
+		;;
+	-scout)
+		;;
+	-wrs)
+		os=-vxworks
+		basic_machine=$1
+		;;
+	-chorusos*)
+		os=-chorusos
+		basic_machine=$1
+		;;
+ 	-chorusrdb)
+ 		os=-chorusrdb
+		basic_machine=$1
+ 		;;
+	-hiux*)
+		os=-hiuxwe2
+		;;
+	-sco5)
+		os=-sco3.2v5
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco4)
+		os=-sco3.2v4
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco3.2.[4-9]*)
+		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco3.2v[4-9]*)
+		# Don't forget version if it is 3.2v4 or newer.
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco*)
+		os=-sco3.2v2
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-udk*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-isc)
+		os=-isc2.2
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-clix*)
+		basic_machine=clipper-intergraph
+		;;
+	-isc*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-lynx*)
+		os=-lynxos
+		;;
+	-ptx*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
+		;;
+	-windowsnt*)
+		os=`echo $os | sed -e 's/windowsnt/winnt/'`
+		;;
+	-psos*)
+		os=-psos
+		;;
+	-mint | -mint[0-9]*)
+		basic_machine=m68k-atari
+		os=-mint
+		;;
+esac
+
+# Decode aliases for certain CPU-COMPANY combinations.
+case $basic_machine in
+	# Recognize the basic CPU types without company name.
+	# Some are omitted here because they have special meanings below.
+	1750a | 580 \
+	| a29k \
+	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
+	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+	| am33_2.0 \
+	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+	| bfin \
+	| c4x | clipper \
+	| d10v | d30v | dlx | dsp16xx \
+	| fr30 | frv \
+	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+	| i370 | i860 | i960 | ia64 \
+	| ip2k | iq2000 \
+	| m32r | m32rle | m68000 | m68k | m88k | maxq | mcore \
+	| mips | mipsbe | mipseb | mipsel | mipsle \
+	| mips16 \
+	| mips64 | mips64el \
+	| mips64vr | mips64vrel \
+	| mips64orion | mips64orionel \
+	| mips64vr4100 | mips64vr4100el \
+	| mips64vr4300 | mips64vr4300el \
+	| mips64vr5000 | mips64vr5000el \
+	| mipsisa32 | mipsisa32el \
+	| mipsisa32r2 | mipsisa32r2el \
+	| mipsisa64 | mipsisa64el \
+	| mipsisa64r2 | mipsisa64r2el \
+	| mipsisa64sb1 | mipsisa64sb1el \
+	| mipsisa64sr71k | mipsisa64sr71kel \
+	| mipstx39 | mipstx39el \
+	| mn10200 | mn10300 \
+	| ms1 \
+	| msp430 \
+	| ns16k | ns32k \
+	| openrisc | or32 \
+	| pdp10 | pdp11 | pj | pjl \
+	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+	| pyramid \
+	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| sh64 | sh64le \
+	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
+	| sparcv8 | sparcv9 | sparcv9b \
+	| strongarm \
+	| tahoe | thumb | tic4x | tic80 | tron \
+	| v850 | v850e \
+	| we32k \
+	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
+	| z8k)
+		basic_machine=$basic_machine-unknown
+		;;
+	m32c)
+		basic_machine=$basic_machine-unknown
+		;;
+	m6811 | m68hc11 | m6812 | m68hc12)
+		# Motorola 68HC11/12.
+		basic_machine=$basic_machine-unknown
+		os=-none
+		;;
+	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
+		;;
+
+	# We use `pc' rather than `unknown'
+	# because (1) that's what they normally are, and
+	# (2) the word "unknown" tends to confuse beginning users.
+	i*86 | x86_64)
+	  basic_machine=$basic_machine-pc
+	  ;;
+	# Object if more than one company name word.
+	*-*-*)
+		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
+		exit 1
+		;;
+	# Recognize the basic CPU types with company name.
+	580-* \
+	| a29k-* \
+	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
+	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
+	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
+	| avr-* \
+	| bfin-* | bs2000-* \
+	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+	| clipper-* | craynv-* | cydra-* \
+	| d10v-* | d30v-* | dlx-* \
+	| elxsi-* \
+	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+	| h8300-* | h8500-* \
+	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+	| i*86-* | i860-* | i960-* | ia64-* \
+	| ip2k-* | iq2000-* \
+	| m32r-* | m32rle-* \
+	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* \
+	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+	| mips16-* \
+	| mips64-* | mips64el-* \
+	| mips64vr-* | mips64vrel-* \
+	| mips64orion-* | mips64orionel-* \
+	| mips64vr4100-* | mips64vr4100el-* \
+	| mips64vr4300-* | mips64vr4300el-* \
+	| mips64vr5000-* | mips64vr5000el-* \
+	| mipsisa32-* | mipsisa32el-* \
+	| mipsisa32r2-* | mipsisa32r2el-* \
+	| mipsisa64-* | mipsisa64el-* \
+	| mipsisa64r2-* | mipsisa64r2el-* \
+	| mipsisa64sb1-* | mipsisa64sb1el-* \
+	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+	| mipstx39-* | mipstx39el-* \
+	| mmix-* \
+	| ms1-* \
+	| msp430-* \
+	| none-* | np1-* | ns16k-* | ns32k-* \
+	| orion-* \
+	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
+	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+	| pyramid-* \
+	| romp-* | rs6000-* \
+	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
+	| sparclite-* \
+	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+	| tahoe-* | thumb-* \
+	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+	| tron-* \
+	| v850-* | v850e-* | vax-* \
+	| we32k-* \
+	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+	| xstormy16-* | xtensa-* \
+	| ymp-* \
+	| z8k-*)
+		;;
+	m32c-*)
+		;;
+	# Recognize the various machine names and aliases which stand
+	# for a CPU type and a company and sometimes even an OS.
+	386bsd)
+		basic_machine=i386-unknown
+		os=-bsd
+		;;
+	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
+		basic_machine=m68000-att
+		;;
+	3b*)
+		basic_machine=we32k-att
+		;;
+	a29khif)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+    	abacus)
+		basic_machine=abacus-unknown
+		;;
+	adobe68k)
+		basic_machine=m68010-adobe
+		os=-scout
+		;;
+	alliant | fx80)
+		basic_machine=fx80-alliant
+		;;
+	altos | altos3068)
+		basic_machine=m68k-altos
+		;;
+	am29k)
+		basic_machine=a29k-none
+		os=-bsd
+		;;
+	amd64)
+		basic_machine=x86_64-pc
+		;;
+	amd64-*)
+		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	amdahl)
+		basic_machine=580-amdahl
+		os=-sysv
+		;;
+	amiga | amiga-*)
+		basic_machine=m68k-unknown
+		;;
+	amigaos | amigados)
+		basic_machine=m68k-unknown
+		os=-amigaos
+		;;
+	amigaunix | amix)
+		basic_machine=m68k-unknown
+		os=-sysv4
+		;;
+	apollo68)
+		basic_machine=m68k-apollo
+		os=-sysv
+		;;
+	apollo68bsd)
+		basic_machine=m68k-apollo
+		os=-bsd
+		;;
+	aux)
+		basic_machine=m68k-apple
+		os=-aux
+		;;
+	balance)
+		basic_machine=ns32k-sequent
+		os=-dynix
+		;;
+	c90)
+		basic_machine=c90-cray
+		os=-unicos
+		;;
+	convex-c1)
+		basic_machine=c1-convex
+		os=-bsd
+		;;
+	convex-c2)
+		basic_machine=c2-convex
+		os=-bsd
+		;;
+	convex-c32)
+		basic_machine=c32-convex
+		os=-bsd
+		;;
+	convex-c34)
+		basic_machine=c34-convex
+		os=-bsd
+		;;
+	convex-c38)
+		basic_machine=c38-convex
+		os=-bsd
+		;;
+	cray | j90)
+		basic_machine=j90-cray
+		os=-unicos
+		;;
+	craynv)
+		basic_machine=craynv-cray
+		os=-unicosmp
+		;;
+	cr16c)
+		basic_machine=cr16c-unknown
+		os=-elf
+		;;
+	crds | unos)
+		basic_machine=m68k-crds
+		;;
+	crisv32 | crisv32-* | etraxfs*)
+		basic_machine=crisv32-axis
+		;;
+	cris | cris-* | etrax*)
+		basic_machine=cris-axis
+		;;
+	crx)
+		basic_machine=crx-unknown
+		os=-elf
+		;;
+	da30 | da30-*)
+		basic_machine=m68k-da30
+		;;
+	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
+		basic_machine=mips-dec
+		;;
+	decsystem10* | dec10*)
+		basic_machine=pdp10-dec
+		os=-tops10
+		;;
+	decsystem20* | dec20*)
+		basic_machine=pdp10-dec
+		os=-tops20
+		;;
+	delta | 3300 | motorola-3300 | motorola-delta \
+	      | 3300-motorola | delta-motorola)
+		basic_machine=m68k-motorola
+		;;
+	delta88)
+		basic_machine=m88k-motorola
+		os=-sysv3
+		;;
+	djgpp)
+		basic_machine=i586-pc
+		os=-msdosdjgpp
+		;;
+	dpx20 | dpx20-*)
+		basic_machine=rs6000-bull
+		os=-bosx
+		;;
+	dpx2* | dpx2*-bull)
+		basic_machine=m68k-bull
+		os=-sysv3
+		;;
+	ebmon29k)
+		basic_machine=a29k-amd
+		os=-ebmon
+		;;
+	elxsi)
+		basic_machine=elxsi-elxsi
+		os=-bsd
+		;;
+	encore | umax | mmax)
+		basic_machine=ns32k-encore
+		;;
+	es1800 | OSE68k | ose68k | ose | OSE)
+		basic_machine=m68k-ericsson
+		os=-ose
+		;;
+	fx2800)
+		basic_machine=i860-alliant
+		;;
+	genix)
+		basic_machine=ns32k-ns
+		;;
+	gmicro)
+		basic_machine=tron-gmicro
+		os=-sysv
+		;;
+	go32)
+		basic_machine=i386-pc
+		os=-go32
+		;;
+	h3050r* | hiux*)
+		basic_machine=hppa1.1-hitachi
+		os=-hiuxwe2
+		;;
+	h8300hms)
+		basic_machine=h8300-hitachi
+		os=-hms
+		;;
+	h8300xray)
+		basic_machine=h8300-hitachi
+		os=-xray
+		;;
+	h8500hms)
+		basic_machine=h8500-hitachi
+		os=-hms
+		;;
+	harris)
+		basic_machine=m88k-harris
+		os=-sysv3
+		;;
+	hp300-*)
+		basic_machine=m68k-hp
+		;;
+	hp300bsd)
+		basic_machine=m68k-hp
+		os=-bsd
+		;;
+	hp300hpux)
+		basic_machine=m68k-hp
+		os=-hpux
+		;;
+	hp3k9[0-9][0-9] | hp9[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hp9k2[0-9][0-9] | hp9k31[0-9])
+		basic_machine=m68000-hp
+		;;
+	hp9k3[2-9][0-9])
+		basic_machine=m68k-hp
+		;;
+	hp9k6[0-9][0-9] | hp6[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hp9k7[0-79][0-9] | hp7[0-79][0-9])
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k78[0-9] | hp78[0-9])
+		# FIXME: really hppa2.0-hp
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
+		# FIXME: really hppa2.0-hp
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[0-9][13679] | hp8[0-9][13679])
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[0-9][0-9] | hp8[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hppa-next)
+		os=-nextstep3
+		;;
+	hppaosf)
+		basic_machine=hppa1.1-hp
+		os=-osf
+		;;
+	hppro)
+		basic_machine=hppa1.1-hp
+		os=-proelf
+		;;
+	i370-ibm* | ibm*)
+		basic_machine=i370-ibm
+		;;
+# I'm not sure what "Sysv32" means.  Should this be sysv3.2?
+	i*86v32)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv32
+		;;
+	i*86v4*)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv4
+		;;
+	i*86v)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv
+		;;
+	i*86sol2)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-solaris2
+		;;
+	i386mach)
+		basic_machine=i386-mach
+		os=-mach
+		;;
+	i386-vsta | vsta)
+		basic_machine=i386-unknown
+		os=-vsta
+		;;
+	iris | iris4d)
+		basic_machine=mips-sgi
+		case $os in
+		    -irix*)
+			;;
+		    *)
+			os=-irix4
+			;;
+		esac
+		;;
+	isi68 | isi)
+		basic_machine=m68k-isi
+		os=-sysv
+		;;
+	m88k-omron*)
+		basic_machine=m88k-omron
+		;;
+	magnum | m3230)
+		basic_machine=mips-mips
+		os=-sysv
+		;;
+	merlin)
+		basic_machine=ns32k-utek
+		os=-sysv
+		;;
+	mingw32)
+		basic_machine=i386-pc
+		os=-mingw32
+		;;
+	miniframe)
+		basic_machine=m68000-convergent
+		;;
+	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
+		basic_machine=m68k-atari
+		os=-mint
+		;;
+	mips3*-*)
+		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
+		;;
+	mips3*)
+		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
+		;;
+	monitor)
+		basic_machine=m68k-rom68k
+		os=-coff
+		;;
+	morphos)
+		basic_machine=powerpc-unknown
+		os=-morphos
+		;;
+	msdos)
+		basic_machine=i386-pc
+		os=-msdos
+		;;
+	mvs)
+		basic_machine=i370-ibm
+		os=-mvs
+		;;
+	ncr3000)
+		basic_machine=i486-ncr
+		os=-sysv4
+		;;
+	netbsd386)
+		basic_machine=i386-unknown
+		os=-netbsd
+		;;
+	netwinder)
+		basic_machine=armv4l-rebel
+		os=-linux
+		;;
+	news | news700 | news800 | news900)
+		basic_machine=m68k-sony
+		os=-newsos
+		;;
+	news1000)
+		basic_machine=m68030-sony
+		os=-newsos
+		;;
+	news-3600 | risc-news)
+		basic_machine=mips-sony
+		os=-newsos
+		;;
+	necv70)
+		basic_machine=v70-nec
+		os=-sysv
+		;;
+	next | m*-next )
+		basic_machine=m68k-next
+		case $os in
+		    -nextstep* )
+			;;
+		    -ns2*)
+		      os=-nextstep2
+			;;
+		    *)
+		      os=-nextstep3
+			;;
+		esac
+		;;
+	nh3000)
+		basic_machine=m68k-harris
+		os=-cxux
+		;;
+	nh[45]000)
+		basic_machine=m88k-harris
+		os=-cxux
+		;;
+	nindy960)
+		basic_machine=i960-intel
+		os=-nindy
+		;;
+	mon960)
+		basic_machine=i960-intel
+		os=-mon960
+		;;
+	nonstopux)
+		basic_machine=mips-compaq
+		os=-nonstopux
+		;;
+	np1)
+		basic_machine=np1-gould
+		;;
+	nsr-tandem)
+		basic_machine=nsr-tandem
+		;;
+	op50n-* | op60c-*)
+		basic_machine=hppa1.1-oki
+		os=-proelf
+		;;
+	or32 | or32-*)
+		basic_machine=or32-unknown
+		os=-coff
+		;;
+	os400)
+		basic_machine=powerpc-ibm
+		os=-os400
+		;;
+	OSE68000 | ose68000)
+		basic_machine=m68000-ericsson
+		os=-ose
+		;;
+	os68k)
+		basic_machine=m68k-none
+		os=-os68k
+		;;
+	pa-hitachi)
+		basic_machine=hppa1.1-hitachi
+		os=-hiuxwe2
+		;;
+	paragon)
+		basic_machine=i860-intel
+		os=-osf
+		;;
+	pbd)
+		basic_machine=sparc-tti
+		;;
+	pbb)
+		basic_machine=m68k-tti
+		;;
+	pc532 | pc532-*)
+		basic_machine=ns32k-pc532
+		;;
+	pentium | p5 | k5 | k6 | nexgen | viac3)
+		basic_machine=i586-pc
+		;;
+	pentiumpro | p6 | 6x86 | athlon | athlon_*)
+		basic_machine=i686-pc
+		;;
+	pentiumii | pentium2 | pentiumiii | pentium3)
+		basic_machine=i686-pc
+		;;
+	pentium4)
+		basic_machine=i786-pc
+		;;
+	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentiumpro-* | p6-* | 6x86-* | athlon-*)
+		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentium4-*)
+		basic_machine=i786-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pn)
+		basic_machine=pn-gould
+		;;
+	power)	basic_machine=power-ibm
+		;;
+	ppc)	basic_machine=powerpc-unknown
+		;;
+	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppcle | powerpclittle | ppc-le | powerpc-little)
+		basic_machine=powerpcle-unknown
+		;;
+	ppcle-* | powerpclittle-*)
+		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppc64)	basic_machine=powerpc64-unknown
+		;;
+	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppc64le | powerpc64little | ppc64-le | powerpc64-little)
+		basic_machine=powerpc64le-unknown
+		;;
+	ppc64le-* | powerpc64little-*)
+		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ps2)
+		basic_machine=i386-ibm
+		;;
+	pw32)
+		basic_machine=i586-unknown
+		os=-pw32
+		;;
+	rom68k)
+		basic_machine=m68k-rom68k
+		os=-coff
+		;;
+	rm[46]00)
+		basic_machine=mips-siemens
+		;;
+	rtpc | rtpc-*)
+		basic_machine=romp-ibm
+		;;
+	s390 | s390-*)
+		basic_machine=s390-ibm
+		;;
+	s390x | s390x-*)
+		basic_machine=s390x-ibm
+		;;
+	sa29200)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+	sb1)
+		basic_machine=mipsisa64sb1-unknown
+		;;
+	sb1el)
+		basic_machine=mipsisa64sb1el-unknown
+		;;
+	sei)
+		basic_machine=mips-sei
+		os=-seiux
+		;;
+	sequent)
+		basic_machine=i386-sequent
+		;;
+	sh)
+		basic_machine=sh-hitachi
+		os=-hms
+		;;
+	sh64)
+		basic_machine=sh64-unknown
+		;;
+	sparclite-wrs | simso-wrs)
+		basic_machine=sparclite-wrs
+		os=-vxworks
+		;;
+	sps7)
+		basic_machine=m68k-bull
+		os=-sysv2
+		;;
+	spur)
+		basic_machine=spur-unknown
+		;;
+	st2000)
+		basic_machine=m68k-tandem
+		;;
+	stratus)
+		basic_machine=i860-stratus
+		os=-sysv4
+		;;
+	sun2)
+		basic_machine=m68000-sun
+		;;
+	sun2os3)
+		basic_machine=m68000-sun
+		os=-sunos3
+		;;
+	sun2os4)
+		basic_machine=m68000-sun
+		os=-sunos4
+		;;
+	sun3os3)
+		basic_machine=m68k-sun
+		os=-sunos3
+		;;
+	sun3os4)
+		basic_machine=m68k-sun
+		os=-sunos4
+		;;
+	sun4os3)
+		basic_machine=sparc-sun
+		os=-sunos3
+		;;
+	sun4os4)
+		basic_machine=sparc-sun
+		os=-sunos4
+		;;
+	sun4sol2)
+		basic_machine=sparc-sun
+		os=-solaris2
+		;;
+	sun3 | sun3-*)
+		basic_machine=m68k-sun
+		;;
+	sun4)
+		basic_machine=sparc-sun
+		;;
+	sun386 | sun386i | roadrunner)
+		basic_machine=i386-sun
+		;;
+	sv1)
+		basic_machine=sv1-cray
+		os=-unicos
+		;;
+	symmetry)
+		basic_machine=i386-sequent
+		os=-dynix
+		;;
+	t3e)
+		basic_machine=alphaev5-cray
+		os=-unicos
+		;;
+	t90)
+		basic_machine=t90-cray
+		os=-unicos
+		;;
+	tic54x | c54x*)
+		basic_machine=tic54x-unknown
+		os=-coff
+		;;
+	tic55x | c55x*)
+		basic_machine=tic55x-unknown
+		os=-coff
+		;;
+	tic6x | c6x*)
+		basic_machine=tic6x-unknown
+		os=-coff
+		;;
+	tx39)
+		basic_machine=mipstx39-unknown
+		;;
+	tx39el)
+		basic_machine=mipstx39el-unknown
+		;;
+	toad1)
+		basic_machine=pdp10-xkl
+		os=-tops20
+		;;
+	tower | tower-32)
+		basic_machine=m68k-ncr
+		;;
+	tpf)
+		basic_machine=s390x-ibm
+		os=-tpf
+		;;
+	udi29k)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+	ultra3)
+		basic_machine=a29k-nyu
+		os=-sym1
+		;;
+	v810 | necv810)
+		basic_machine=v810-nec
+		os=-none
+		;;
+	vaxv)
+		basic_machine=vax-dec
+		os=-sysv
+		;;
+	vms)
+		basic_machine=vax-dec
+		os=-vms
+		;;
+	vpp*|vx|vx-*)
+		basic_machine=f301-fujitsu
+		;;
+	vxworks960)
+		basic_machine=i960-wrs
+		os=-vxworks
+		;;
+	vxworks68)
+		basic_machine=m68k-wrs
+		os=-vxworks
+		;;
+	vxworks29k)
+		basic_machine=a29k-wrs
+		os=-vxworks
+		;;
+	w65*)
+		basic_machine=w65-wdc
+		os=-none
+		;;
+	w89k-*)
+		basic_machine=hppa1.1-winbond
+		os=-proelf
+		;;
+	xbox)
+		basic_machine=i686-pc
+		os=-mingw32
+		;;
+	xps | xps100)
+		basic_machine=xps100-honeywell
+		;;
+	ymp)
+		basic_machine=ymp-cray
+		os=-unicos
+		;;
+	z8k-*-coff)
+		basic_machine=z8k-unknown
+		os=-sim
+		;;
+	none)
+		basic_machine=none-none
+		os=-none
+		;;
+
+# Here we handle the default manufacturer of certain CPU types.  It is in
+# some cases the only manufacturer, in others, it is the most popular.
+	w89k)
+		basic_machine=hppa1.1-winbond
+		;;
+	op50n)
+		basic_machine=hppa1.1-oki
+		;;
+	op60c)
+		basic_machine=hppa1.1-oki
+		;;
+	romp)
+		basic_machine=romp-ibm
+		;;
+	mmix)
+		basic_machine=mmix-knuth
+		;;
+	rs6000)
+		basic_machine=rs6000-ibm
+		;;
+	vax)
+		basic_machine=vax-dec
+		;;
+	pdp10)
+		# there are many clones, so DEC is not a safe bet
+		basic_machine=pdp10-unknown
+		;;
+	pdp11)
+		basic_machine=pdp11-dec
+		;;
+	we32k)
+		basic_machine=we32k-att
+		;;
+	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+		basic_machine=sh-unknown
+		;;
+	sh64)
+		basic_machine=sh64-unknown
+		;;
+	sparc | sparcv8 | sparcv9 | sparcv9b)
+		basic_machine=sparc-sun
+		;;
+	cydra)
+		basic_machine=cydra-cydrome
+		;;
+	orion)
+		basic_machine=orion-highlevel
+		;;
+	orion105)
+		basic_machine=clipper-highlevel
+		;;
+	mac | mpw | mac-mpw)
+		basic_machine=m68k-apple
+		;;
+	pmac | pmac-mpw)
+		basic_machine=powerpc-apple
+		;;
+	*-unknown)
+		# Make sure to match an already-canonicalized machine name.
+		;;
+	*)
+		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
+		exit 1
+		;;
+esac
+
+# Here we canonicalize certain aliases for manufacturers.
+case $basic_machine in
+	*-digital*)
+		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
+		;;
+	*-commodore*)
+		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
+		;;
+	*)
+		;;
+esac
+
+# Decode manufacturer-specific aliases for certain operating systems.
+
+if [ x"$os" != x"" ]
+then
+case $os in
+        # First match some system type aliases
+        # that might get confused with valid system types.
+	# -solaris* is a basic system type, with this one exception.
+	-solaris1 | -solaris1.*)
+		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+		;;
+	-solaris)
+		os=-solaris2
+		;;
+	-svr4*)
+		os=-sysv4
+		;;
+	-unixware*)
+		os=-sysv4.2uw
+		;;
+	-gnu/linux*)
+		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
+		;;
+	# First accept the basic system types.
+	# The portable systems comes first.
+	# Each alternative MUST END IN A *, to match a version number.
+	# -sysv* is not here because it comes later, after sysvr4.
+	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
+	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
+	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
+	      | -aos* \
+	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
+	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
+	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* | -openbsd* \
+	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
+	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
+	      | -chorusos* | -chorusrdb* \
+	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
+	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
+	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
+	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
+	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* | -skyos*)
+	# Remember, each alternative MUST END IN *, to match a version number.
+		;;
+	-qnx*)
+		case $basic_machine in
+		    x86-* | i*86-*)
+			;;
+		    *)
+			os=-nto$os
+			;;
+		esac
+		;;
+	-nto-qnx*)
+		;;
+	-nto*)
+		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+		;;
+	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
+	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
+		;;
+	-mac*)
+		os=`echo $os | sed -e 's|mac|macos|'`
+		;;
+	-linux-dietlibc)
+		os=-linux-dietlibc
+		;;
+	-linux*)
+		os=`echo $os | sed -e 's|linux|linux-gnu|'`
+		;;
+	-sunos5*)
+		os=`echo $os | sed -e 's|sunos5|solaris2|'`
+		;;
+	-sunos6*)
+		os=`echo $os | sed -e 's|sunos6|solaris3|'`
+		;;
+	-opened*)
+		os=-openedition
+		;;
+        -os400*)
+		os=-os400
+		;;
+	-wince*)
+		os=-wince
+		;;
+	-osfrose*)
+		os=-osfrose
+		;;
+	-osf*)
+		os=-osf
+		;;
+	-utek*)
+		os=-bsd
+		;;
+	-dynix*)
+		os=-bsd
+		;;
+	-acis*)
+		os=-aos
+		;;
+	-atheos*)
+		os=-atheos
+		;;
+	-syllable*)
+		os=-syllable
+		;;
+	-386bsd)
+		os=-bsd
+		;;
+	-ctix* | -uts*)
+		os=-sysv
+		;;
+	-nova*)
+		os=-rtmk-nova
+		;;
+	-ns2 )
+		os=-nextstep2
+		;;
+	-nsk*)
+		os=-nsk
+		;;
+	# Preserve the version number of sinix5.
+	-sinix5.*)
+		os=`echo $os | sed -e 's|sinix|sysv|'`
+		;;
+	-sinix*)
+		os=-sysv4
+		;;
+        -tpf*)
+		os=-tpf
+		;;
+	-triton*)
+		os=-sysv3
+		;;
+	-oss*)
+		os=-sysv3
+		;;
+	-svr4)
+		os=-sysv4
+		;;
+	-svr3)
+		os=-sysv3
+		;;
+	-sysvr4)
+		os=-sysv4
+		;;
+	# This must come after -sysvr4.
+	-sysv*)
+		;;
+	-ose*)
+		os=-ose
+		;;
+	-es1800*)
+		os=-ose
+		;;
+	-xenix)
+		os=-xenix
+		;;
+	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+		os=-mint
+		;;
+	-aros*)
+		os=-aros
+		;;
+	-kaos*)
+		os=-kaos
+		;;
+	-zvmoe)
+		os=-zvmoe
+		;;
+	-none)
+		;;
+	*)
+		# Get rid of the `-' at the beginning of $os.
+		os=`echo $os | sed 's/[^-]*-//'`
+		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
+		exit 1
+		;;
+esac
+else
+
+# Here we handle the default operating systems that come with various machines.
+# The value should be what the vendor currently ships out the door with their
+# machine or put another way, the most popular os provided with the machine.
+
+# Note that if you're going to try to match "-MANUFACTURER" here (say,
+# "-sun"), then you have to tell the case statement up towards the top
+# that MANUFACTURER isn't an operating system.  Otherwise, code above
+# will signal an error saying that MANUFACTURER isn't an operating
+# system, and we'll never get to this point.
+
+case $basic_machine in
+	*-acorn)
+		os=-riscix1.2
+		;;
+	arm*-rebel)
+		os=-linux
+		;;
+	arm*-semi)
+		os=-aout
+		;;
+    c4x-* | tic4x-*)
+        os=-coff
+        ;;
+	# This must come before the *-dec entry.
+	pdp10-*)
+		os=-tops20
+		;;
+	pdp11-*)
+		os=-none
+		;;
+	*-dec | vax-*)
+		os=-ultrix4.2
+		;;
+	m68*-apollo)
+		os=-domain
+		;;
+	i386-sun)
+		os=-sunos4.0.2
+		;;
+	m68000-sun)
+		os=-sunos3
+		# This also exists in the configure program, but was not the
+		# default.
+		# os=-sunos4
+		;;
+	m68*-cisco)
+		os=-aout
+		;;
+	mips*-cisco)
+		os=-elf
+		;;
+	mips*-*)
+		os=-elf
+		;;
+	or32-*)
+		os=-coff
+		;;
+	*-tti)	# must be before sparc entry or we get the wrong os.
+		os=-sysv3
+		;;
+	sparc-* | *-sun)
+		os=-sunos4.1.1
+		;;
+	*-be)
+		os=-beos
+		;;
+	*-ibm)
+		os=-aix
+		;;
+    	*-knuth)
+		os=-mmixware
+		;;
+	*-wec)
+		os=-proelf
+		;;
+	*-winbond)
+		os=-proelf
+		;;
+	*-oki)
+		os=-proelf
+		;;
+	*-hp)
+		os=-hpux
+		;;
+	*-hitachi)
+		os=-hiux
+		;;
+	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
+		os=-sysv
+		;;
+	*-cbm)
+		os=-amigaos
+		;;
+	*-dg)
+		os=-dgux
+		;;
+	*-dolphin)
+		os=-sysv3
+		;;
+	m68k-ccur)
+		os=-rtu
+		;;
+	m88k-omron*)
+		os=-luna
+		;;
+	*-next )
+		os=-nextstep
+		;;
+	*-sequent)
+		os=-ptx
+		;;
+	*-crds)
+		os=-unos
+		;;
+	*-ns)
+		os=-genix
+		;;
+	i370-*)
+		os=-mvs
+		;;
+	*-next)
+		os=-nextstep3
+		;;
+	*-gould)
+		os=-sysv
+		;;
+	*-highlevel)
+		os=-bsd
+		;;
+	*-encore)
+		os=-bsd
+		;;
+	*-sgi)
+		os=-irix
+		;;
+	*-siemens)
+		os=-sysv4
+		;;
+	*-masscomp)
+		os=-rtu
+		;;
+	f30[01]-fujitsu | f700-fujitsu)
+		os=-uxpv
+		;;
+	*-rom68k)
+		os=-coff
+		;;
+	*-*bug)
+		os=-coff
+		;;
+	*-apple)
+		os=-macos
+		;;
+	*-atari*)
+		os=-mint
+		;;
+	*)
+		os=-none
+		;;
+esac
+fi
+
+# Here we handle the case where we know the os, and the CPU type, but not the
+# manufacturer.  We pick the logical manufacturer.
+vendor=unknown
+case $basic_machine in
+	*-unknown)
+		case $os in
+			-riscix*)
+				vendor=acorn
+				;;
+			-sunos*)
+				vendor=sun
+				;;
+			-aix*)
+				vendor=ibm
+				;;
+			-beos*)
+				vendor=be
+				;;
+			-hpux*)
+				vendor=hp
+				;;
+			-mpeix*)
+				vendor=hp
+				;;
+			-hiux*)
+				vendor=hitachi
+				;;
+			-unos*)
+				vendor=crds
+				;;
+			-dgux*)
+				vendor=dg
+				;;
+			-luna*)
+				vendor=omron
+				;;
+			-genix*)
+				vendor=ns
+				;;
+			-mvs* | -opened*)
+				vendor=ibm
+				;;
+			-os400*)
+				vendor=ibm
+				;;
+			-ptx*)
+				vendor=sequent
+				;;
+			-tpf*)
+				vendor=ibm
+				;;
+			-vxsim* | -vxworks* | -windiss*)
+				vendor=wrs
+				;;
+			-aux*)
+				vendor=apple
+				;;
+			-hms*)
+				vendor=hitachi
+				;;
+			-mpw* | -macos*)
+				vendor=apple
+				;;
+			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+				vendor=atari
+				;;
+			-vos*)
+				vendor=stratus
+				;;
+		esac
+		basic_machine=`echo $basic_machine | sed "s/unknown/$vendor/"`
+		;;
+esac
+
+echo $basic_machine$os
+exit
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: "timestamp='"
+# time-stamp-format: "%:y-%02m-%02d"
+# time-stamp-end: "'"
+# End:
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/configure.ac nethack-autoconf/sys/autoconf/configure.ac
--- nethack-3.4.3/sys/autoconf/configure.ac	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/configure.ac	2009-02-17 12:23:08.000000000 +0100
@@ -0,0 +1,475 @@
+dnl	NETHACK autoconf template
+AC_INIT(NETHACK, 3.4.3, bhaak@gmx.net)
+dnl Avoid AC_REVISION() because we check configure into CVS
+dnl and it will cause confusing revision numbers to be included
+dnl in configure if developers forget to check in configure.ac
+dnl before running bootstrap.sh and checking in configure.
+# $Revision: 1.10 $
+AC_CONFIG_SRCDIR(Files)
+AC_SUBST(SRCDIR,[../$srcdir/src])
+AC_CONFIG_AUX_DIR(sys/autoconf)
+
+dnl  ----- Precious variables
+AC_ARG_VAR(CC, [C compiler])
+AC_ARG_VAR(CHGRP, [sets GAMEUID (set this to true as a no op)])
+AC_ARG_VAR(CHOWN, [sets GAMEGRP (set this to true as a no op)])
+AC_ARG_VAR(CHMOD, [sets file modes (set this to true as a no op)])
+AC_ARG_VAR(ZLIB_CFLAGS, [Compiler flags to find zlib header files])
+AC_ARG_VAR(ZLIB_LIBS, [Linker flags to find zlib library files])
+
+AC_PROG_LN_S
+AC_PROG_AWK
+
+dnl  ----- Check options
+dnl  ----- Window systems
+
+# NETHACK_WIN_ENABLE(proxy, auto)
+nethack_default_win=""
+# Note: Order is important: The last listed enabled port will be the default.
+NETHACK_WIN_ENABLE(tty, auto)
+NETHACK_WIN_ENABLE(x11, no)
+NETHACK_WIN_ENABLE(mswin, no, [use Microsoft Window's native graphics])
+
+dnl  ----- Figure out a C compiler to use; set @CC@
+AC_PROG_CC
+AC_SUBST(LFLAGS)
+
+dnl  ----- Check OS
+AC_CANONICAL_HOST
+
+dnl  ----- Early checks for libraries, as needed
+
+dnl PKG_PROG_PKG_CONFIG([])
+if test "$enable_x11_graphics" != "no"; then
+    # We have to check for libXaw before we define SYSV,
+    # since the X11 include files change their behaviour
+    # depending on whether the compiler defines it or not.
+    NETHACK_CHECK_LIBXAW([LIBXAW], have_libXaw=yes, have_libXaw=no)
+fi
+
+dnl  ------ Main OS types
+case $host_os in
+     mingw32 )		AC_DEFINE(WIN32,[],[An MS-Windows system])
+			AC_SUBST(HOST_MSWIN,[])
+			AC_SUBST(HOST_UNIX,[#])
+			SYSTEM="Syswinnt"
+			SYSSRC="\${SYSMSWINSRC}"
+			SYSOBJ="\${SYSMSWINOBJ}"
+			;;
+     *bsd* )		AC_DEFINE(BSD,[],[A BSD like system])
+			AC_SUBST(HOST_MSWIN,[#])
+			AC_SUBST(HOST_UNIX,[])
+			SYSTEM="Sysunix"
+			SYSSRC="\${SYSUNIXSRC}"
+			SYSOBJ="\${SYSUNIXOBJ}"
+			;;
+     * )		AC_DEFINE(SYSV,[],[A System V like system])
+			AC_SUBST(HOST_MSWIN,[#])
+			AC_SUBST(HOST_UNIX,[])
+			SYSTEM="Sysunix"
+			SYSSRC="\${SYSUNIXSRC}"
+			SYSOBJ="\${SYSUNIXOBJ}"
+			;;
+esac
+AC_SUBST(SYSTEM)
+AC_SUBST(SYSSRC)
+AC_SUBST(SYSOBJ)
+
+if test $host_os = mingw32; then
+    CFLAGS="$CFLAGS -mno-cygwin -isystem /usr/include/mingw"
+    LFLAGS="$LDFLAGS -mno-cygwin -L/usr/lib/mingw"
+
+    AC_MSG_CHECKING([for how to build NetHack key dynamic libraries])
+    if test "$GCC" = yes; then
+	AC_MSG_RESULT([gcc])
+	AC_SUBST(NHKEYDLL_GCC,[])
+    else
+	AC_MSG_RESULT([unknown])
+	if test "$enable_tty_graphics" = yes; then
+	    AC_MSG_ERROR([Don't know how to build NetHack key DLLs with $CC])
+	else
+	    AC_MSG_WARN([Can't enable tty graphics (key dynamic libraries)])
+	    NETHACK_AUTO_WIN_DISABLE(tty)
+	fi
+    fi
+fi
+
+dnl ------ Common subtypes
+case $host_os in
+     *cygwin* )		AC_DEFINE(CYGWIN32,[],[Unix on win32]);;
+     *linux* )		AC_DEFINE(LINUX,[],[GNU Linux]);;
+esac
+
+
+dnl  ----- Check for programs
+AC_PROG_LEX
+AC_PROG_YACC
+AC_CHECK_TOOLS(CHOWN,[chown true])
+AC_CHECK_TOOLS(CHGRP,[chgrp true])
+AC_CHECK_TOOLS(CHMOD,[chmod true])
+AC_CHECK_TOOL(WINDRES,windres,no)
+NETHACK_PROG_COMPRESS
+
+dnl  ----- Check for libraries
+
+dnl NETHACK_CHECK_LIBPNG(NETHACK_LIBPNG, have_libpng=yes, have_libpng=no)
+
+dnl  ----- Select window systems
+
+WINSRC=
+WINOBJ=
+WINLIB=
+CNF_SHARE_DATND=
+
+OPTIONS_FILE=
+OPTIONS_FILES=
+
+WINTTYLIB=
+if test "$enable_tty_graphics" != "no"; then
+    if test $host_os = mingw32; then
+	AC_SUBST(EXTRA_UNSHARE,["nhdefkey.dll nh340key.dll nhraykey.dll"])
+	CFLAGS="$CFLAGS -DWIN32CON"
+	WINTTYLIB=""
+	WINSRC="${WINSRC} \$(WINTTYSRC)"
+	WINOBJ="${WINOBJ} \$(WINTTYOBJ)"
+	WINLIB="${WINLIB} \$(WINTTYLIB)"
+	AC_DEFINE(TTY_GRAPHICS, [], [Console output])
+    else
+	# For TTY, determine the termlib
+	# Check for termlib before termcap because Solaris termcap needs libucb.
+	TERMLIB_VARIANTS="ncurses curses termlib termcap terminfo"
+	for termlib in ${TERMLIB_VARIANTS}; do
+	    AC_CHECK_LIB(${termlib}, tgetent,
+	      [WINTTYLIB="-l${termlib}"
+	      WINSRC="${WINSRC} \$(WINTTYSRC)"
+	      WINOBJ="${WINOBJ} \$(WINTTYOBJ)"
+	      WINLIB="${WINLIB} \$(WINTTYLIB)"
+	      AC_DEFINE(TTY_GRAPHICS, [], [Console output])
+	      break])
+	done
+	if test -z "$termlib"; then
+	    if test "$enable_tty_graphics" = yes; then
+		AC_MSG_ERROR([Can't find tgetent (needed for tty graphics)])
+	    else
+		AC_MSG_WARN([Can't enable tty graphics (no tgetent)])
+		NETHACK_AUTO_WIN_DISABLE(tty)
+	    fi
+	fi
+	dnl  ----- Check for tparm in curses
+	AC_CHECK_HEADERS(curses.h termcap.h)
+	AC_CHECK_LIB(curses, tparm, AC_DEFINE(HAVE_TPARM, 1, [Define this if you have the tparm function in an included lib.]),)
+
+    fi
+
+    OPTIONS_FILE="options"
+    OPTIONS_FILES="options"
+fi
+if test "$enable_tty_graphics" = "no" -a $host_os = mingw32; then
+    LFLAGS="$LFLAGS -mwindows"
+fi
+AC_SUBST(WINTTYLIB)
+
+dnl if test "$enable_proxy_graphics" != "no"; then
+dnl     if test "$have_libpng" = "no"; then
+dnl 	if test "$enable_proxy_graphics" = "yes"; then
+dnl 	    AC_MSG_ERROR([Need libpng for proxy graphics])
+dnl 	else
+dnl 	    AC_MSG_WARN([Can't enable proxy graphics (no useable libpng)])
+dnl 	fi
+dnl     else
+dnl 	if test "$enable_proxy_graphics" = "yes"; then
+dnl 	    PKG_CHECK_MODULES(NETHACK_PROXY, nhproxy >= 0.9.0)
+dnl 	else
+dnl 	    PKG_CHECK_MODULES(NETHACK_PROXY, nhproxy >= 0.9.0, :, :)
+dnl 	fi
+dnl 	if test -n "$NETHACK_PROXY_LIBS"; then
+dnl 	    CFLAGS="${CFLAGS} ${NETHACK_LIBPNG_CFLAGS}"
+dnl 	    LFLAGS="${LFLAGS} ${NETHACK_LIBPNG_LFLAGS}"
+dnl 	    WINSRC="${WINSRC} \$(WINPROXYSRC)"
+dnl 	    WINOBJ="${WINOBJ} \$(WINPROXYOBJ)"
+dnl 	    WINLIB="${WINLIB} ${NETHACK_PROXY_LIBS}"
+dnl 	    CNF_SHARE_DATND="${CNF_SHARE_DATND} \$(CNF_SHARE_PROXYND)"
+dnl 	    AC_DEFINE(PROXY_GRAPHICS, [], [proxy graphics])
+dnl 	fi
+dnl     fi
+dnl fi
+dnl AC_SUBST(NETHACK_PROXY_CFLAGS)
+
+if test "$enable_x11_graphics" != "no"; then
+    if test $have_libXaw != yes; then
+      AC_MSG_ERROR([Need X Athena Widgets Library for X11 graphics])
+    fi
+    CFLAGS="${CFLAGS} ${LIBXAW_CFLAGS}"
+    WINSRC="${WINSRC} \$(WINX11SRC)"
+    WINOBJ="${WINOBJ} \$(WINX11OBJ)"
+    WINLIB="${WINLIB} ${LIBXAW_LIBS}"
+    CNF_SHARE_DATND="${CNF_SHARE_DATND} \$(CNF_SHARE_X11ND)"
+    AC_DEFINE(X11_GRAPHICS, [], [X11 graphics])
+
+    OPTIONS_FILE="options"
+    OPTIONS_FILES="options"
+fi
+
+if test "$enable_mswin_graphics" != "no"; then
+    AC_MINGW32
+
+    if test "$WINDRES" = "no"; then
+	AC_MSG_ERROR([Need windres for Microsoft Window's native graphics])
+    fi
+    WINSRC="${WINSRC} \$(WINMSSRC)"
+    WINOBJ="${WINOBJ} \$(WINMSOBJ)"
+    WINLIB="${WINLIB} \$(WINMSLIB)"
+    CNF_SHARE_DATND="${CNF_SHARE_DATND} \$(CNF_SHARE_MSND)"
+    AC_DEFINE(MSWIN_GRAPHICS, [], [Microsoft Window's native graphics])
+
+    OPTIONS_FILE="guioptions"
+    OPTIONS_FILES="$OPTIONS_FILES guioptions"
+fi
+
+AC_SUBST(WINSRC)
+AC_SUBST(WINOBJ)
+AC_SUBST(WINLIB)
+AC_SUBST(CNF_SHARE_DATND)
+AC_SUBST(OPTIONS_FILE)
+AC_SUBST(OPTIONS_FILES)
+
+AC_MSG_CHECKING(for valid window system configuration)
+if test -n "$nethack_wins"; then
+    AC_MSG_RESULT([yes])
+    for win in $nethack_wins; do
+	AC_DEFINE_UNQUOTED(DEFAULT_WINDOW_SYS,["$win"],
+	  [The default windowing system])
+	break
+    done
+else
+    AC_MSG_RESULT([no])
+    AC_MSG_ERROR([need to enable at least one window system])
+fi
+
+
+dnl  ----- Check for header files
+AC_HEADER_STDC
+# Due to what may be a bug in autoconf, we have to call AC_CHECK_HEADERS()
+# to get the various HAVE_xxx_H preprocessor variables detected by
+# AC_HEADER_STDC active. These are needed for AC_CHECK_DECLS(), below.
+AC_CHECK_HEADERS([string.h])
+AC_CHECK_HEADER(regex.h, [have_regex_h=yes],[have_regex_h=no],/* TEST_REGEX */)
+
+dnl ------ Check for data types
+dnl -- Regex-Check for MENU_COLOR
+if test "$have_regex_h" = "yes"; then
+  AC_CHECK_TYPE(struct re_pattern_buffer,
+    [AC_DEFINE(MENU_COLOR_REGEX, [], [Use regular expressions])
+     AC_DEFINE(MENU_COLOR_REGEX_GNU, [], [GNU regex is available])
+    ],
+    [AC_CHECK_TYPE(regex_t,
+      [AC_DEFINE(MENU_COLOR_REGEX, [], [Use regular expressions])
+	AC_DEFINE(MENU_COLOR_REGEX_POSIX, [], [Posix regex is available])
+      ],,
+      [AC_INCLUDES_DEFAULT([])
+	#include <regex.h>
+      ])
+    ],[AC_INCLUDES_DEFAULT([])
+	#include <regex.h>
+      ])
+fi
+AC_CHECK_TYPE(void,,AC_DEFINE(NOVOID, [], [No void type available]))
+
+
+dnl  ----- Check for library functions
+AC_CHECK_DECLS([strncmpi, strnicmp], AC_DEFINE(STRNCMPI, [], [Use strncmpi]))
+
+dnl ------ Check needed functions for TIMED_DELAY
+AC_CHECK_FUNC(msleep, cf_result=yes, cf_result=no)
+if test "$cf_result" = no; then
+	AC_CHECK_FUNC(usleep, AC_DEFINE(TIMED_DELAY, [], [Using usleep]), [])
+else
+	AC_DEFINE(TIMED_DELAY, [], [Using msleep])
+fi
+
+dnl  ----- Check for program needed to build Guidebook
+AC_CHECK_PROG(HAVE_NROFF, nroff, "yes", "no")
+AC_CHECK_PROG(HAVE_TBL, tbl, "yes", "no")
+if test "$HAVE_NROFF" != "no" ; then
+if test "$HAVE_TBL" != "no" ; then
+	AC_SUBST(GUIDEBOOK,[Guidebook])
+	AC_SUBST(GUIDEBOOK_TXT,[Guidebook.txt])
+fi
+fi
+
+
+dnl  ----- Check for compile-time options
+# We use auto for data librarian to avoid breaking the rule that autoconf
+# should use the same defaults as the manual configuration, but all platforms
+# that support autoconf also support DLB, so the automatic choice is always yes.
+NETHACK_ARG(data-librarian,[Data librarian],DLB,auto,
+  [enable_data_librarian=yes])
+NETHACK_ARG(sinks,[Kitchen sinks],SINKS,yes)
+# NETHACK_ARG(light-src-spell,[Spells are light sources],LIGHT_SRC_SPELL,yes)
+NETHACK_ARG(wallified-maze,[Fancy mazes],WALLIFIED_MAZE,yes)
+NETHACK_ARG(reincarnation,[Special Rogue-like levels],REINCARNATION,yes)
+# NETHACK_ARG(blackmarket,[Blackmarket],BLACKMARKET,yes)
+NETHACK_ARG(kops,[Keystone Kops],KOPS,yes)
+NETHACK_ARG(seduce,[Succubi/incubi seduction],SEDUCE,yes)
+# NETHACK_ARG(invisible-objects,[Invisible objects],INVISIBLE_OBJECTS,yes)
+# NETHACK_ARG(unpolypile,[Object unpolymorphing],UNPOLYPILE,yes)
+# NETHACK_ARG(wallet-o-p,[Perseus' Wallet],WALLET_O_P,yes)
+# NETHACK_ARG(lightsabers,[Lightsabers],LIGHTSABERS,yes)
+# NETHACK_ARG(d-saber,[Dimsabers],LIGHTSABERS,yes)
+# NETHACK_ARG(p-spoon,[Spoon],P_SPOON,yes)
+# NETHACK_ARG(firearms,[Guns and Bullets],FIREARMS,yes)
+# NETHACK_ARG(eaten-memory,[Remember which monsters have been eaten],
+#  EATEN_MEMORY,yes)
+NETHACK_ARG(steed,[Ability to ride monsters],STEED,yes)
+# NETHACK_ARG(dwarf,[Dwarf race],DWARF,yes)
+NETHACK_ARG(tourist,[Tourist class],TOURIST,yes)
+# NETHACK_ARG(yeoman,[Yeoman class],YEOMAN,yes)
+# NETHACK_ARG(zouthern,[Zoutherner class],ZOUTHERN,no)
+NETHACK_ARG(redo,[Redo last command],REDO,yes)
+NETHACK_ARG(clipping,[Allow smaller screens],CLIPPING,yes)
+#NETHACK_ARG(menu-color,[TTY graphics menu color],MENU_COLOR,yes)
+#NETHACK_ARG(status-color,[TTY graphics status color],STATUS_COLORS,yes)
+#NETHACK_ARG(auto-open,[Open doors by walking into them],AUTO_OPEN,yes)
+NETHACK_ARG(elbereth,[Engraving the E-word repels monsters],ELBERETH,yes)
+# NETHACK_ARG(noartifactwish,[Prevent wishing for special artifacts],
+#  NOARTIFACTWISH,no)
+# NETHACK_ARG(no-bones,[Disable loading and saving bones levels],NO_BONES,no)
+NETHACK_ARG(user-sounds,
+  [Allow user-defined mapping from messages to sounds)],
+  USER_SOUNDS,no)
+NETHACK_ARG(exp-on-botl,[Show experience on bottom line],EXP_ON_BOTL,yes)
+NETHACK_ARG(score-on-botl,[Show score on bottom line],SCORE_ON_BOTL,no)
+# NETHACK_ARG(realtime-on-botl,[Show elapsed time on bottom line],REALTIME_ON_BOTL,no)
+#NETHACK_ARG(borg,[Borg player (only under DOS)],BORG,no)
+# NETHACK_ARG(keep-save,[Keep save files after restore],KEEP_SAVE,no)
+# NETHACK_ARG(charon,[Charon's boat, enables Cerebus (not implemented)],CHARON,no)
+# NETHACK_ARG(show-dmg,[Display damage reports],SHOW_DMG,yes)
+# NETHACK_ARG(show-weight,[Display object weight],SHOW_WEIGHT,yes)
+# NETHACK_ARG(other-services,[Shopkeeper services],OTHER_SERVICES,yes)
+# NETHACK_ARG(show-born,[Display number of created monsters at the end of game],SHOW_BORN,yes)
+# NETHACK_ARG(show-extinct,[Display extinct monsters at the end of game],SHOW_EXTINCT,yes)
+# NETHACK_ARG(dungeon-growth,[Dungeon growth],DUNGEON_GROWTH,yes)
+#NETHACK_ARG(shout,[Shouting and pet commands (not implemented)],SHOUT,no)
+# NETHACK_ARG(display-layers,[Support transparent tilesets],DISPLAY_LAYERS,yes)
+NETHACK_ARG(goldobj,[Gold is kept on object chains (experimental)],GOLDOBJ,no)
+NETHACK_ARG(autopickup-exceptions,[Exceptions to autopickup (experimental)],
+  AUTOPICKUP_EXCEPTIONS,no)
+#NETHACK_ARG(qwertz,[QWERTZ keyboard layout support],QWERTZ,yes)
+#NETHACK_ARG(simple-mail,[simple mail dgamelaunch support],SIMPLE_MAIL,no)
+
+#NETHACK_ARG(xlogfile,[More verbose logfile],XLOGFILE,yes)
+#AC_MSG_CHECKING([whether to enable xlogfile])
+#AC_ARG_ENABLE([xlogfile], AC_HELP_STRING([--enable-xlogfile=FILE],
+#	[More verbose logfile (default=yes, default filename=xlogfile)]),
+#	if test "$enableval" != no; then enable_xlogfile=yes;
+#	 if test "$enableval" != yes; then xlogfile=$enableval;
+#	 else xlogfile="xlogfile"; fi;
+#	else enable_xlogfile=no; fi,
+#	enable_xlogfile=yes; xlogfile="xlogfile")
+#if test "$enable_xlogfile" != "no" ; then
+#	AC_MSG_RESULT([yes (file $xlogfile)])
+#	AC_DEFINE_UNQUOTED([XLOGFILE], ["$xlogfile"], [The name of the xlogfile])
+#	AC_SUBST(XLOGFILE,["$xlogfile"])
+#else
+#	AC_MSG_RESULT([no])
+#fi
+
+# NETHACK_ARG(livelog,[Live game progress logfile],LIVELOGFILE,no)
+#AC_MSG_CHECKING([whether to enable live logfile])
+#AC_ARG_ENABLE([livelog], AC_HELP_STRING([--enable-livelog=FILE],
+#	[Live game progress logfile (default=no, default filename=livelog)]),
+#	if test "$enableval" != no; then enable_livelog=yes;
+#	 if test "$enableval" != yes; then livelog=$enableval;
+#	 else livelog="livelog"; fi;
+#	else enable_livelog=no; fi,
+#	enable_livelog=no)
+#if test "$enable_livelog" != "no" ; then
+#	AC_MSG_RESULT([yes (file $livelog)])
+#	AC_DEFINE_UNQUOTED([LIVELOGFILE], ["$livelog"], [The name of the live logfile])
+#
+#	NETHACK_ARG(livelog-shout,[Shoutting into the live game logfile],LIVELOG_SHOUT,no)
+#else
+#	AC_MSG_RESULT([no])
+#fi
+
+AC_MSG_CHECKING([whether to enable wizmode])
+AC_ARG_ENABLE([wizmode], AC_HELP_STRING([--enable-wizmode=USER],
+	[enable wizard mode for the specified user (default=wizard)]),
+	if test "$enableval" != no; then enable_wizmode=yes;
+	 if test "$enableval" != yes; then wizard=$enableval;
+	 else wizard="wizard"; fi;
+	else enable_wizmode=no; fi,
+	enable_wizmode=yes;wizard="wizard")
+if test "$enable_wizmode" != "no" ; then
+	AC_MSG_RESULT([yes (user $wizard)])
+	AC_DEFINE_UNQUOTED([WIZARD], ["$wizard"], [The person allowed to use the -D option])
+else
+	AC_MSG_RESULT([no])
+fi
+
+if test "$CHOWN" != "true"; then
+    AC_MSG_CHECKING([for owner of installed files])
+    AC_ARG_WITH([owner], [AS_HELP_STRING([--with-owner=USER],
+	    [Set the owner of installed files (default=games)])],
+	    [], [with_owner=games])
+    if test "$with_owner" != "no" ; then
+	NETHACK_COMMAND_IFELSE(
+		[find . -user "$with_owner" -prune -print > /dev/null],
+		[AC_MSG_RESULT([$with_owner])
+		 AC_SUBST(OWNER,[$with_owner])],
+		[AC_MSG_FAILURE([test for user $with_owner failed])])
+    else
+	CHOWN=true
+	AC_MSG_RESULT([not set])
+    fi
+fi
+
+if test "$CHGRP" != "true"; then
+    AC_MSG_CHECKING([for group of installed files])
+    AC_ARG_WITH([group], [AS_HELP_STRING([--with-group=GROUP],
+	    [Set the group of installed files (default=bin)])],
+	    [], [with_group=bin])
+    if test "$with_group" != "no" ; then
+	NETHACK_COMMAND_IFELSE(
+		[find . -group "$with_group" -prune -print > /dev/null],
+		[AC_MSG_RESULT([$with_group])
+		 AC_SUBST(GROUP,[$with_group])],
+		[AC_MSG_FAILURE([test for group $with_group failed])])
+    else
+	CHGRP=true
+	AC_MSG_RESULT([not set])
+    fi
+fi
+
+NETHACK_LINKS=
+NETHACK_LINKS_ADD([dat/data.base])
+NETHACK_LINKS_ADD([dat/rumors.tru])
+NETHACK_LINKS_ADD([dat/rumors.fal])
+NETHACK_LINKS_ADD([dat/quest.txt])
+NETHACK_LINKS_ADD([dat/oracles.txt])
+NETHACK_LINKS_ADD([dat/dungeon.def])
+NETHACK_LINKS_ADD([dat/help])
+NETHACK_LINKS_ADD([dat/hh])
+NETHACK_LINKS_ADD([dat/cmdhelp])
+NETHACK_LINKS_ADD([dat/history])
+NETHACK_LINKS_ADD([dat/opthelp])
+NETHACK_LINKS_ADD([dat/wizhelp])
+NETHACK_LINKS_ADD([include/win32api.h:sys/winnt/win32api.h])
+
+AC_CONFIG_LINKS(${NETHACK_LINKS})
+
+dnl  ----- Process the Makefiles
+AC_CONFIG_FILES([Makefile:sys/autoconf/Makefile.top]
+	[src/Makefile:sys/autoconf/Makefile.src]
+	[doc/Makefile:sys/autoconf/Makefile.doc]
+	[dat/Makefile:sys/autoconf/Makefile.dat]
+	[util/Makefile:sys/autoconf/Makefile.utl]
+	[sys/autoconf/depend.awk:sys/autoconf/depend.in])
+
+AH_TOP([#ifndef AUTOCONF_H
+#define AUTOCONF_H])
+AH_BOTTOM([#endif /* AUTOCONF_H */])
+
+NETHACK_CONFIG_HEADER([include/autoconf.h:sys/autoconf/autoconf.hin])
+
+AC_OUTPUT
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/depend.awk nethack-autoconf/sys/autoconf/depend.awk
--- nethack-3.4.3/sys/autoconf/depend.awk	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/depend.awk	2009-01-16 14:33:34.000000000 +0100
@@ -0,0 +1,165 @@
+# depend.awk -- awk script used to construct makefile dependencies
+# for nethack's source files (`make depend' support for Makefile.src).
+#
+# usage:
+#   cd src ; nawk -f depend.awk ../include/*.h list-of-.c/.cpp-files
+#
+# This awk program scans each file in sequence, looking for lines beginning
+# with `#include "' and recording the name inside the quotes.  For .h files,
+# that's all it does.  For each .c file, it writes out a make rule for the
+# corresponding .o file; dependencies in nested header files are propagated
+# to the .o target.
+#
+# config.h and hack.h get special handling because of their heavy use;
+#	timestamps for them allow make to avoid rechecking dates on
+#	subsidiary headers for every source file;
+# extern.h gets special handling to avoid excessive recompilation
+#	during development;
+# patchlev.h gets special handling because it only exists on systems
+#	which consider filename patchlevel.h to be too long;
+# interp.c gets special handling because it usually doesn't exist; it's
+#	assumed to be the last #include in the file where it occurs.
+# win32api.h gets special handling because it only exists for some ports;
+#	it's assumed to be the last #include in the file where it occurs
+#
+BEGIN		{ FS = "\""			#for `#include "X"', $2 is X
+		  special[++sp_cnt] = "../include/config.h"
+		  special[++sp_cnt] = "../include/hack.h"
+		  alt_deps["../include/extern.h"] = ""
+		  alt_deps["../include/patchlev.h"] = ""
+		  alt_deps["interp.c"] = " #interp.c"	#comment it out
+		  alt_deps["../include/win32api.h"] = " #../include/win32api.h"
+		  srcdir_len = length(".././src/")
+		}
+FNR == 1	{ output_dep()			#finish previous file
+		  file = FILENAME		#setup for current file
+		}
+/^\#[ \t]*include[ \t]+\"/  {			#find `#include "X"'
+		  incl = $2;
+		  #[3.4.0: gnomehack headers currently aren't in include]
+		  #[0.0.8: win32 headers aren't in include either]
+		  if (incl ~ /\.h$/) {
+		    if (incl ~ /^gn/)	# gnomehack special case
+		      incl = "../win/gnome/" incl
+		    else if (incl == "winMS.h" || incl == "resource.h" ||
+			incl ~ /^mh/)	# win32 special cases
+		      incl = "../win/win32/" incl
+		    else
+		      incl = "../include/" incl
+		  }
+		  deps[file] = deps[file] " " incl
+		}
+END		{ output_dep() }		#finish the last file
+
+
+#
+# `file' has been fully scanned, so process it now; for .h files,
+# don't do anything (we've just been collecting their dependencies);
+# for .c files, output the `make' rule for corresponding .o file
+#
+function output_dep(				targ)
+{
+  if (file ~ /\.cp*$/) {
+    #prior to very first .c|.cpp file, handle some special header file cases
+    if (!c_count++)
+      output_specials()
+    #construct object filename from source filename
+    targ = file;  sub("^.+/", "", targ);  sub("\\.cp*$", ".o", targ)
+    #format and write the collected dependencies
+    format_dep(targ, file)
+  }
+}
+
+#
+# handle some targets (config.h, hack.h) via special timestamping rules
+#
+function output_specials(			i, sp, alt_sp)
+{
+  for (i = 1; i <= sp_cnt; i++) {
+    sp = special[i]
+    #change "../include/foo.h" first to "foo.h", then ultimately to "$(FOO_H)"
+    alt_sp = sp;  sub("^.+/", "", alt_sp)
+    print "#", alt_sp, "timestamp"	#output a `make' comment
+ #- sub("\\.", "_", alt_sp);  alt_sp = "$(" toupper(alt_sp) ")"
+ #+ Some nawks don't have toupper(), so hardwire these instead.
+    sub("config.h", "$(CONFIG_H)", alt_sp);  sub("hack.h", "$(HACK_H)", alt_sp);
+    format_dep(alt_sp, sp)		#output the target
+    print "\ttouch " alt_sp		#output a build command
+    alt_deps[sp] = alt_sp		#alternate dependency for depend()
+  }
+  print "#"
+}
+
+#
+# write a target and its dependency list in pretty-printed format;
+# if target's primary source file has a path prefix, also write build command
+#
+function format_dep(target, source,		n, i, list)
+{
+  split("", done)			#``for (x in done) delete done[x]''
+  printf("%s:", target);  col = length(target) + 1
+  #- printf("\t");  col += 8 - (col % 8);
+  #- if (col == 8) { printf("\t"); col += 8 }
+  source = depend("", source, 0)
+  n = split(source, list, " +")
+  for (i = 2; i <= n; i++) {	#(leading whitespace yields empty 1st element)
+    if (substr(list[i], 1, srcdir_len) == ".././src/")
+      list[i] = "$(srcdir)" substr(list[i], srcdir_len)
+    if (col + length(list[i]) >= (i < n ? 78 : 80)) {
+      printf(" \\\n\t\t");  col = 16	#make a backslash+newline split
+    } else {
+      printf(" ");  col++;
+    }
+    printf("%s", list[i]);  col += length(list[i])
+  }
+  printf("\n")				#terminate
+  #write build command if first source entry has non-include path prefix
+  source = list[2]
+  if (source ~ /\// && substr(source, 1, 11) != "../include/") {
+    if (source ~ /\.cpp$/ )
+      print "\t$(CXX) $(CXXFLAGS) -c " source
+    else if (source ~ /..\/win\/proxy\// )
+      print "\t$(CC) $(CFLAGS) $(WINPROXYCFLAGS) -c " source
+    else if (source ~ /..\/win\/win32\// )
+      print "\t$(CC) $(CFLAGS) $(WINMSCFLAGS) -c " source
+    else if (source ~ /..\/win\/gl\// )
+      print "\t$(CC) $(CFLAGS) $(SDLGL_CFLAGS) -c " source
+    else if (source ~ /\/gnome\//)    # "../win/gnome/foo.c"
+      print "\t$(CC) $(CFLAGS) $(GNOMEINC) -c " source
+    else
+      print "\t$(CC) $(CFLAGS) -c " source
+  }
+}
+
+#
+# recursively add the dependencies for file `name' to string `inout'
+# (unless `skip', in which case we're only marking files as already done)
+#
+function depend(inout, name, skip,		n, i, list)
+{
+  if (!done[name]++) {
+    if (name in alt_deps) {	#some names have non-conventional dependencies
+      if (!skip) inout = inout " " alt_deps[name]
+      skip = 1
+    } else {			#ordinary name
+      if (!skip) inout = inout " " name
+    }
+    if (!(name in deps)) name = ".././src/" name
+    if (name in deps) {
+ #-   n = split(deps[name], list, " +")
+ #-   for (i = 2; i <= n; i++)	#(leading whitespace yields empty 1st element)
+ #-	inout = depend(inout, list[i], skip)
+ #+  At least one implementation of nawk handles the local array `list' wrong,
+ #+  so the clumsier substitute code below is used as a workaround.
+      list = deps[name];  sub("^ +", "", list)
+      while (list) {
+	match((list " "), " +");  i = RSTART;  n = RLENGTH
+	inout = depend(inout, substr(list, 1, i-1), skip)
+	list = substr(list, i+n)
+      }
+    }
+  }
+  return inout
+}
+
+#depend.awk#
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/depend.in nethack-autoconf/sys/autoconf/depend.in
--- nethack-3.4.3/sys/autoconf/depend.in	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/depend.in	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,165 @@
+# depend.awk -- awk script used to construct makefile dependencies
+# for nethack's source files (`make depend' support for Makefile.src).
+#
+# usage:
+#   cd src ; nawk -f depend.awk ../include/*.h list-of-.c/.cpp-files
+#
+# This awk program scans each file in sequence, looking for lines beginning
+# with `#include "' and recording the name inside the quotes.  For .h files,
+# that's all it does.  For each .c file, it writes out a make rule for the
+# corresponding .o file; dependencies in nested header files are propagated
+# to the .o target.
+#
+# config.h and hack.h get special handling because of their heavy use;
+#	timestamps for them allow make to avoid rechecking dates on
+#	subsidiary headers for every source file;
+# extern.h gets special handling to avoid excessive recompilation
+#	during development;
+# patchlev.h gets special handling because it only exists on systems
+#	which consider filename patchlevel.h to be too long;
+# interp.c gets special handling because it usually doesn't exist; it's
+#	assumed to be the last #include in the file where it occurs.
+# win32api.h gets special handling because it only exists for some ports;
+#	it's assumed to be the last #include in the file where it occurs
+#
+BEGIN		{ FS = "\""			#for `#include "X"', $2 is X
+		  special[++sp_cnt] = "../include/config.h"
+		  special[++sp_cnt] = "../include/hack.h"
+		  alt_deps["../include/extern.h"] = ""
+		  alt_deps["../include/patchlev.h"] = ""
+		  alt_deps["interp.c"] = " #interp.c"	#comment it out
+		  alt_deps["../include/win32api.h"] = " #../include/win32api.h"
+		  srcdir_len = length("@SRCDIR@/")
+		}
+FNR == 1	{ output_dep()			#finish previous file
+		  file = FILENAME		#setup for current file
+		}
+/^\#[ \t]*include[ \t]+\"/  {			#find `#include "X"'
+		  incl = $2;
+		  #[3.4.0: gnomehack headers currently aren't in include]
+		  #[0.0.8: win32 headers aren't in include either]
+		  if (incl ~ /\.h$/) {
+		    if (incl ~ /^gn/)	# gnomehack special case
+		      incl = "../win/gnome/" incl
+		    else if (incl == "winMS.h" || incl == "resource.h" ||
+			incl ~ /^mh/)	# win32 special cases
+		      incl = "../win/win32/" incl
+		    else
+		      incl = "../include/" incl
+		  }
+		  deps[file] = deps[file] " " incl
+		}
+END		{ output_dep() }		#finish the last file
+
+
+#
+# `file' has been fully scanned, so process it now; for .h files,
+# don't do anything (we've just been collecting their dependencies);
+# for .c files, output the `make' rule for corresponding .o file
+#
+function output_dep(				targ)
+{
+  if (file ~ /\.cp*$/) {
+    #prior to very first .c|.cpp file, handle some special header file cases
+    if (!c_count++)
+      output_specials()
+    #construct object filename from source filename
+    targ = file;  sub("^.+/", "", targ);  sub("\\.cp*$", ".o", targ)
+    #format and write the collected dependencies
+    format_dep(targ, file)
+  }
+}
+
+#
+# handle some targets (config.h, hack.h) via special timestamping rules
+#
+function output_specials(			i, sp, alt_sp)
+{
+  for (i = 1; i <= sp_cnt; i++) {
+    sp = special[i]
+    #change "../include/foo.h" first to "foo.h", then ultimately to "$(FOO_H)"
+    alt_sp = sp;  sub("^.+/", "", alt_sp)
+    print "#", alt_sp, "timestamp"	#output a `make' comment
+ #- sub("\\.", "_", alt_sp);  alt_sp = "$(" toupper(alt_sp) ")"
+ #+ Some nawks don't have toupper(), so hardwire these instead.
+    sub("config.h", "$(CONFIG_H)", alt_sp);  sub("hack.h", "$(HACK_H)", alt_sp);
+    format_dep(alt_sp, sp)		#output the target
+    print "\ttouch " alt_sp		#output a build command
+    alt_deps[sp] = alt_sp		#alternate dependency for depend()
+  }
+  print "#"
+}
+
+#
+# write a target and its dependency list in pretty-printed format;
+# if target's primary source file has a path prefix, also write build command
+#
+function format_dep(target, source,		n, i, list)
+{
+  split("", done)			#``for (x in done) delete done[x]''
+  printf("%s:", target);  col = length(target) + 1
+  #- printf("\t");  col += 8 - (col % 8);
+  #- if (col == 8) { printf("\t"); col += 8 }
+  source = depend("", source, 0)
+  n = split(source, list, " +")
+  for (i = 2; i <= n; i++) {	#(leading whitespace yields empty 1st element)
+    if (substr(list[i], 1, srcdir_len) == "@SRCDIR@/")
+      list[i] = "$(srcdir)" substr(list[i], srcdir_len)
+    if (col + length(list[i]) >= (i < n ? 78 : 80)) {
+      printf(" \\\n\t\t");  col = 16	#make a backslash+newline split
+    } else {
+      printf(" ");  col++;
+    }
+    printf("%s", list[i]);  col += length(list[i])
+  }
+  printf("\n")				#terminate
+  #write build command if first source entry has non-include path prefix
+  source = list[2]
+  if (source ~ /\// && substr(source, 1, 11) != "../include/") {
+    if (source ~ /\.cpp$/ )
+      print "\t$(CXX) $(CXXFLAGS) -c " source
+    else if (source ~ /..\/win\/proxy\// )
+      print "\t$(CC) $(CFLAGS) $(WINPROXYCFLAGS) -c " source
+    else if (source ~ /..\/win\/win32\// )
+      print "\t$(CC) $(CFLAGS) $(WINMSCFLAGS) -c " source
+    else if (source ~ /..\/win\/gl\// )
+      print "\t$(CC) $(CFLAGS) $(SDLGL_CFLAGS) -c " source
+    else if (source ~ /\/gnome\//)    # "../win/gnome/foo.c"
+      print "\t$(CC) $(CFLAGS) $(GNOMEINC) -c " source
+    else
+      print "\t$(CC) $(CFLAGS) -c " source
+  }
+}
+
+#
+# recursively add the dependencies for file `name' to string `inout'
+# (unless `skip', in which case we're only marking files as already done)
+#
+function depend(inout, name, skip,		n, i, list)
+{
+  if (!done[name]++) {
+    if (name in alt_deps) {	#some names have non-conventional dependencies
+      if (!skip) inout = inout " " alt_deps[name]
+      skip = 1
+    } else {			#ordinary name
+      if (!skip) inout = inout " " name
+    }
+    if (!(name in deps)) name = "@SRCDIR@/" name
+    if (name in deps) {
+ #-   n = split(deps[name], list, " +")
+ #-   for (i = 2; i <= n; i++)	#(leading whitespace yields empty 1st element)
+ #-	inout = depend(inout, list[i], skip)
+ #+  At least one implementation of nawk handles the local array `list' wrong,
+ #+  so the clumsier substitute code below is used as a workaround.
+      list = deps[name];  sub("^ +", "", list)
+      while (list) {
+	match((list " "), " +");  i = RSTART;  n = RLENGTH
+	inout = depend(inout, substr(list, 1, i-1), skip)
+	list = substr(list, i+n)
+      }
+    }
+  }
+  return inout
+}
+
+#depend.awk#
diff -uwrN --exclude=.svn nethack-3.4.3/sys/autoconf/install-sh nethack-autoconf/sys/autoconf/install-sh
--- nethack-3.4.3/sys/autoconf/install-sh	1970-01-01 01:00:00.000000000 +0100
+++ nethack-autoconf/sys/autoconf/install-sh	2008-09-21 15:56:23.000000000 +0200
@@ -0,0 +1,251 @@
+#!/bin/sh
+#
+# install - install a program, script, or datafile
+# This comes from X11R5 (mit/util/scripts/install.sh).
+#
+# Copyright 1991 by the Massachusetts Institute of Technology
+#
+# Permission to use, copy, modify, distribute, and sell this software and its
+# documentation for any purpose is hereby granted without fee, provided that
+# the above copyright notice appear in all copies and that both that
+# copyright notice and this permission notice appear in supporting
+# documentation, and that the name of M.I.T. not be used in advertising or
+# publicity pertaining to distribution of the software without specific,
+# written prior permission.  M.I.T. makes no representations about the
+# suitability of this software for any purpose.  It is provided "as is"
+# without express or implied warranty.
+#
+# Calling this script install-sh is preferred over install.sh, to prevent
+# `make' implicit rules from creating a file called install from it
+# when there is no Makefile.
+#
+# This script is compatible with the BSD install script, but was written
+# from scratch.  It can only install one file at a time, a restriction
+# shared with many OS's install programs.
+
+
+# set DOITPROG to echo to test this script
+
+# Don't use :- since 4.3BSD and earlier shells don't like it.
+doit="${DOITPROG-}"
+
+
+# put in absolute paths if you don't have them in your path; or use env. vars.
+
+mvprog="${MVPROG-mv}"
+cpprog="${CPPROG-cp}"
+chmodprog="${CHMODPROG-chmod}"
+chownprog="${CHOWNPROG-chown}"
+chgrpprog="${CHGRPPROG-chgrp}"
+stripprog="${STRIPPROG-strip}"
+rmprog="${RMPROG-rm}"
+mkdirprog="${MKDIRPROG-mkdir}"
+
+transformbasename=""
+transform_arg=""
+instcmd="$mvprog"
+chmodcmd="$chmodprog 0755"
+chowncmd=""
+chgrpcmd=""
+stripcmd=""
+rmcmd="$rmprog -f"
+mvcmd="$mvprog"
+src=""
+dst=""
+dir_arg=""
+
+while [ x"$1" != x ]; do
+    case $1 in
+	-c) instcmd="$cpprog"
+	    shift
+	    continue;;
+
+	-d) dir_arg=true
+	    shift
+	    continue;;
+
+	-m) chmodcmd="$chmodprog $2"
+	    shift
+	    shift
+	    continue;;
+
+	-o) chowncmd="$chownprog $2"
+	    shift
+	    shift
+	    continue;;
+
+	-g) chgrpcmd="$chgrpprog $2"
+	    shift
+	    shift
+	    continue;;
+
+	-s) stripcmd="$stripprog"
+	    shift
+	    continue;;
+
+	-t=*) transformarg=`echo $1 | sed 's/-t=//'`
+	    shift
+	    continue;;
+
+	-b=*) transformbasename=`echo $1 | sed 's/-b=//'`
+	    shift
+	    continue;;
+
+	*)  if [ x"$src" = x ]
+	    then
+		src=$1
+	    else
+		# this colon is to work around a 386BSD /bin/sh bug
+		:
+		dst=$1
+	    fi
+	    shift
+	    continue;;
+    esac
+done
+
+if [ x"$src" = x ]
+then
+	echo "install:	no input file specified"
+	exit 1
+else
+	true
+fi
+
+if [ x"$dir_arg" != x ]; then
+	dst=$src
+	src=""
+	
+	if [ -d $dst ]; then
+		instcmd=:
+		chmodcmd=""
+	else
+		instcmd=mkdir
+	fi
+else
+
+# Waiting for this to be detected by the "$instcmd $src $dsttmp" command
+# might cause directories to be created, which would be especially bad 
+# if $src (and thus $dsttmp) contains '*'.
+
+	if [ -f $src -o -d $src ]
+	then
+		true
+	else
+		echo "install:  $src does not exist"
+		exit 1
+	fi
+	
+	if [ x"$dst" = x ]
+	then
+		echo "install:	no destination specified"
+		exit 1
+	else
+		true
+	fi
+
+# If destination is a directory, append the input filename; if your system
+# does not like double slashes in filenames, you may need to add some logic
+
+	if [ -d $dst ]
+	then
+		dst="$dst"/`basename $src`
+	else
+		true
+	fi
+fi
+
+## this sed command emulates the dirname command
+dstdir=`echo $dst | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`
+
+# Make sure that the destination directory exists.
+#  this part is taken from Noah Friedman's mkinstalldirs script
+
+# Skip lots of stat calls in the usual case.
+if [ ! -d "$dstdir" ]; then
+defaultIFS='	
+'
+IFS="${IFS-${defaultIFS}}"
+
+oIFS="${IFS}"
+# Some sh's can't handle IFS=/ for some reason.
+IFS='%'
+set - `echo ${dstdir} | sed -e 's@/@%@g' -e 's@^%@/@'`
+IFS="${oIFS}"
+
+pathcomp=''
+
+while [ $# -ne 0 ] ; do
+	pathcomp="${pathcomp}${1}"
+	shift
+
+	if [ ! -d "${pathcomp}" ] ;
+        then
+		$mkdirprog "${pathcomp}"
+	else
+		true
+	fi
+
+	pathcomp="${pathcomp}/"
+done
+fi
+
+if [ x"$dir_arg" != x ]
+then
+	$doit $instcmd $dst &&
+
+	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else true ; fi &&
+	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&
+	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else true ; fi &&
+	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else true ; fi
+else
+
+# If we're going to rename the final executable, determine the name now.
+
+	if [ x"$transformarg" = x ] 
+	then
+		dstfile=`basename $dst`
+	else
+		dstfile=`basename $dst $transformbasename | 
+			sed $transformarg`$transformbasename
+	fi
+
+# don't allow the sed command to completely eliminate the filename
+
+	if [ x"$dstfile" = x ] 
+	then
+		dstfile=`basename $dst`
+	else
+		true
+	fi
+
+# Make a temp file name in the proper directory.
+
+	dsttmp=$dstdir/#inst.$$#
+
+# Move or copy the file name to the temp name
+
+	$doit $instcmd $src $dsttmp &&
+
+	trap "rm -f ${dsttmp}" 0 &&
+
+# and set any options; do chmod last to preserve setuid bits
+
+# If any of these fail, we abort the whole thing.  If we want to
+# ignore errors from any of these, just make sure not to ignore
+# errors from the above "$doit $instcmd $src $dsttmp" command.
+
+	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&
+	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&
+	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&
+	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&
+
+# Now rename the file to the real destination.
+
+	$doit $rmcmd -f $dstdir/$dstfile &&
+	$doit $mvcmd $dsttmp $dstdir/$dstfile 
+
+fi &&
+
+
+exit 0
diff -uwrN --exclude=.svn nethack-3.4.3/win/tty/termcap.c nethack-autoconf/win/tty/termcap.c
--- nethack-3.4.3/win/tty/termcap.c	2003-12-08 00:39:14.000000000 +0100
+++ nethack-autoconf/win/tty/termcap.c	2008-09-23 21:28:49.000000000 +0200
@@ -835,7 +835,7 @@
 
 #include <curses.h>
 
-#ifndef LINUX
+#ifndef HAVE_TPARM
 extern char *tparm();
 #endif
 
diff -uwrN --exclude=.svn nethack-3.4.3/win/win32/winhack.c nethack-autoconf/win/win32/winhack.c
--- nethack-3.4.3/win/win32/winhack.c	2003-12-08 00:39:14.000000000 +0100
+++ nethack-autoconf/win/win32/winhack.c	2008-09-23 21:28:49.000000000 +0200
@@ -12,7 +12,7 @@
 #include "mhmain.h"
 #include "mhmap.h"
 
-#ifndef __BORLANDC__
+#if !defined(__BORLANDC__) && !defined(__MINGW32__)
 #include <shlwapi.h>
 #else /* Borland redefines "boolean" in shlwapi.h so just use the little bit we need */
 typedef struct _DLLVERSIONINFO
